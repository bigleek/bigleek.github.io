<!DOCTYPE html>
<html lang="zh-cn">
<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="leek" />


    
     
        <meta name="google-site-verification" content="Vl02j4hnvtN2AJ3EfPjyvrHb191mbrnVtUlHgPUKBp0" />
    


<meta property="og:type" content="website">
<meta property="og:title" content="leek è‡ªç•™åœ°">
<meta property="og:url" content="https://imlike.cc/page/12/index.html">
<meta property="og:site_name" content="leek è‡ªç•™åœ°">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="leek">
<meta name="twitter:card" content="summary">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="leek è‡ªç•™åœ°" type="application/atom+xml">



    <link rel="shortcut icon" href="pics/g.jpg">



    <link href="//lf6-cdn-tos.bytecdntp.com/cdn/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//lf6-cdn-tos.bytecdntp.com/cdn/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//lf6-cdn-tos.bytecdntp.com/cdn/pace/1.0.2/pace.min.js"></script>
    <link href="//lf6-cdn-tos.bytecdntp.com/cdn/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">



<link rel="stylesheet" href="/css/style.css">



    <!-- æ³¨é‡Š -->
    <!-- <style> .article { opacity: 0;} </style> -->


<link href="//lf6-cdn-tos.bytecdntp.com/cdn/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>leek è‡ªç•™åœ°</title>

<script src="//lf6-cdn-tos.bytecdntp.com/cdn/jquery/2.2.4/jquery.min.js"></script>
<script src="//lf6-cdn-tos.bytecdntp.com/cdn/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//lf6-cdn-tos.bytecdntp.com/cdn/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//lf6-cdn-tos.bytecdntp.com/cdn/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






<meta name="generator" content="Hexo 5.2.0"></head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="https://pic.superbed.cn/item/5c9f2d213a213b04176522d4" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/"></a></h1>
        </hgroup>

        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="true" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>èœå•</li>
                        <li>æ ‡ç­¾</li>
                        
                        <li>å‹æƒ…é“¾æ¥</li>
                        
                        
                        <li>å…³äºæˆ‘</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">ä¸»é¡µ</a></li>
                        
                            <li><a href="/archives/">æ‰€æœ‰æ–‡ç« </a></li>
                        
                            <li><a href="/tags/">æ ‡ç­¾äº‘</a></li>
                        
                            <li><a href="/about/">å…³äºæˆ‘</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:s@yandex.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" rel="noopener" href="https://github.com/bigleek" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa Google" target="_blank" rel="noopener" href="https://plus.google.com/bigleekcode" title="Google"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Yelee/" rel="tag">Yelee</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Yilia/" rel="tag">Yilia</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/activiti/" rel="tag">activiti</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/alist/" rel="tag">alist</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/axios/" rel="tag">axios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/binary/" rel="tag">binary</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ceph/" rel="tag">ceph</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/clickhouse/" rel="tag">clickhouse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloud/" rel="tag">cloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/container/" rel="tag">container</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deepin/" rel="tag">deepin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/" rel="tag">elasticsearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsraech/" rel="tag">elasticsraech</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/" rel="tag">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flyio/" rel="tag">flyio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gdal/" rel="tag">gdal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitlab/" rel="tag">gitlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gnome/" rel="tag">gnome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo%E4%B8%BB%E9%A2%98/" rel="tag">hexoä¸»é¢˜</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/intellj/" rel="tag">intellj</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdk/" rel="tag">jdk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jenkins/" rel="tag">jenkins</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/" rel="tag">k8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kibana/" rel="tag">kibana</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kubernetes/" rel="tag">kubernetes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kuboard/" rel="tag">kuboard</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mail/" rel="tag">mail</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/" rel="tag">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nas/" rel="tag">nas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/no-ad/" rel="tag">no_ad</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/onedrive/" rel="tag">onedrive</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/orientDb/" rel="tag">orientDb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/" rel="tag">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/post/" rel="tag">post</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgres/" rel="tag">postgres</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/put/" rel="tag">put</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/repost/" rel="tag">repost</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spotify/" rel="tag">spotify</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/" rel="tag">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/" rel="tag">springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springcloud/" rel="tag">springcloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/" rel="tag">sublime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thunderbolt/" rel="tag">thunderbolt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vmware/" rel="tag">vmware</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vpn/" rel="tag">vpn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/" rel="tag">vscode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue-cli/" rel="tag">vue-cli</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webdav/" rel="tag">webdav</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/" rel="tag">windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wine/" rel="tag">wine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yandex/" rel="tag">yandex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zsh/" rel="tag">zsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%91%E6%92%AD/" rel="tag">äº‘æ’­</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" rel="tag">å†…ç½‘ç©¿é€</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A0%E9%80%9F/" rel="tag">åŠ é€Ÿ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9D%9A%E6%9E%9C%E4%BA%91/" rel="tag">åšæœäº‘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%9F%E5%90%8D/" rel="tag">åŸŸå</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A9%E7%BF%BC%E4%BA%91/" rel="tag">å¤©ç¿¼äº‘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91/" rel="tag">å¼€å‘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%A8%E8%8D%90/" rel="tag">æ¨è</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%90%9C%E7%8B%97%E8%BE%93%E5%85%A5%E6%B3%95/" rel="tag">æœç‹—è¾“å…¥æ³•</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%90%AC%E5%AE%B6/" rel="tag">æ¬å®¶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">æ ‘è“æ´¾</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/" rel="tag">çŸ¥è¯†ç®¡ç†</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%AB%99/" rel="tag">ç½‘ç«™</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%85%BE%E8%AE%AF%E4%BA%91/" rel="tag">è…¾è®¯äº‘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A7%86%E9%A2%91%E6%B5%81/" rel="tag">è§†é¢‘æµ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B5%84%E6%BA%90/" rel="tag">èµ„æº</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AC%E8%BD%BD/" rel="tag">è½¬è½½</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">è½¯ä»¶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE/" rel="tag">è½¯ä»¶é…ç½®</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/" rel="tag">é‚®ä»¶æœåŠ¡</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://imlike.cc/page.html">é•œåƒç½‘ç«™å¯¼èˆª</a>
                    
                      <a class="main-nav-link switch-friends-link" target="_blank" rel="noopener" href="https://imcyc.cn/">Morty</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">å¹³æ—¶é›¶æ•£çš„çŸ¥è¯†</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="å›åˆ°ä¸»é¡µ"></a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="https://pic.superbed.cn/item/5c9f2d213a213b04176522d4" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="å›åˆ°ä¸»é¡µ"></a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">ä¸»é¡µ</a></li>
                
                    <li><a href="/archives/">æ‰€æœ‰æ–‡ç« </a></li>
                
                    <li><a href="/tags/">æ ‡ç­¾äº‘</a></li>
                
                    <li><a href="/about/">å…³äºæˆ‘</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:s@yandex.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/bigleek" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa Google" target="_blank" href="https://plus.google.com/bigleekcode" title="Google"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="æ ‡ç­¾" friends="å‹æƒ…é“¾æ¥" about="å…³äºæˆ‘"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-kuberneteséƒ¨ç½²cephé›†æˆkuboard" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/b592fe66.html" class="article-date">
      <time datetime="2022-02-16T08:39:35.000Z" itemprop="datePublished">2022-02-16</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/b592fe66.html">kuberneteséƒ¨ç½²ceph</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><h2 id="k8sé›†æˆceph"><a href="#k8sé›†æˆceph" class="headerlink" title="k8sé›†æˆceph"></a>k8sé›†æˆceph</h2><p>å½“å‰æ¨èçš„é›†ç¾¤å®‰è£…æ–¹å¼æœ‰ <a target="_blank" rel="noopener" href="https://docs.ceph.com/en/latest/cephadm/install/">Deploying a new Ceph Cluster with cephadm (opens new window)</a>å’Œ <a target="_blank" rel="noopener" href="https://rook.io/docs/rook/v1.4/ceph-quickstart.html">Rook</a></p>
<h3 id="ä¸€ã€ä½¿ç”¨cephadmæ¥ç®¡ç†cephé›†ç¾¤"><a href="#ä¸€ã€ä½¿ç”¨cephadmæ¥ç®¡ç†cephé›†ç¾¤" class="headerlink" title="ä¸€ã€ä½¿ç”¨cephadmæ¥ç®¡ç†cephé›†ç¾¤"></a>ä¸€ã€ä½¿ç”¨cephadmæ¥ç®¡ç†cephé›†ç¾¤</h3><p>é¦–å…ˆ è¿™ç§æ–¹å¼ä¾èµ–çš„ç¯å¢ƒå¤ªå¤š</p>
<ul>
<p>
                              
                          
                    
              <!-- 
              
              <h2 id="k8sé›†æˆceph"><a href="#k8sé›†æˆceph" class="headerlink" title="k8sé›†æˆceph"></a>k8sé›†æˆceph</h2><p>å½“å‰æ¨èçš„é›†ç¾¤å®‰è£…æ–¹å¼æœ‰ <a target="_blank" rel="noopener" href="https://docs.ceph.com/en/latest/cephadm/install/">Deploying a new Ceph Cluster with cephadm (opens new window)</a>å’Œ <a target="_blank" rel="noopener" href="https://rook.io/docs/rook/v1.4/ceph-quickstart.html">Rook</a></p>
<h3 id="ä¸€ã€ä½¿ç”¨cephadmæ¥ç®¡ç†cephé›†ç¾¤"><a href="#ä¸€ã€ä½¿ç”¨cephadmæ¥ç®¡ç†cephé›†ç¾¤" class="headerlink" title="ä¸€ã€ä½¿ç”¨cephadmæ¥ç®¡ç†cephé›†ç¾¤"></a>ä¸€ã€ä½¿ç”¨cephadmæ¥ç®¡ç†cephé›†ç¾¤</h3><p>é¦–å…ˆ è¿™ç§æ–¹å¼ä¾èµ–çš„ç¯å¢ƒå¤ªå¤š</p>
<ul>
<li>Python 3</li>
<li>Systemd</li>
<li>Podman or Docker for running containers</li>
<li>Time synchronization (such as chrony or NTP)</li>
<li>LVM2 for provisioning storage devices</li>
</ul>
<p>å¹¶ä¸”æˆ‘æ˜¯ç”¨sealonsæ¥åˆå§‹åŒ–kubernetesç¯å¢ƒä¸­å·²ç»æœ‰python2.6ï¼Œå®‰è£…pythonä¸Šåç»´æŠ¤ä¼šå¾ˆå¤æ‚ï¼Œå®‰è£…æ­¥éª¤ç¹çï¼ˆèŠ‚ç‚¹æ”¯æŒç”¨dnf   apt å’Œä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶æ¥å®ç°å®‰è£…ï¼‰ä½†æ˜¯è¿˜æ˜¯ç¹ç</p>
<h3 id="äºŒã€ä½¿ç”¨rookæ¥ç®¡ç†é›†ç¾¤"><a href="#äºŒã€ä½¿ç”¨rookæ¥ç®¡ç†é›†ç¾¤" class="headerlink" title="äºŒã€ä½¿ç”¨rookæ¥ç®¡ç†é›†ç¾¤"></a>äºŒã€ä½¿ç”¨rookæ¥ç®¡ç†é›†ç¾¤</h3><p>ç›®å‰ä½¿ç”¨åè€…rookæ¥å®ç°éƒ¨ç½²ï¼Œè¿™ä¸ªé¡¹ç›®ä¹Ÿæ˜¯åŸç”Ÿäº‘åŸºé‡‘ä¼šæ¥æ¨åŠ¨çš„ï¼ŒåŠ å¿«kubernetes-storageçš„å®‰è£…éƒ¨ç½²å·¥ä½œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Rook å°†åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿè½¬å˜ä¸ºè‡ªæˆ‘ç®¡ç†ã€è‡ªæˆ‘æ‰©å±•ã€è‡ªæˆ‘ä¿®å¤çš„å­˜å‚¨æœåŠ¡ã€‚å®ƒå¯ä»¥è‡ªåŠ¨æ‰§è¡Œå­˜å‚¨ç®¡ç†å‘˜çš„ä»»åŠ¡ï¼šéƒ¨ç½²ã€å¼•å¯¼ã€é…ç½®ã€ä¾›åº”ã€æ‰©å±•ã€å‡çº§ã€è¿ç§»ã€ç¾éš¾æ¢å¤ã€ç›‘æ§å’Œèµ„æºç®¡ç†ã€‚</span><br><span class="line"></span><br><span class="line">Rook ä½¿ç”¨ Kubernetes å¹³å°çš„å¼ºå¤§åŠŸèƒ½é€šè¿‡ Kubernetes Operator ä¸ºæ¯ä¸ªå­˜å‚¨æä¾›å•†æä¾›æœåŠ¡ã€‚</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://rook.io/docs/rook/v1.8/quickstart.html">1.8/quickstart</a> åˆå§‹åŒ–rookå</p>
<p><a target="_blank" rel="noopener" href="https://developer.aliyun.com/article/679767">Kuberneteså­˜å‚¨ç³»ç»Ÿ-äº‘åŸç”Ÿå­˜å‚¨Rookéƒ¨ç½²-é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒº</a></p>
<p>åœ¨</p>
<h4 id="2-1ã€éƒ¨ç½²ä¸­çš„é—®é¢˜"><a href="#2-1ã€éƒ¨ç½²ä¸­çš„é—®é¢˜" class="headerlink" title="2.1ã€éƒ¨ç½²ä¸­çš„é—®é¢˜"></a>2.1ã€éƒ¨ç½²ä¸­çš„é—®é¢˜</h4><p>ç›´æ¥åˆ›å»ºä¼šç”±äºk8sè§’è‰²å’Œæƒé™é—®é¢˜å¯¼è‡´æŠ¥é”™ï¼ŒæŠ¥é”™çš„å†…å®¹å¦‚ä¸‹</p>
<blockquote>
<p> system:serviceaccount:rook-ceph:rook-ceph-systemâ€ cannot get resource â€œpodsâ€ </p>
</blockquote>
<p>tåŒæ—¶åœ¨ç½‘ä¸Šçœ‹åˆ°çš„åœ¨rookçš„è¦æ±‚ä¹Ÿçœ‹åˆ° <a target="_blank" rel="noopener" href="https://rook.io/docs/rook/v1.4/k8s-pre-reqs.html#pod-security-policies">Pod Security Policies</a>éœ€è¦ </p>
<p><img src="https://s2.loli.net/2022/02/16/tXMghbT3zj81aAS.png" alt="image.png"></p>
<p>éœ€è¦é…ç½®<a target="_blank" rel="noopener" href="https://jimmysong.io/kubernetes-handbook/concepts/rbac.html#:~:text=%E7%9B%AE%E5%89%8D%EF%BC%8C%E8%AE%B8%E5%A4%9A%20%E5%8A%A0,serviceaccount%3Dkube%2Dsystem%3Adefault">cluster-admin</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">kubectl create clusterrolebinding add-on-cluster-admin \</span><br><span class="line">  --clusterrole&#x3D;cluster-admin \</span><br><span class="line">  --serviceaccount&#x3D;kube-system:master</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">kubectl create rolebinding default-view \</span><br><span class="line">  --clusterrole&#x3D;view \</span><br><span class="line">  --serviceaccount&#x3D;rook-ceph:rook-ceph-system \</span><br><span class="line">  --namespace&#x3D;rook-ceph</span><br></pre></td></tr></table></figure>

<p>æ˜¯åœ¨ç•Œé¢é…ç½®å¯¹åº”çš„è§’è‰²æ‰å¯ä»¥æ­£å¸¸è®¿é—®rook-cephä¸‹çš„æœåŠ¡ã€‚</p>
<p><img src="../img/image-20220217093101275.png" alt="image-20220217093101275"></p>
<h3 id="ä¸‰ã€kubectlæ¥åˆå§‹åŒ–"><a href="#ä¸‰ã€kubectlæ¥åˆå§‹åŒ–" class="headerlink" title="ä¸‰ã€kubectlæ¥åˆå§‹åŒ–"></a>ä¸‰ã€kubectlæ¥åˆå§‹åŒ–</h3><p>å‚è€ƒé“¾æ¥<a target="_blank" rel="noopener" href="https://kuboard.cn/learning/k8s-intermediate/persistent/ceph/rook-config.html#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6">ä½¿ç”¨ CephFS ä½œä¸ºå­˜å‚¨ç±» - Rook | Kuboard</a> </p>
<p>æ ¸å¿ƒéƒ¨åˆ†å°±æ˜¯ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kubectl create -f https:&#x2F;&#x2F;kuboard.cn&#x2F;statics&#x2F;learning&#x2F;ceph&#x2F;rook-1.5.4&#x2F;crds.yaml</span><br><span class="line">kubectl create -f https:&#x2F;&#x2F;kuboard.cn&#x2F;statics&#x2F;learning&#x2F;ceph&#x2F;rook-1.5.4&#x2F;common.yaml</span><br><span class="line">kubectl create -f https:&#x2F;&#x2F;kuboard.cn&#x2F;statics&#x2F;learning&#x2F;ceph&#x2F;rook-1.5.4&#x2F;operator.yaml</span><br><span class="line">kubectl create -f https:&#x2F;&#x2F;kuboard.cn&#x2F;statics&#x2F;learning&#x2F;ceph&#x2F;rook-1.5.4&#x2F;cluster.yaml</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>éƒ¨ç½²æœåŠ¡åŒæ—¶æ–°å»ºrook-cephçš„ namespace</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; myfs.yaml &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">apiVersion: ceph.rook.io/v1</span></span><br><span class="line"><span class="string">kind: CephFilesystem</span></span><br><span class="line"><span class="string">metadata:</span></span><br><span class="line"><span class="string">  name: myfs</span></span><br><span class="line"><span class="string">  namespace: rook-ceph</span></span><br><span class="line"><span class="string">spec:</span></span><br><span class="line"><span class="string">  metadataPool:</span></span><br><span class="line"><span class="string">    replicated:</span></span><br><span class="line"><span class="string">      size: 3</span></span><br><span class="line"><span class="string">  dataPools:</span></span><br><span class="line"><span class="string">    - replicated:</span></span><br><span class="line"><span class="string">        size: 3</span></span><br><span class="line"><span class="string">  preservePoolsOnDelete: true</span></span><br><span class="line"><span class="string">  metadataServer:</span></span><br><span class="line"><span class="string">    activeCount: 1</span></span><br><span class="line"><span class="string">    activeStandby: true</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">kubectl create -f myfs.yaml</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºå¯¹åº”çš„ File System Name ï¼Œæä¾›ç»™é€‰æ‹©</p>
<p>ä½¿ç”¨kubectlçš„ymlæ–‡ä»¶åˆå§‹åŒ–åçš„æœåŠ¡åˆ—è¡¨</p>
<p><img src="../img/image-20220310150347306.png" alt="image-20220310150347306"></p>
<p>åˆ›å»ºå¯¹åº”çš„å­˜å‚¨ç±»</p>
<p><img src="../img/image-20220310150259603.png" alt="image-20220310150259603"></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ceph/" rel="tag">ceph</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kubernetes/" rel="tag">kubernetes</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kuboard/" rel="tag">kuboard</a></li></ul>
    </div>
 -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-nvidia-jetson-nano-use" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/dce64a3e.html" class="article-date">
      <time datetime="2022-02-07T07:03:25.000Z" itemprop="datePublished">2022-02-07</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/dce64a3e.html">nvidia-jetson-nano-use</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>å‚è€ƒåœ°å€<a target="_blank" rel="noopener" href="https://sharadchhetri.com/system-settings-not-opening-on-ubuntu-16-04-lts/">System settings not opening on Ubuntu 16.04 LTS</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove unity-control-center</span><br><span class="line">sudo apt autoremove</span><br><span class="line">sudo apt-get install unity-control-center</span><br></pre></td></tr></table></figure>

<p>
                              
                          
                    
              <!-- 
              
              <p>å‚è€ƒåœ°å€<a target="_blank" rel="noopener" href="https://sharadchhetri.com/system-settings-not-opening-on-ubuntu-16-04-lts/">System settings not opening on Ubuntu 16.04 LTS</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove unity-control-center</span><br><span class="line">sudo apt autoremove</span><br><span class="line">sudo apt-get install unity-control-center</span><br></pre></td></tr></table></figure>





<p><a target="_blank" rel="noopener" href="https://cleverbobo.github.io/2020/10/09/nano1/">Jetson nanoå¹³å°æ·±åº¦å­¦ä¹ ç¯å¢ƒé…ç½® | ç±³å¥‡å¦™å¦™å±‹</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/article/198759.htm">Jetson nanoé…ç½®VNCå®ç°è¿‡ç¨‹å›¾è§£_å…¶å®ƒç›¸å…³_è„šæœ¬ä¹‹å®¶</a></p>
<p><img src="../img/image-20220207171554625.png" alt="image-20220207171554625"></p>
<p><img src="../img/image-20220207171748648.png" alt="image-20220207171748648"></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-k8s-init-and-deploy-sample-service" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/16f52beb.html" class="article-date">
      <time datetime="2022-01-27T03:07:50.000Z" itemprop="datePublished">2022-01-27</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/16f52beb.html">k8s_init_and_deploy_sample_service</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><h1 id="åˆå§‹åŒ–k8s"><a href="#åˆå§‹åŒ–k8s" class="headerlink" title="åˆå§‹åŒ–k8s"></a>åˆå§‹åŒ–k8s</h1><p>æˆ‘äº†è§£æœ‰ä¸‹åˆ—ä¸€é”®éƒ¨ç½²k8s,ç¬¬ä¸€ä¸ªæ˜¯ç½‘å‹æ¨èï¼Œç¬¬äºŒä¸ªæ˜¯kuboardä¸Šé¢æ¨è</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/fanux/sealos">fanux/sealos: ä¸€æ¡å‘½ä»¤ç¦»çº¿å®‰è£…é«˜å¯ç”¨ KubernetesğŸ”¥ âˆ ğŸ³</a>ä¸ä¾èµ–haproxy keepalived</li>
<p>
                              
                          
                    
              <!-- 
              
              <h1 id="åˆå§‹åŒ–k8s"><a href="#åˆå§‹åŒ–k8s" class="headerlink" title="åˆå§‹åŒ–k8s"></a>åˆå§‹åŒ–k8s</h1><p>æˆ‘äº†è§£æœ‰ä¸‹åˆ—ä¸€é”®éƒ¨ç½²k8s,ç¬¬ä¸€ä¸ªæ˜¯ç½‘å‹æ¨èï¼Œç¬¬äºŒä¸ªæ˜¯kuboardä¸Šé¢æ¨è</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/fanux/sealos">fanux/sealos: ä¸€æ¡å‘½ä»¤ç¦»çº¿å®‰è£…é«˜å¯ç”¨ KubernetesğŸ”¥ âˆ ğŸ³</a>ä¸ä¾èµ–haproxy keepalived</li>
<li><a target="_blank" rel="noopener" href="https://github.com/eip-work/kuboard-spray">eip-work/kuboard-spray: ä½¿ç”¨å›¾å½¢åŒ–çš„ç•Œé¢ç¦»çº¿å®‰è£…ã€ç»´æŠ¤é«˜å¯ç”¨çš„ K8S é›†ç¾¤</a>åŸºäºkubespray</li>
</ul>
<p>ç›®å‰ä½¿ç”¨ sealosæ¥ä¸€é”®åˆå§‹åŒ–kubernetesç¯å¢ƒ</p>
<h2 id="ä¸€ã€å‡†å¤‡"><a href="#ä¸€ã€å‡†å¤‡" class="headerlink" title="ä¸€ã€å‡†å¤‡"></a>ä¸€ã€å‡†å¤‡</h2><ul>
<li>hostnameä¸èƒ½é‡å</li>
<li>æœåŠ¡è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨å…³é—­é˜²ç«å¢™</li>
<li>éœ€è¦ä¿è¯èŠ‚ç‚¹æœåŠ¡çš„å¯è®¿é—®</li>
<li>é»˜è®¤ä½¿ç”¨containerdè€Œä¸æ˜¯dockerä¸ºå®¹å™¨å¹³å°</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># ä¸‹è½½å¹¶å®‰è£…sealos, sealosæ˜¯ä¸ªgolangçš„äºŒè¿›åˆ¶å·¥å…·ï¼Œç›´æ¥ä¸‹è½½æ‹·è´åˆ°binç›®å½•å³å¯, releaseé¡µé¢ä¹Ÿå¯ä¸‹è½½</span><br><span class="line">wget -c https:&#x2F;&#x2F;sealyun.oss-cn-beijing.aliyuncs.com&#x2F;latest&#x2F;sealos &amp;&amp; \</span><br><span class="line">    chmod +x sealos &amp;&amp; mv sealos &#x2F;usr&#x2F;bin</span><br><span class="line"></span><br><span class="line"># ä¸‹è½½ç¦»çº¿èµ„æºåŒ…</span><br><span class="line">wget -c https:&#x2F;&#x2F;sealyun.oss-cn-beijing.aliyuncs.com&#x2F;05a3db657821277f5f3b92d834bbaf98-v1.22.0&#x2F;kube1.22.0.tar.gz</span><br><span class="line"></span><br><span class="line"># å®‰è£…ä¸€ä¸ªä¸‰masterçš„kubernetesé›†ç¾¤</span><br><span class="line">sealos init --passwd &#39;123456&#39; \</span><br><span class="line">	--master 192.168.0.2  --master 192.168.0.3  --master 192.168.0.4  \</span><br><span class="line">	--node 192.168.0.5 \</span><br><span class="line">	--pkg-url &#x2F;root&#x2F;kube1.22.0.tar.gz \</span><br><span class="line">	--version v1.22.0</span><br></pre></td></tr></table></figure>





<h3 id="1-1-å¸¸è§é—®é¢˜"><a href="#1-1-å¸¸è§é—®é¢˜" class="headerlink" title="1.1 å¸¸è§é—®é¢˜"></a>1.1 å¸¸è§é—®é¢˜</h3><h4 id="1-1-1åˆå§‹åŒ–å¤±è´¥"><a href="#1-1-1åˆå§‹åŒ–å¤±è´¥" class="headerlink" title="1.1.1åˆå§‹åŒ–å¤±è´¥"></a>1.1.1åˆå§‹åŒ–å¤±è´¥</h4><p>ç°è±¡å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>generator kubeconfig failed couldnâ€™t create a kubeconfig</p>
<p>container runtime is not running: output</p>
</blockquote>
<p>è§£å†³æ–¹æ³•ï¼š ä¸ç”¨å®‰è£…dockerå’Œå…¶ä»–æœåŠ¡ï¼ŒæœåŠ¡å™¨åªéœ€è¦wget æœåŠ¡</p>
<h4 id="1-1-2kubectl-get-pod"><a href="#1-1-2kubectl-get-pod" class="headerlink" title="1.1.2kubectl get pod"></a>1.1.2kubectl get pod</h4><blockquote>
<p>The connection to the server localhost:8080 was refused - did you specify the right host or port?</p>
</blockquote>
<p>è§£å†³æ–¹æ³•ï¼š å°†ä¸»èŠ‚ç‚¹çš„ admin.conf æ‹·åˆ°å¯¹åº”èŠ‚ç‚¹åé…ç½®ç¯å¢ƒå˜é‡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scp  /etc/kubernetes/admin.conf  192.168.31.133:/etc/kubernetes</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;export KUBECONFIG=/etc/kubernetes/admin.conf&quot;</span> &gt;&gt; ~/.bash_profile</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br><span class="line"></span><br><span class="line">kubectl get pods</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1499871">k8sé›†ç¾¤éƒ¨åˆ†å¸¸è§é—®é¢˜å¤„ç† - äº‘+ç¤¾åŒº - è…¾è®¯äº‘</a></p>
<h2 id="äºŒã€kuboardå®‰è£…"><a href="#äºŒã€kuboardå®‰è£…" class="headerlink" title="äºŒã€kuboardå®‰è£…"></a>äºŒã€kuboardå®‰è£…</h2><p><a target="_blank" rel="noopener" href="https://kuboard.cn/install/v3/install-in-k8s.html#%E6%96%B9%E6%B3%95%E4%B8%80-%E4%BD%BF%E7%94%A8-hostpath-%E6%8F%90%E4%BE%9B%E6%8C%81%E4%B9%85%E5%8C%96">åœ¨ K8S ä¸­å®‰è£… Kuboard v3 | Kuboard</a> </p>
<p>æˆ‘é€‰æ‹©ä½¿ç”¨ hostPath æä¾›æŒä¹…åŒ–è€Œä¸æ˜¯ StorageClass æä¾›æŒä¹…åŒ–ï¼ˆè¿˜æ²¡æœ‰åˆ›å»ºï¼‰</p>
<p>ç•Œé¢å¦‚ä¸‹</p>
<p><img src="../img/image-20220127150651513.png" alt="image-20220127150651513"></p>
<h3 id="ä¸‰ã€ä½¿ç”¨kubectlæ¥åˆ›å»ºpodå¹¶éƒ¨ç½²"><a href="#ä¸‰ã€ä½¿ç”¨kubectlæ¥åˆ›å»ºpodå¹¶éƒ¨ç½²" class="headerlink" title="ä¸‰ã€ä½¿ç”¨kubectlæ¥åˆ›å»ºpodå¹¶éƒ¨ç½²"></a>ä¸‰ã€ä½¿ç”¨kubectlæ¥åˆ›å»ºpodå¹¶éƒ¨ç½²</h3><p>å‘½ä»¤æ¥åˆ›å»ºï¼Œéƒ¨ç½²</p>
<p>æ³¨æ„kubectl éœ€è¦æŒ‡å®šnamespaceçš„å€¼ï¼Œå¦åˆ™é»˜è®¤æ˜¯default</p>
<blockquote>
<p> kubectl get pod        No resources found in default namespace.</p>
</blockquote>
<h4 id="3-1-åˆ›å»ºnginxé•œåƒ"><a href="#3-1-åˆ›å»ºnginxé•œåƒ" class="headerlink" title="3.1. åˆ›å»ºnginxé•œåƒ"></a>3.1. åˆ›å»ºnginxé•œåƒ</h4><p>kubectl run nginx â€“image=nginx â€“port=80</p>
<blockquote>
<p>NAME    READY   STATUS    RESTARTS   AGE</p>
<p>nginx   1/1     Running   0          83s</p>
</blockquote>
<h4 id="3-2-éƒ¨ç½²nginx"><a href="#3-2-éƒ¨ç½²nginx" class="headerlink" title="3.2. éƒ¨ç½²nginx"></a>3.2. éƒ¨ç½²nginx</h4><p>kubectl create deployment nginx â€“image=nginx</p>
<blockquote>
<p>deployment.apps/nginx created</p>
</blockquote>
<p> å¦åˆ™ è¿è¡Œä¸‹é¢å‘½ä»¤ä¼šå‡ºç°æ²¡æœ‰éƒ¨ç½²æœåŠ¡</p>
<p> kubectl get deployment</p>
<blockquote>
<p>  No resources found in default namespace.</p>
</blockquote>
<h4 id="3-3-nginxç«¯å£æš´éœ²èƒ½è¢«å¤–éƒ¨è®¿é—®"><a href="#3-3-nginxç«¯å£æš´éœ²èƒ½è¢«å¤–éƒ¨è®¿é—®" class="headerlink" title="3.3. nginxç«¯å£æš´éœ²èƒ½è¢«å¤–éƒ¨è®¿é—®"></a>3.3. nginxç«¯å£æš´éœ²èƒ½è¢«å¤–éƒ¨è®¿é—®</h4><blockquote>
<p> kubectl expose deployment nginx â€“port=80 â€“type=LoadBalancer</p>
</blockquote>
<h4 id="3-4-æŸ¥çœ‹podçš„ä¿¡æ¯"><a href="#3-4-æŸ¥çœ‹podçš„ä¿¡æ¯" class="headerlink" title="3.4. æŸ¥çœ‹podçš„ä¿¡æ¯"></a>3.4. æŸ¥çœ‹podçš„ä¿¡æ¯</h4><p>kubectl describe service nginx</p>
<blockquote>
<p>Name:                     nginx<br>Namespace:                default<br>Labels:                   app=nginx<br>Annotations:              <none><br>Selector:                 app=nginx<br>Type:                     LoadBalancer<br>IP Family Policy:         SingleStack<br>IP Families:              IPv4<br>IP:                       10.109.244.210<br>IPs:                      10.109.244.210<br>Port:                     <unset>  80/TCP<br>TargetPort:               80/TCP<br>NodePort:                 <unset>  30682/TCP<br>Endpoints:                100.118.167.130:80<br>Session Affinity:         None<br>External Traffic Policy:  Cluster<br>Events:                   <none></p>
</blockquote>
<p>kubectl get pods â€“all-namespaces</p>
<h4 id="é…ç½®æ–‡ä»¶æ¥éƒ¨ç½²"><a href="#é…ç½®æ–‡ä»¶æ¥éƒ¨ç½²" class="headerlink" title="é…ç½®æ–‡ä»¶æ¥éƒ¨ç½²"></a>é…ç½®æ–‡ä»¶æ¥éƒ¨ç½²</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">hello-node</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">default</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">hello-node</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">hello-node</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">hello-node</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">hello-node-container</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">gcr.io/$DEVSHELL_PROJECT_ID/hello-node:1.0</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure>

<p>kubectl apply -f nginx-deployment.yaml</p>
<h4 id="3-5å¸¸è§é—®é¢˜"><a href="#3-5å¸¸è§é—®é¢˜" class="headerlink" title="3.5å¸¸è§é—®é¢˜"></a>3.5å¸¸è§é—®é¢˜</h4><h5 id="3-5-1-k8sæŸä¸ªèŠ‚ç‚¹æŒ‚æ‰"><a href="#3-5-1-k8sæŸä¸ªèŠ‚ç‚¹æŒ‚æ‰" class="headerlink" title="3.5.1 k8sæŸä¸ªèŠ‚ç‚¹æŒ‚æ‰"></a>3.5.1 k8sæŸä¸ªèŠ‚ç‚¹æŒ‚æ‰</h5><p>å¦‚æœé‡åˆ°k8sæŸä¸ªèŠ‚ç‚¹æŒ‚æ‰ï¼Œä½†æ˜¯æœåŠ¡å™¨è¿˜æ˜¯å¯ä»¥è¿æ¥çš„æƒ…å†µï¼Œè¯´æ˜æ˜¯æœåŠ¡å™¨èŠ‚ç‚¹é€šä¿¡é—®é¢˜ï¼Œé¦–å…ˆå‚è€ƒä¸‹é¢çš„è¿æ¥æŸ¥çœ‹æ—¥å¿—å’Œå¯¹åº”ç«¯å£æ˜¯å¦æ˜¯æ­£å¸¸çš„</p>
<p><a target="_blank" rel="noopener" href="http://www.knockatdatabase.com/2021/11/27/kubernetes-cant-work-after-reboot-os/">æœåŠ¡å™¨é‡å¯åkubernetesæ— æ³•å¯åŠ¨çš„åŸå›  - æ•°æ®åº“æ•²é—¨äºº</a></p>
<p><a target="_blank" rel="noopener" href="https://discuss.kubernetes.io/t/the-connection-to-the-server-host-6443-was-refused-did-you-specify-the-right-host-or-port/552/4">The connection to the server <host>:6443 was refused - did you specify the right host or port? - General Discussions - Discuss Kubernetes</a></p>
<h6 id="æŸ¥çœ‹æ—¥å¿—çš„å‘½ä»¤å¦‚ä¸‹"><a href="#æŸ¥çœ‹æ—¥å¿—çš„å‘½ä»¤å¦‚ä¸‹" class="headerlink" title="æŸ¥çœ‹æ—¥å¿—çš„å‘½ä»¤å¦‚ä¸‹"></a>æŸ¥çœ‹æ—¥å¿—çš„å‘½ä»¤å¦‚ä¸‹</h6><blockquote>
<p> journalctl -u kubelet.service</p>
<p>journalctl -xefu kubelet</p>
</blockquote>
<h6 id="æŸ¥çœ‹èŠ‚ç‚¹å‘½ä»¤å¦‚ä¸‹"><a href="#æŸ¥çœ‹èŠ‚ç‚¹å‘½ä»¤å¦‚ä¸‹" class="headerlink" title="æŸ¥çœ‹èŠ‚ç‚¹å‘½ä»¤å¦‚ä¸‹"></a>æŸ¥çœ‹èŠ‚ç‚¹å‘½ä»¤å¦‚ä¸‹</h6><p>kubectl get node â€“watch</p>
<h6 id="é‡å¯kubeletçš„æœåŠ¡"><a href="#é‡å¯kubeletçš„æœåŠ¡" class="headerlink" title="é‡å¯kubeletçš„æœåŠ¡"></a>é‡å¯kubeletçš„æœåŠ¡</h6><p>systemctl restart kubelet</p>
<h6 id="æŸ¥çœ‹ç«¯å£çš„è¿æ¥æƒ…å†µ"><a href="#æŸ¥çœ‹ç«¯å£çš„è¿æ¥æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹ç«¯å£çš„è¿æ¥æƒ…å†µ"></a>æŸ¥çœ‹ç«¯å£çš„è¿æ¥æƒ…å†µ</h6><p>netstat -nap|grep 6443<br>The connection to the server apiserver.cluster.local:6443 was refused - did you specify the right host or port?</p>
<h6 id="ä½¿ç”¨çš„æ˜¯sealonsé‡æ–°æ·»åŠ è¯¥é›†ç¾¤"><a href="#ä½¿ç”¨çš„æ˜¯sealonsé‡æ–°æ·»åŠ è¯¥é›†ç¾¤" class="headerlink" title="ä½¿ç”¨çš„æ˜¯sealonsé‡æ–°æ·»åŠ è¯¥é›†ç¾¤"></a>ä½¿ç”¨çš„æ˜¯sealonsé‡æ–°æ·»åŠ è¯¥é›†ç¾¤</h6><p>å»ºè®®å¯ä»¥ä½¿ç”¨ sealos  delete åˆ é™¤æ‰çº¿çš„èŠ‚ç‚¹</p>
<p>ç„¶åå†ä½¿ç”¨ sealos  join å‘½ä»¤èƒ½æŠŠèŠ‚ç‚¹é‡æ–°åŠ å…¥åˆ°é›†ç¾¤ä¸­</p>
<h5 id="3-5-2-å®¹å™¨è¿è¡Œæ—¶æŠ¥é”™Network-plugin-returns-error"><a href="#3-5-2-å®¹å™¨è¿è¡Œæ—¶æŠ¥é”™Network-plugin-returns-error" class="headerlink" title="3.5.2 å®¹å™¨è¿è¡Œæ—¶æŠ¥é”™Network plugin returns error"></a>3.5.2 å®¹å™¨è¿è¡Œæ—¶æŠ¥é”™Network plugin returns error</h5><p>æ—¥å¿—å¦‚ä¸‹</p>
<p>cat  /var/log/pods/kube-system_kube-apiserver-master2_d653fc9e62a54eaa54def1ae5c0dde56/kube-apiserver</p>
<blockquote>
<p>container runtime network not ready: NetworkReady=false reason:NetworkPluginNotReady message:Network plugin returns error: cni plugin not initialized</p>
</blockquote>
<p>é¦–å…ˆæŸ¥çœ‹kube-systemä¸­NetworkPluginæ˜¯å¦å­˜åœ¨</p>
<blockquote>
<p> kubectl get pod -n kube-system</p>
</blockquote>
<p>k8sä¸­å­˜åœ¨ç½‘ç»œæ’ä»¶ä¸€èˆ¬åŒ…æ‹¬**<em>Choose network plugin (cilium, calico, contiv, weave or flannel)**</em>ï¼Œæˆ‘çœ‹ç€åˆå§‹åŒ–çš„æ˜¯calico</p>
<p>åŒæ—¶æŸ¥çœ‹å¯¹åº”calicoçš„æ—¥å¿—</p>
<blockquote>
<p> kubectl logs  calico-node-rkqkq â€“namespace=kube-system</p>
</blockquote>
<p>kubectl get pods -o wide -A</p>
<p>æŸ¥çœ‹å¯¹åº”çš„é…ç½®ä¿¡æ¯</p>
<blockquote>
<p>kubectl describe pod calico-node-rkqkq â€“namespace=kube-system</p>
</blockquote>
<p>é…ç½®æ–‡ä»¶å­˜æ”¾åœ°å€ /root/kube/conf/calico.yaml</p>
<p>ä¸‹é¢æ¨èçš„è§£å†³æ–¹æ¡ˆï¼š</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/cuicj/articles/14512540.html">k8s joiné›†ç¾¤æ—¶æŠ¥é”™Container runtime network not ready: NetworkReady=false reason:NetworkPluginNotReady message:docker: - ä¸›ä¸›ä¸›ä¸› - åšå®¢å›­</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/57504063/calico-kubernetes-pods-cant-ping-each-other-use-cluster-ip">kubeadm - Calico: Kubernetes pods canâ€™t ping each other use Cluster IP - Stack Overflow</a><br>kubectl delete-f /etc/kubernetes/addons/calico.yaml</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/tankruning/article/details/107102725">kubenateså¯åŠ¨calico-nodeæ—¶ï¼Œæœ‰èŠ‚ç‚¹æ€»æ˜¯æŠ¥é”™CrashLoopBackOff_dkgee-CSDNåšå®¢</a></p>
<h2 id="å››ã€éƒ¨ç½²minioå’Œåˆ›å»ºvolumeclass"><a href="#å››ã€éƒ¨ç½²minioå’Œåˆ›å»ºvolumeclass" class="headerlink" title="å››ã€éƒ¨ç½²minioå’Œåˆ›å»ºvolumeclass"></a>å››ã€éƒ¨ç½²minioå’Œåˆ›å»ºvolumeclass</h2><p>æ ¹æ®å®˜æ–¹æ–‡æ¡£å¯ä»¥æ‰¾åˆ°</p>
<p><a target="_blank" rel="noopener" href="https://docs.min.io/minio/k8s/deployment/deploy-minio-operator.html#procedure">Deploy MinIO Operator on Kubernetes â€” MinIO Hybrid Cloud Documentation</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/minio/operator/blob/master/README.md">operator/README.md at master Â· minio/operator</a></p>
<p>éœ€è¦ <a target="_blank" rel="noopener" href="https://krew.sigs.k8s.io/docs/user-guide/setup/install/">Installing Â· Krew</a>æˆ–è€…<a target="_blank" rel="noopener" href="https://helm.sh/">minio/helm/minio at master )</a>åŒ…ç®¡ç†è½¯ä»¶</p>
<h3 id="4-1ä½¿ç”¨krewåˆå§‹åŒ–minio"><a href="#4-1ä½¿ç”¨krewåˆå§‹åŒ–minio" class="headerlink" title="4.1ä½¿ç”¨krewåˆå§‹åŒ–minio"></a>4.1ä½¿ç”¨krewåˆå§‹åŒ–minio</h3><p>æˆ‘é€‰æ‹©krewåŒ…ç®¡ç†ï¼Œéœ€è¦ä½¿ç”¨åˆ°gitå‘½ä»¤</p>
<p>ç„¶åè¿è¡Œä¸‹é¢è¿™æ®µå†…å®¹</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(</span><br><span class="line">  <span class="built_in">set</span> -x; <span class="built_in">cd</span> <span class="string">&quot;<span class="subst">$(mktemp -d)</span>&quot;</span> &amp;&amp;</span><br><span class="line">  OS=<span class="string">&quot;<span class="subst">$(uname | tr &#x27;[:upper:]&#x27; &#x27;[:lower:]&#x27;)</span>&quot;</span> &amp;&amp;</span><br><span class="line">  ARCH=<span class="string">&quot;<span class="subst">$(uname -m | sed -e &#x27;s/x86_64/amd64/&#x27; -e &#x27;s/\(arm\)\(64\)\?.*/\1\2/&#x27; -e &#x27;s/aarch64$/arm64/&#x27;)</span>&quot;</span> &amp;&amp;</span><br><span class="line">  KREW=<span class="string">&quot;krew-<span class="variable">$&#123;OS&#125;</span>_<span class="variable">$&#123;ARCH&#125;</span>&quot;</span> &amp;&amp;</span><br><span class="line">  curl -fsSLO <span class="string">&quot;https://github.com/kubernetes-sigs/krew/releases/latest/download/<span class="variable">$&#123;KREW&#125;</span>.tar.gz&quot;</span> &amp;&amp;</span><br><span class="line">  tar zxvf <span class="string">&quot;<span class="variable">$&#123;KREW&#125;</span>.tar.gz&quot;</span> &amp;&amp;</span><br><span class="line">  ./<span class="string">&quot;<span class="variable">$&#123;KREW&#125;</span>&quot;</span> install krew</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œè¿‡ç¨‹ä¸­å‡ºäº†é—®é¢˜ å˜é‡${KREW}=krew-linux_amd64</p>
<p>æˆ‘æ˜¯ä¸‹è½½ <a target="_blank" rel="noopener" href="https://github.com/kubernetes-sigs/krew/releases/latest/download/krew-linux_amd64.tar.gz%E3%80%81">https://github.com/kubernetes-sigs/krew/releases/latest/download/krew-linux_amd64.tar.gzã€</a></p>
<p>export PATH=â€$HOME/.krew}/bin:$PATHâ€</p>
<p>ç›®å‰ä½¿ç”¨kuboard webç•Œé¢ç®¡ç†k8sé›†ç¾¤</p>
<p><a target="_blank" rel="noopener" href="https://www.kuboard.cn/learning/k8s-intermediate/persistent/storage-class.html">å­˜å‚¨ç±»StorageClass | Kuboard</a>ä½†æ˜¯ç›®å‰åªæ”¯æŒç•Œé¢é…ç½® cephfsï¼Œnfs</p>
<p><a target="_blank" rel="noopener" href="https://kubernetes.io/docs/concepts/storage/storage-classes/">Storage Classes | Kubernetes</a> å®˜æ–¹æ”¯æŒçš„volumeclassä¹Ÿæ²¡æœ‰minioéœ€è¦æ‰‹å†™ ymlçš„é…ç½®æ–‡ä»¶</p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/container/" rel="tag">container</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/k8s/" rel="tag">k8s</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/" rel="tag">linux</a></li></ul>
    </div>
 -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-distributed-file-storage" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/1128ed08.html" class="article-date">
      <time datetime="2022-01-19T08:30:54.000Z" itemprop="datePublished">2022-01-19</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/1128ed08.html">åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><h1 id="æ–‡ä»¶å­˜å‚¨é€‰å‹"><a href="#æ–‡ä»¶å­˜å‚¨é€‰å‹" class="headerlink" title="æ–‡ä»¶å­˜å‚¨é€‰å‹"></a>æ–‡ä»¶å­˜å‚¨é€‰å‹</h1><h2 id="ä¸“ä¸šåç§°"><a href="#ä¸“ä¸šåç§°" class="headerlink" title="ä¸“ä¸šåç§°"></a>ä¸“ä¸šåç§°</h2><p><a target="_blank" rel="noopener" href="http://blog.zollty.com/b/archive/relations-among-object-file-and-block-storage.html">å¯¹è±¡å­˜å‚¨ã€æ–‡ä»¶å­˜å‚¨ã€å—å­˜å‚¨çš„åŒºåˆ«å’Œè”ç³» | Zolltyâ€™s Blog</a></p>
<p><a target="_blank" rel="noopener" href="https://note.dolyw.com/fs/00-FS-Select.html">æ–‡ä»¶ç³»ç»Ÿäº†è§£åŠå¯¹æ¯”é€‰å‹ | ç¬”è®°</a></p>
<p>ç›®å‰ä¸»è¦å­˜å‚¨çš„ç§ç±»å¯¹è±¡å­˜å‚¨ï¼Œæ–‡ä»¶å­˜å‚¨ï¼Œå—å­˜å‚¨ã€‚éœ€è¦ä½¿ç”¨</p>
<p>
                              
                          
                    
              <!-- 
              
              <h1 id="æ–‡ä»¶å­˜å‚¨é€‰å‹"><a href="#æ–‡ä»¶å­˜å‚¨é€‰å‹" class="headerlink" title="æ–‡ä»¶å­˜å‚¨é€‰å‹"></a>æ–‡ä»¶å­˜å‚¨é€‰å‹</h1><h2 id="ä¸“ä¸šåç§°"><a href="#ä¸“ä¸šåç§°" class="headerlink" title="ä¸“ä¸šåç§°"></a>ä¸“ä¸šåç§°</h2><p><a target="_blank" rel="noopener" href="http://blog.zollty.com/b/archive/relations-among-object-file-and-block-storage.html">å¯¹è±¡å­˜å‚¨ã€æ–‡ä»¶å­˜å‚¨ã€å—å­˜å‚¨çš„åŒºåˆ«å’Œè”ç³» | Zolltyâ€™s Blog</a></p>
<p><a target="_blank" rel="noopener" href="https://note.dolyw.com/fs/00-FS-Select.html">æ–‡ä»¶ç³»ç»Ÿäº†è§£åŠå¯¹æ¯”é€‰å‹ | ç¬”è®°</a></p>
<p>ç›®å‰ä¸»è¦å­˜å‚¨çš„ç§ç±»å¯¹è±¡å­˜å‚¨ï¼Œæ–‡ä»¶å­˜å‚¨ï¼Œå—å­˜å‚¨ã€‚éœ€è¦ä½¿ç”¨</p>
<p><strong>å¯¹è±¡å­˜å‚¨</strong>ï¼šæ˜¯ç›®å‰æµè¡Œçš„å­˜å‚¨æœåŠ¡ä¹Ÿæ˜¯äº‘æœåŠ¡å‚å•†æä¾›çš„ç±»ä¼¼äºAmazon çš„ s3(<em>Simple Storage Service</em> ) å’Œé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨OSSï¼ˆObject Storage Serviceï¼‰</p>
<p><strong>æ–‡ä»¶å­˜å‚¨</strong>ï¼šç‹­ä¹‰ç†è§£ Linux å®ç°POSIXæ¥å£ï¼Œèƒ½æŒ‚è½½åœ¨Linuxä¸Šï¼ŒFTPã€NFSæœåŠ¡å™¨SAMBA </p>
<p><strong>å—å­˜å‚¨</strong>ï¼š ç£ç›˜é˜µåˆ—ï¼Œç¡¬ç›˜ ï¼Œå¯èƒ½ä¼šä½¿ç”¨RAID NASè¿™ç§æ¥å®ç°æ•°æ®çš„å†—ä½™å¤‡ä»½</p>
<table>
<thead>
<tr>
<th>å­˜å‚¨ç±»å‹</th>
<th>ä»‹ç»</th>
</tr>
</thead>
<tbody><tr>
<td>å¯¹è±¡å­˜å‚¨</td>
<td>ç±»ä¼¼äºs3,ä¸»è¦æ˜¯å­˜å‚¨é™æ€çš„æ•°æ®,ä¸å—æ‰©å±•ä¸å—å…ƒæ•°æ®çº¦æŸé™åˆ¶çš„å—è®¾å¤‡</td>
</tr>
<tr>
<td>æ–‡ä»¶å­˜å‚¨</td>
<td>é€šå¸¸æ˜¯å®ç°äº†POSIXæ¥å£,èƒ½æŒ‚è½½libradosï¼Œlibcephfs</td>
</tr>
<tr>
<td>å—å­˜å‚¨</td>
<td>ç£ç›˜é˜µåˆ—ï¼Œç¡¬ç›˜</td>
</tr>
</tbody></table>
<p>é€šå¸¸æƒ…å†µä¸‹äº‘æœåŠ¡å‚å•†ä¼šæœ‰æ•°æ®å®¹ç¾ï¼ˆ åŒåŸäººå‘˜å­˜å‚¨ï¼Œè·¨åŒºåŸŸå¤åˆ¶ï¼Œåˆè§„ä¿ç•™ç­–ç•¥ï¼Œç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½ï¼‰ï¼Œæ•°æ®åŠ å¯†ï¼Œæƒé™å’Œè®¿é—®ï¼ˆç”¨æˆ·çº§åˆ«èµ„æºéš”ç¦»ï¼Œé˜²ç›—é“¾ï¼Œè®¿é—®æ§åˆ¶ACLï¼‰</p>
<p>åˆ†å¸ƒå¼ â€“&gt;å®¹é”™å†—ä½™å¤‡ä»½ â€“&gt;æ–¹ä¾¿æ‹“å±• â€“&gt;ç¨³å®šæ€§-&gt;é€Ÿåº¦ï¼ˆç£ç›˜ioï¼Œç½‘ç»œioï¼Œè½¯ä»¶ä¼˜åŒ–ï¼ŒæœåŠ¡å™¨CPUç­‰ç¡¬ä»¶ï¼‰</p>
<ol>
<li><p>æ˜¯å¦è¦å…¼å®¹ç›®å‰k8sç¯å¢ƒ</p>
</li>
<li><p> æä¾›restfulæ¥å£</p>
</li>
<li><p>ç›®å‰æ–‡ä»¶ä¸»è¦ä¸ºé›¶æ•£æ–‡ä»¶å’Œæ‰“åŒ…åçš„å¤§æ–‡ä»¶</p>
</li>
<li><p>ç¨³å®šæ€§å’Œè°ƒè¯•æ˜¯å¦æ–¹ä¾¿</p>
</li>
</ol>
<h2 id="æŠ€æœ¯é€‰å‹"><a href="#æŠ€æœ¯é€‰å‹" class="headerlink" title="æŠ€æœ¯é€‰å‹"></a>æŠ€æœ¯é€‰å‹</h2><table>
<thead>
<tr>
<th>ç³»ç»Ÿ</th>
<th>æ–‡ä»¶å…ƒæ•°æ®</th>
<th>æ–‡ä»¶å†…å®¹è¯»å–</th>
<th>POSIX</th>
<th>REST API</th>
<th>é’ˆå¯¹å¤§é‡å°æ–‡ä»¶è¿›è¡Œäº†ä¼˜åŒ–</th>
</tr>
</thead>
<tbody><tr>
<td>SeaweedFS</td>
<td>æŸ¥æ‰¾å· IDï¼Œå¯ç¼“å­˜</td>
<td>O(1) ç£ç›˜å¯»é“</td>
<td></td>
<td>æ˜¯çš„</td>
<td>æ˜¯çš„</td>
</tr>
<tr>
<td>SeaweedFS Filer</td>
<td>çº¿æ€§å¯æ‰©å±•ï¼Œå¯å®šåˆ¶</td>
<td>O(1) ç£ç›˜å¯»é“</td>
<td>FUSE</td>
<td>æ˜¯çš„</td>
<td>æ˜¯çš„</td>
</tr>
<tr>
<td>GlusterFS</td>
<td>æ•£åˆ—</td>
<td></td>
<td>FUSEï¼ŒNFS</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Ceph</td>
<td>å“ˆå¸Œ+è§„åˆ™</td>
<td></td>
<td>FUSE</td>
<td>æ˜¯çš„</td>
<td></td>
</tr>
<tr>
<td>MooseFS</td>
<td>åœ¨è®°å¿†ä¸­</td>
<td></td>
<td>FUSE</td>
<td></td>
<td>ä¸</td>
</tr>
<tr>
<td>MinIO</td>
<td>æ¯ä¸ªæ–‡ä»¶çš„å•ç‹¬å…ƒæ–‡ä»¶</td>
<td></td>
<td></td>
<td>æ˜¯çš„</td>
<td>ä¸</td>
</tr>
</tbody></table>
<p>minio: <a target="_blank" rel="noopener" href="https://pureage.info/post/scalability-of-minio/">æ€æ¡Œå­çš„ MinIO - çº¯çœŸå¹´ä»£</a></p>
<p><img src="../img/architecture_diagram.svg" alt="architecture_diagram"></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-docker-container-small-ubuntu-install-jdk" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/dda6ae1a.html" class="article-date">
      <time datetime="2022-01-17T01:20:12.000Z" itemprop="datePublished">2022-01-17</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/dda6ae1a.html">dockerå®¹å™¨ç®€åŒ–è¿è¡Œjdké•œåƒ</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><h2 id="å®¹å™¨æ“ä½œ"><a href="#å®¹å™¨æ“ä½œ" class="headerlink" title="å®¹å™¨æ“ä½œ"></a>å®¹å™¨æ“ä½œ</h2><p>å…¬å¸çº¿ä¸Šè¿è¡Œçš„å®¹å™¨æ˜¯jre,æ²¡æœ‰è°ƒè¯•å’Œdebugçš„å·¥å…·,åŒæ—¶ä½¿ç”¨èµ·æ¥å¾ˆä¸æ–¹ä¾¿</p>
<h3 id="æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬"><a href="#æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬"></a>æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬</h3><p>è¿è¡Œ <strong>cat /etc/issue</strong> çœ‹åˆ°æ˜¯debian 7çš„ç³»ç»Ÿå</p>
<p>åœ¨/usr/lib/jvm ç›®å½•å…ˆçœ‹åˆ°çš„openjdk11</p>
<p>
                              
                          
                    
              <!-- 
              
              <h2 id="å®¹å™¨æ“ä½œ"><a href="#å®¹å™¨æ“ä½œ" class="headerlink" title="å®¹å™¨æ“ä½œ"></a>å®¹å™¨æ“ä½œ</h2><p>å…¬å¸çº¿ä¸Šè¿è¡Œçš„å®¹å™¨æ˜¯jre,æ²¡æœ‰è°ƒè¯•å’Œdebugçš„å·¥å…·,åŒæ—¶ä½¿ç”¨èµ·æ¥å¾ˆä¸æ–¹ä¾¿</p>
<h3 id="æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬"><a href="#æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬"></a>æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬</h3><p>è¿è¡Œ <strong>cat /etc/issue</strong> çœ‹åˆ°æ˜¯debian 7çš„ç³»ç»Ÿå</p>
<p>åœ¨/usr/lib/jvm ç›®å½•å…ˆçœ‹åˆ°çš„openjdk11</p>
<p>å‚è€ƒè¯¥é“¾æ¥çš„å†…å®¹<a target="_blank" rel="noopener" href="https://techoral.com/blog/java/install-openjdk-11-debian.html">How To Install OpenJDK Java 11 On Debian Real Quick</a> </p>
<blockquote>
<p>The openjdk-11-jre package contains just the Java Runtime Environment. If you want to develop Java programs then please install the openjdk-11-jdk package.<br>To Install OpenJDK 11 Debian Java Development Kit (JDK) - Enter the below command on Debian command line.</p>
</blockquote>
<p>éœ€è¦è¿˜å®‰è£…jdk</p>
<h3 id="åœ¨çº¿å®‰è£…openjdk11"><a href="#åœ¨çº¿å®‰è£…openjdk11" class="headerlink" title="åœ¨çº¿å®‰è£…openjdk11"></a>åœ¨çº¿å®‰è£…openjdk11</h3><p>å°† /etc/apt/source.list å¤‡ä»½åä¿®æ”¹ä¸ºdebian 7 é˜¿é‡Œçš„æº</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrors.aliyun.com/debian/ stretch main non-free contrib</span><br><span class="line">deb-src http://mirrors.aliyun.com/debian/ stretch main non-free contrib</span><br><span class="line">deb http://mirrors.aliyun.com/debian-security stretch/updates main</span><br><span class="line">deb-src http://mirrors.aliyun.com/debian-security stretch/updates main</span><br><span class="line">deb http://mirrors.aliyun.com/debian/ stretch-updates main non-free contrib</span><br><span class="line">deb-src http://mirrors.aliyun.com/debian/ stretch-updates main non-free contrib</span><br><span class="line"><span class="comment">#deb http://mirrors.aliyun.com/debian/ stretch-backports main non-free contrib</span></span><br><span class="line"><span class="comment">#deb-src http://mirrors.aliyun.com/debian/ stretch-backports main non-free contrib</span></span><br></pre></td></tr></table></figure>

<p>è¿è¡Œ <strong>apt install openjdk-11-jdk</strong> ä¸€ç›´å¡åœ¨å®‰è£…  openjdk-11-jre-headless_11.0.13+8-1 èµ·åˆå› ä¸ºæ˜¯æºçš„é—®é¢˜,åˆ‡æ¢åè¿˜æ˜¯å¾ˆæ…¢,åé¢è€ƒè™‘åº”è¯¥è¿æ¥çš„æ˜¯å®˜æ–¹çš„åœ°å€,äºæ˜¯å°è¯•ä»ç½‘ç«™ä¸‹è½½å¯¹åº”çš„openjdk-11-jre-headless_11.0.13+8-1_amd64.deb åŒ…ä½¿ç”¨ <strong>dpkg -i</strong>å®‰è£… .</p>
<p>åé¢æ‰çŸ¥é“</p>
<h3 id="ç¦»çº¿å®‰è£…"><a href="#ç¦»çº¿å®‰è£…" class="headerlink" title="ç¦»çº¿å®‰è£…"></a>ç¦»çº¿å®‰è£…</h3><p>ä½¿ç”¨dpkg -i  *.deb çš„æ—¶å€™å‡ºç°ä¾èµ–æ²¡æœ‰å®‰è£…</p>
<p>ä½¿ç”¨apt-get -f -y install è§£å†³ä¾èµ–é—®é¢˜åå†æ‰§è¡Œdpkgå®‰è£…debåŒ…</p>
<p>jdk-11.0.2_linux-x64_bin.deb å¤§æ¦‚150mbå·¦å³</p>
<h2 id="å°è£…ä¸ºè„šæœ¬"><a href="#å°è£…ä¸ºè„šæœ¬" class="headerlink" title="å°è£…ä¸ºè„šæœ¬"></a>å°è£…ä¸ºè„šæœ¬</h2><p><a target="_blank" rel="noopener" href="https://code.aliyun.com/whotolike/deploycode/raw/master/init_debian_container.sh">https://code.aliyun.com/whotolike/deploycode/raw/master/init_debian_container.sh</a></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/container/" rel="tag">container</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jdk/" rel="tag">jdk</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a></li></ul>
    </div>
 -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-pack-linux-binary" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2aff3a72.html" class="article-date">
      <time datetime="2022-01-07T05:29:02.000Z" itemprop="datePublished">2022-01-07</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2aff3a72.html">æ‰“åŒ…linuxçš„binäºŒè¿›åˆ¶åŒ…</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>äºŒè¿›åˆ¶çš„æ–‡ä»¶éœ€è¦å°†å‹ç¼©åŒ…çš„æ•°æ®å’Œshellè„šæœ¬æ‰“åŒ…çš„ä¸ºä¸€ä¸ªæ•´ä½“</p>
<p>ä¸ºé¿å…å¤šä¸ªshæ–‡ä»¶ä½¿ç”¨ <strong>cat &lt;&lt; EOF</strong>  æ¥ç”Ÿæˆä¸Šé¢çš„shæ–‡ä»¶,è¿™æ ·åªéœ€è¦ä¸‹é¢è¿™ä¸ªshæ–‡ä»¶å°±å¯ä»¥å°†æŒ‡å®šçš„æ–‡ä»¶å¤¹å‹ç¼©,åŒæ—¶æ·»åŠ  æ‰§è¡Œå‘½ä»¤é‚£éƒ¨åˆ†å†…å®¹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;å‹ç¼©æ–‡ä»¶ã€‚ã€‚ã€‚&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INSTALL_DIR=$(<span class="built_in">cd</span> `dirname <span class="variable">$0</span>`; <span class="built_in">pwd</span>)</span><br><span class="line"></span><br><span class="line">tar -zcvf  <span class="variable">$INSTALL_DIR</span>/XXXX.tar.gz  <span class="variable">$INSTALL_DIR</span>/install/*</span><br><span class="line">cat &lt;&lt; <span class="string">EOF &gt;&gt;$INSTALL_DIR/install.sh</span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string">#Test shell self-extracting</span></span><br><span class="line"><span class="string">TmpDir=/tmp/XXX</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">TARGET_DIR=./XXX</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if [ ! -d \$&#123;TmpDir&#125; ]; then</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    mkdir \$TmpDir</span></span><br><span class="line"><span class="string">    echo \$TmpDir  è·¯å¾„ä¸‹ä¸å­˜åœ¨,æ­£åœ¨åˆ›å»º</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    echo \$TmpDir æ–‡ä»¶å°†ä¼šè¢«è¦†ç›–</span></span><br><span class="line"><span class="string">    rm -rf  \$TmpDir/*</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ARCHIVE=\$(awk &#x27;/^__ARCHIVE_BELOW__/ &#123;print NR + 1; exit 0; &#125;&#x27; &quot;\$0&quot;)</span></span><br><span class="line"><span class="string">tail -n+\$ARCHIVE &quot;\$0&quot; | tar -xzvm -C \$TmpDir &gt; /dev/null 2&gt;&amp;1 3&gt;&amp;1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if [ ! -d \$&#123;TARGET_DIR&#125; ]; then</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       echo \$TARGET_DIR è·¯å¾„ä¸‹ä¸å­˜åœ¨ç°åœ¨åˆ›å»º</span></span><br><span class="line"><span class="string">       mkdir \$&#123;TARGET_DIR&#125;</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">       echo \$TARGET_DIR è·¯å¾„ä¸‹çš„æ–‡ä»¶å°†ä¼šè¢«è¦†ç›–</span></span><br><span class="line"><span class="string">       rm -rf  \$&#123;TARGET_DIR&#125;/*</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string">cp -R \$TmpDir/*  \$&#123;TARGET_DIR&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">echo &#x27;-------------------------------------------------------------------------------------------------&#x27;</span></span><br><span class="line"><span class="string">echo &#x27;********************************å‡†å¤‡åˆå§‹åŒ– æœåŠ¡****************************************&#x27;</span></span><br><span class="line"><span class="string">echo &#x27;-------------------------------------------------------------------------------------------------&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/bin/sh  \$TARGET_DIR/install.sh</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">exit 0</span></span><br><span class="line"><span class="string">#This line must be the last line of the file</span></span><br><span class="line"><span class="string">__ARCHIVE_BELOW__</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cat <span class="variable">$INSTALL_DIR</span>/install.sh <span class="variable">$INSTALL_DIR</span>/XXX.tar.gz &gt;  <span class="variable">$INSTALL_DIR</span>/XXX_install.run</span><br><span class="line">rm -f XXX.tar.gz</span><br><span class="line">rm -f install.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>
                              
                          
                    
              <!-- 
              
              <p>äºŒè¿›åˆ¶çš„æ–‡ä»¶éœ€è¦å°†å‹ç¼©åŒ…çš„æ•°æ®å’Œshellè„šæœ¬æ‰“åŒ…çš„ä¸ºä¸€ä¸ªæ•´ä½“</p>
<p>ä¸ºé¿å…å¤šä¸ªshæ–‡ä»¶ä½¿ç”¨ <strong>cat &lt;&lt; EOF</strong>  æ¥ç”Ÿæˆä¸Šé¢çš„shæ–‡ä»¶,è¿™æ ·åªéœ€è¦ä¸‹é¢è¿™ä¸ªshæ–‡ä»¶å°±å¯ä»¥å°†æŒ‡å®šçš„æ–‡ä»¶å¤¹å‹ç¼©,åŒæ—¶æ·»åŠ  æ‰§è¡Œå‘½ä»¤é‚£éƒ¨åˆ†å†…å®¹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;å‹ç¼©æ–‡ä»¶ã€‚ã€‚ã€‚&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INSTALL_DIR=$(<span class="built_in">cd</span> `dirname <span class="variable">$0</span>`; <span class="built_in">pwd</span>)</span><br><span class="line"></span><br><span class="line">tar -zcvf  <span class="variable">$INSTALL_DIR</span>/XXXX.tar.gz  <span class="variable">$INSTALL_DIR</span>/install/*</span><br><span class="line">cat &lt;&lt; <span class="string">EOF &gt;&gt;$INSTALL_DIR/install.sh</span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string">#Test shell self-extracting</span></span><br><span class="line"><span class="string">TmpDir=/tmp/XXX</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">TARGET_DIR=./XXX</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if [ ! -d \$&#123;TmpDir&#125; ]; then</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    mkdir \$TmpDir</span></span><br><span class="line"><span class="string">    echo \$TmpDir  è·¯å¾„ä¸‹ä¸å­˜åœ¨,æ­£åœ¨åˆ›å»º</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    echo \$TmpDir æ–‡ä»¶å°†ä¼šè¢«è¦†ç›–</span></span><br><span class="line"><span class="string">    rm -rf  \$TmpDir/*</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ARCHIVE=\$(awk &#x27;/^__ARCHIVE_BELOW__/ &#123;print NR + 1; exit 0; &#125;&#x27; &quot;\$0&quot;)</span></span><br><span class="line"><span class="string">tail -n+\$ARCHIVE &quot;\$0&quot; | tar -xzvm -C \$TmpDir &gt; /dev/null 2&gt;&amp;1 3&gt;&amp;1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if [ ! -d \$&#123;TARGET_DIR&#125; ]; then</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       echo \$TARGET_DIR è·¯å¾„ä¸‹ä¸å­˜åœ¨ç°åœ¨åˆ›å»º</span></span><br><span class="line"><span class="string">       mkdir \$&#123;TARGET_DIR&#125;</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">       echo \$TARGET_DIR è·¯å¾„ä¸‹çš„æ–‡ä»¶å°†ä¼šè¢«è¦†ç›–</span></span><br><span class="line"><span class="string">       rm -rf  \$&#123;TARGET_DIR&#125;/*</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string">cp -R \$TmpDir/*  \$&#123;TARGET_DIR&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">echo &#x27;-------------------------------------------------------------------------------------------------&#x27;</span></span><br><span class="line"><span class="string">echo &#x27;********************************å‡†å¤‡åˆå§‹åŒ– æœåŠ¡****************************************&#x27;</span></span><br><span class="line"><span class="string">echo &#x27;-------------------------------------------------------------------------------------------------&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/bin/sh  \$TARGET_DIR/install.sh</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">exit 0</span></span><br><span class="line"><span class="string">#This line must be the last line of the file</span></span><br><span class="line"><span class="string">__ARCHIVE_BELOW__</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cat <span class="variable">$INSTALL_DIR</span>/install.sh <span class="variable">$INSTALL_DIR</span>/XXX.tar.gz &gt;  <span class="variable">$INSTALL_DIR</span>/XXX_install.run</span><br><span class="line">rm -f XXX.tar.gz</span><br><span class="line">rm -f install.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure>


               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/binary/" rel="tag">binary</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/" rel="tag">linux</a></li></ul>
    </div>
 -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-nginx-deep-optimize" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/132c3fd6.html" class="article-date">
      <time datetime="2022-01-06T08:10:59.000Z" itemprop="datePublished">2022-01-06</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/132c3fd6.html">nginxçš„æ·±åº¦è°ƒä¼˜</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p> å‚è€ƒæ–‡ç« </p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6895660634466156558#heading-30">Nginxå…¨èƒ½è§£æåŠæ€§èƒ½è°ƒä¼˜ - æ˜é‡‘</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/91454882">Nginxè°ƒä¼˜ - çŸ¥ä¹</a></p>
<p>
                              
                          
                    
              <!-- 
              
              <p> å‚è€ƒæ–‡ç« </p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6895660634466156558#heading-30">Nginxå…¨èƒ½è§£æåŠæ€§èƒ½è°ƒä¼˜ - æ˜é‡‘</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/91454882">Nginxè°ƒä¼˜ - çŸ¥ä¹</a></p>
<p><img src="../img/bd998aa92614417f8b1b9db6302bc738~tplv-k3u1fbpfcp-watermark.awebp" alt="Aleysonçˆ±é€¼é€¼"></p>
<h2 id="è®¾ç½®é™æ€èµ„æºçš„è¿‡æœŸæ—¶é—´"><a href="#è®¾ç½®é™æ€èµ„æºçš„è¿‡æœŸæ—¶é—´" class="headerlink" title="è®¾ç½®é™æ€èµ„æºçš„è¿‡æœŸæ—¶é—´"></a>è®¾ç½®é™æ€èµ„æºçš„è¿‡æœŸæ—¶é—´</h2><p><img src="../img/image-20220106161111684.png" alt="image-20220106161111684"></p>
<h2 id="åå‘ä»£ç†è®¾ç½®ç¼“å­˜"><a href="#åå‘ä»£ç†è®¾ç½®ç¼“å­˜" class="headerlink" title="åå‘ä»£ç†è®¾ç½®ç¼“å­˜"></a>åå‘ä»£ç†è®¾ç½®ç¼“å­˜</h2><blockquote>
<p>proxy_cache_path /data/nginx/cache  levels=1:2 keys_zone=one:200m inactive=60m loader_threshold=300 loader_files=300 max_size=2000m;</p>
</blockquote>
<h2 id="å…³é—­access-log"><a href="#å…³é—­access-log" class="headerlink" title="å…³é—­access_log"></a>å…³é—­access_log</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># svg, fonts</span><br><span class="line">location ~ &#x2F;last&#x2F;\.(?:jpg|png|gif|cmpt|b3dm)$  &#123;</span><br><span class="line">    add_header Access-Control-Allow-Origin &quot;*&quot;;</span><br><span class="line">    expires    7d;</span><br><span class="line">    access_log off;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="è®¾ç½®worker-processes"><a href="#è®¾ç½®worker-processes" class="headerlink" title="è®¾ç½®worker_processes"></a>è®¾ç½®worker_processes</h2><blockquote>
<p>grep processor /proc/cpuinfo | wc â€“l è·å–CPUæ ¸å¿ƒæ•°ä¸º8</p>
</blockquote>
<p>å¯ä»¥è·å–CPUç›¸å…³çš„ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">worker_processes auto;</span><br><span class="line">worker_rlimit_nofile 65535;</span><br><span class="line">#pid logs&#x2F;nginx.pid;</span><br><span class="line">events &#123;</span><br><span class="line">   worker_connections 65535;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šå¸¸éœ€è¦çš„è®¾ç½®çš„worker_processes ä¸ºæ ¸å¿ƒæ•°é™¤ä»¥2çš„næ¬¡æ–¹.æ¨èè®¾ç½®ä¸ºauto</p>
<p>è®¾ç½®gzipå‹ç¼©</p>
<p>è¿™ä¸ªéœ€è¦ç¡®è®¤è¿™ä¸ªè¯·æ±‚æ˜¯æ”¯æŒgzipå‹ç¼©çš„å¯ä»¥å‚è€ƒ</p>
<p><img src="../img/image-20220107162340670.png" alt="image-20220107162340670"></p>
<p><strong>tips</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">gzip on;  #æ˜¯å¦å¼€å¯gzipæ¨¡å— onè¡¨ç¤ºå¼€å¯ offè¡¨ç¤ºå…³é—­</span><br><span class="line">gzip_static on;</span><br><span class="line">gzip_buffers 4 16k;  #è®¾ç½®å‹ç¼©æ‰€éœ€è¦çš„ç¼“å†²åŒºå¤§å°</span><br><span class="line">gzip_comp_level 6;  #å‹ç¼©çº§åˆ«1-9ï¼Œæ•°å­—è¶Šå¤§å‹ç¼©çš„è¶Šå¥½ï¼Œä¹Ÿè¶Šå ç”¨CPUæ—¶é—´</span><br><span class="line">gzip_min_length 1k;  #è®¾ç½®å…è®¸å‹ç¼©çš„æœ€å°å­—èŠ‚</span><br><span class="line">gzip_http_version 1.0;  #è®¾ç½®å‹ç¼©httpåè®®çš„ç‰ˆæœ¬,é»˜è®¤æ˜¯1.1 å¦‚æœnginxå‰é¢è¿˜æœ‰åå‘ä»£ç† è¿™è¦è®¾ç½®ä¸º1.0</span><br><span class="line">gzip_types text&#x2F;plain application&#x2F;x-javascript text&#x2F;css text&#x2F;javascript application&#x2F;x-httpd-php image&#x2F;jpeg image&#x2F;gif image&#x2F;png application&#x2F;octet-stream application&#x2F;javascript;  #è®¾ç½®å‹ç¼©çš„æ–‡ä»¶ç±»å‹</span><br><span class="line">gzip_vary     on;  #åŠ ä¸Šhttpå¤´ä¿¡æ¯Vary: Accept-Encodingç»™åç«¯ä»£ç†æœåŠ¡å™¨è¯†åˆ«æ˜¯å¦å¯ç”¨ gzip å‹ç¼©</span><br></pre></td></tr></table></figure>



<p><img src="../img/image-20220106161202850.png" alt="image-20220106161202850"></p>
<h2 id="Linuxç¯å¢ƒä¸‹è®¾ç½®ioå¤šè·¯å¤ç”¨-epoll-æ¨¡å‹"><a href="#Linuxç¯å¢ƒä¸‹è®¾ç½®ioå¤šè·¯å¤ç”¨-epoll-æ¨¡å‹" class="headerlink" title="Linuxç¯å¢ƒä¸‹è®¾ç½®ioå¤šè·¯å¤ç”¨(epoll)æ¨¡å‹"></a>Linuxç¯å¢ƒä¸‹è®¾ç½®ioå¤šè·¯å¤ç”¨(epoll)æ¨¡å‹</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">worker_processes     auto;</span><br><span class="line">worker_rlimit_nofile 65535;</span><br><span class="line">events &#123;</span><br><span class="line">    use epoll; # è¿™ä¸ªè®¾ç½®æ˜¯é’ˆå¯¹2.6å†…æ ¸  cat &#x2F;proc&#x2F;versionå¯è¯»å–</span><br><span class="line">    multi_accept       on;</span><br><span class="line">    worker_connections 65535;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li></ul>
    </div>
 -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-æ ‘è“æ´¾ä½¿ç”¨cloudreveæ­å»ºnaså’Œç¦»çº¿ä¸‹è½½" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/1661309199.html" class="article-date">
      <time datetime="2022-01-03T17:11:52.000Z" itemprop="datePublished">2022-01-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/1661309199.html">æ ‘è“æ´¾ä½¿ç”¨cloudreveæ­å»ºnaså’Œç¦»çº¿ä¸‹è½½</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>2022-1-20 docker éƒ¨ç½²cloudreve</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># ä¸‹è½½</span><br><span class="line">docker pull xavierniu&#x2F;cloudreve</span><br><span class="line"></span><br><span class="line"># åˆ›å»º</span><br><span class="line">mkdir -p ~&#x2F;cloudreve&#x2F;uploads \</span><br><span class="line">    &amp;&amp; mkdir -p ~&#x2F;cloudreve&#x2F;avatar \</span><br><span class="line">    &amp;&amp; touch ~&#x2F;cloudreve&#x2F;conf.ini \</span><br><span class="line">    &amp;&amp; touch ~&#x2F;cloudreve&#x2F;cloudreve.db</span><br><span class="line"></span><br><span class="line"># å¯åŠ¨</span><br><span class="line">docker run -d \</span><br><span class="line">  --name cloudreve \</span><br><span class="line">  -e PUID&#x3D;$UID \</span><br><span class="line">  -e PGID&#x3D;$GID \</span><br><span class="line">  -e TZ&#x3D;&quot;Asia&#x2F;Shanghai&quot; \</span><br><span class="line">  -p 5212:5212 \</span><br><span class="line">  --restart&#x3D;unless-stopped \</span><br><span class="line">  -v &#x2F;cloudreve&#x2F;uploads:&#x2F;cloudreve&#x2F;uploads \</span><br><span class="line">  -v ~&#x2F;cloudreve&#x2F;conf.ini:&#x2F;cloudreve&#x2F;conf.ini \</span><br><span class="line">  -v ~&#x2F;cloudreve&#x2F;cloudreve.db:&#x2F;cloudreve&#x2F;cloudreve.db \</span><br><span class="line">  -v ~&#x2F;cloudreve&#x2F;avatar:&#x2F;cloudreve&#x2F;avatar \</span><br><span class="line">  xavierniu&#x2F;cloudreve</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"> docker logs -f cloudreve</span><br></pre></td></tr></table></figure>

<p>
                              
                          
                    
              <!-- 
              
              <p>2022-1-20 docker éƒ¨ç½²cloudreve</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># ä¸‹è½½</span><br><span class="line">docker pull xavierniu&#x2F;cloudreve</span><br><span class="line"></span><br><span class="line"># åˆ›å»º</span><br><span class="line">mkdir -p ~&#x2F;cloudreve&#x2F;uploads \</span><br><span class="line">    &amp;&amp; mkdir -p ~&#x2F;cloudreve&#x2F;avatar \</span><br><span class="line">    &amp;&amp; touch ~&#x2F;cloudreve&#x2F;conf.ini \</span><br><span class="line">    &amp;&amp; touch ~&#x2F;cloudreve&#x2F;cloudreve.db</span><br><span class="line"></span><br><span class="line"># å¯åŠ¨</span><br><span class="line">docker run -d \</span><br><span class="line">  --name cloudreve \</span><br><span class="line">  -e PUID&#x3D;$UID \</span><br><span class="line">  -e PGID&#x3D;$GID \</span><br><span class="line">  -e TZ&#x3D;&quot;Asia&#x2F;Shanghai&quot; \</span><br><span class="line">  -p 5212:5212 \</span><br><span class="line">  --restart&#x3D;unless-stopped \</span><br><span class="line">  -v &#x2F;cloudreve&#x2F;uploads:&#x2F;cloudreve&#x2F;uploads \</span><br><span class="line">  -v ~&#x2F;cloudreve&#x2F;conf.ini:&#x2F;cloudreve&#x2F;conf.ini \</span><br><span class="line">  -v ~&#x2F;cloudreve&#x2F;cloudreve.db:&#x2F;cloudreve&#x2F;cloudreve.db \</span><br><span class="line">  -v ~&#x2F;cloudreve&#x2F;avatar:&#x2F;cloudreve&#x2F;avatar \</span><br><span class="line">  xavierniu&#x2F;cloudreve</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"> docker logs -f cloudreve</span><br></pre></td></tr></table></figure>







<p><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/17682984?shareKey=MzYxMmY3MTc4YzNjNWU4N2RkYmU~&shareUid=902662&shareFrom=com.coolapk.market_9.0.2"><strong>æ ‘è“æ´¾æ­å»ºæ»¡é€Ÿå®¶åº­äº‘ç½‘ç›˜ï¼ˆLv.1ï¼‰</strong></a></p>
<p><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/17772116?shareKey=OTA2MTE2NGIxNDhiNWU4N2U2ZjQ~&shareUid=902662&shareFrom=com.coolapk.market_9.0.2">å¹²è´§Get!]Androidæ­å»ºCloudreveç§äººäº‘ç›˜</a></p>
<p><a href="../img/1586074575520.png"><img src="../img/1586074575520.png" alt="1586074575520"></a></p>
<h3 id="å…è®¸SHHä½¿ç”¨rootç™»é™†"><a href="#å…è®¸SHHä½¿ç”¨rootç™»é™†" class="headerlink" title="å…è®¸SHHä½¿ç”¨rootç™»é™†"></a>å…è®¸SHHä½¿ç”¨rootç™»é™†</h3><p>sudo passwd æ¥é‡ç½®rootç”¨æˆ·çš„å¯†ç </p>
<p> <strong>vim /etc/ssh/sshd_config</strong></p>
<p>æ³¨é‡Šæ‰ PermitRootLogin without-password</p>
<p>ä½¿ç”¨ PermitRootLogin yes</p>
<h3 id="è¿æ¥æ ‘è“æ´¾å°†æ–‡ä»¶ä¼ è¿‡å»"><a href="#è¿æ¥æ ‘è“æ´¾å°†æ–‡ä»¶ä¼ è¿‡å»" class="headerlink" title="è¿æ¥æ ‘è“æ´¾å°†æ–‡ä»¶ä¼ è¿‡å»"></a>è¿æ¥æ ‘è“æ´¾å°†æ–‡ä»¶ä¼ è¿‡å»</h3><p>ç°åœ¨ä¸‹è½½ <a target="_blank" rel="noopener" href="https://github.com/cloudreve/Cloudreve/releases">https://github.com/cloudreve/Cloudreve/releases</a> é€‰æ‹©<a target="_blank" rel="noopener" href="https://github.com/cloudreve/Cloudreve/releases/download/3.0.0-rc1/cloudreve_3.0.0-rc1_linux_arm.tar.gz">cloudreve_3.0.0-rc1_linux_arm.tar.gz</a></p>
<p><a href="../img/1586075347405.png"><img src="../img/1586075347405.png" alt="1586075347405"></a></p>
<p>sudo mkdir /home/cloud</p>
<p>ä½¿ç”¨ftpçš„å®¢æˆ·ç«¯è¿æ¥æ³¨æ„ä½¿ç”¨ root</p>
<p>å°†ä¸‹è½½cloudreve_3.0.0-rc1_linux_arm.tar.gz æ”¾åˆ° /home/cloudä¸‹</p>
<p>sudo tar -xzvf cloudreve_3.0.0-rc1_linux_arm.tar.gz è§£å‹åä¹Ÿæ˜¯ä¸ªå•æ–‡ä»¶cloudreve</p>
<p>sudo ./cloudreve</p>
<p>åé¢ç»ˆç«¯ä¼šæ‰“å°å‡ºæ¥ç”¨æˆ·<a href="mailto:admin@cloudreve.org">admin@cloudreve.org</a> å’Œå¯†ç </p>
<h3 id="åˆå§‹åŒ–cloudreve-3-0-0-rc1-linux-armå’Œè®¾ç½®"><a href="#åˆå§‹åŒ–cloudreve-3-0-0-rc1-linux-armå’Œè®¾ç½®" class="headerlink" title="åˆå§‹åŒ–cloudreve_3.0.0-rc1_linux_armå’Œè®¾ç½®"></a>åˆå§‹åŒ–cloudreve_3.0.0-rc1_linux_armå’Œè®¾ç½®</h3><p>ç™»é™†åä¸‹é¢æ˜¯åˆå§‹åŒ–çš„é¡µé¢</p>
<p><a href="../img/1586074929312.png"><img src="../img/1586074929312.png" alt="1586074929312"></a></p>
<h4 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h4><p><a href="../img/1586075685498.png"><img src="../img/1586075685498.png" alt="1586075685498"></a></p>
<p>åªæœ‰è¿™ä¸ªå…¥å£å¯ä»¥è®¾ç½®ç”¨æˆ·(åŒ…æ‹¬ç®¡ç†å‘˜)ä½¿ç”¨çš„å­˜å‚¨çš„åœ°å€,å¯ä»¥æœ¬åœ°-&gt;è¿™ä¸ªæœ¬åœ°å¯ä»¥é€‰æ‹©ç¡¬ç›˜æŒ‚è½½è·¯å¾„,ä¹Ÿå¯ä»¥ç”¨onedrive</p>
<h3 id="è®¾ç½®cloudreveåå°å¯åŠ¨"><a href="#è®¾ç½®cloudreveåå°å¯åŠ¨" class="headerlink" title="è®¾ç½®cloudreveåå°å¯åŠ¨"></a>è®¾ç½®cloudreveåå°å¯åŠ¨</h3><p>vim /usr/lib/systemd/system/cloudreve.service</p>
<p>ç²˜è´´ä»¥ä¸‹å†…å®¹ç„¶åæ–‡å†…çš„ PATH_TO_CLOUDREVE æ›´æ¢ä¸ºç¨‹åºæ‰€åœ¨ç›®å½•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">	[Unit]</span><br><span class="line">        Description&#x3D;Cloudreve</span><br><span class="line">        Documentation&#x3D; &#x3D;[æŸ¥çœ‹é“¾æ¥](https:&#x2F;&#x2F;docs.cloudreve.org&#x2F;)</span><br><span class="line">        After&#x3D;network.target</span><br><span class="line">        Wants&#x3D;network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">    WorkingDirectory&#x3D;&#x2F;PATH_TO_CLOUDREVE</span><br><span class="line">    ExecStart&#x3D;&#x2F;PATH_TO_CLOUDREVE&#x2F;cloudreve</span><br><span class="line">    Restart&#x3D;on-abnormal</span><br><span class="line">    RestartSec&#x3D;5s</span><br><span class="line">    KillMode&#x3D;mixed</span><br><span class="line">    StandardOutput&#x3D;null</span><br><span class="line">    StandardError&#x3D;syslog</span><br><span class="line">[Install]</span><br><span class="line">    WantedBy&#x3D;multi-user.target</span><br></pre></td></tr></table></figure>

<p>ç„¶åCtrl+oä¿å­˜Ctrl+xé€€å‡º</p>
<p>ç„¶åé…ç½®è¿›ç¨‹<br>æ›´æ–°é…ç½®<br>systemctl daemon-reload<br>å¯åŠ¨æœåŠ¡<br>systemctl start cloudreve<br>è®¾ç½®å¼€æœºå¯åŠ¨<br>systemctl enable cloudreve</p>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä»¥ä¸‹æŒ‡ä»¤æ¥ç®¡ç†æœåŠ¡äº†<br># å¯åŠ¨æœåŠ¡<br>systemctl start cloudreve</p>
<p># åœæ­¢æœåŠ¡<br>systemctl stop cloudreve</p>
<p># é‡å¯æœåŠ¡<br>systemctl restart cloudreve</p>
<p># æŸ¥çœ‹çŠ¶æ€<br>systemctl status cloudreve</p>
<h2 id="è½¯è¿æ¥åˆ°æŒ‚è½½çš„ç¡¬ç›˜"><a href="#è½¯è¿æ¥åˆ°æŒ‚è½½çš„ç¡¬ç›˜" class="headerlink" title="è½¯è¿æ¥åˆ°æŒ‚è½½çš„ç¡¬ç›˜"></a>è½¯è¿æ¥åˆ°æŒ‚è½½çš„ç¡¬ç›˜</h2><p>ln -s /home/device /home/cloud/uploads/1/disk</p>
<p>fdisk -l æŸ¥çœ‹åˆ†åŒºå’ŒæŒ‚è½½çŠ¶å†µ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo su å»ºä¸€ä¸ªç›®å½•ä½œä¸ºUç›˜çš„æŒ‚æ¥ç‚¹ã€‚æ¯”å¦‚è¯´è¦æŠŠUç›˜æŒ‚è½½åˆ° &#x2F;mnt&#x2F;usbï¼Œé‚£ä¹ˆéœ€è¦é‡‡ç”¨ä¸‹åˆ—å‘½ä»¤æ–°å»º &#x2F;mnt&#x2F;usbã€‚       mkdir &#x2F;mnt&#x2F;usb      </span><br><span class="line">ç„¶åå°±å¯ä»¥é‡‡ç”¨mountå‘½ä»¤æŠŠUç›˜æŒ‚è½½åœ¨&#x2F;mnt&#x2F;usbã€‚    </span><br><span class="line">mount &#x2F;dev&#x2F;sdb1 &#x2F;mnt&#x2F;usb     </span><br><span class="line">è¾“å…¥å‘½ä»¤ cd &#x2F;mnt&#x2F;usbè¿›å…¥ç›®å½•&#x2F;mnt&#x2F;usbï¼Œ</span><br><span class="line">ç„¶åè¾“å…¥ lså‘½ä»¤å°±å¯ä»¥æŸ¥çœ‹Uç›˜é‡Œçš„å†…å®¹äº†ã€‚</span><br><span class="line">mount  &#x2F;dev&#x2F;sda1  &#x2F;home&#x2F;cloud&#x2F;uploads&#x2F;1&#x2F;diskmount  &#x2F;dev&#x2F;sda1 &#x2F;home&#x2F;device</span><br></pre></td></tr></table></figure>
               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cloud/" rel="tag">cloud</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nas/" rel="tag">nas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">æ ‘è“æ´¾</a></li></ul>
    </div>
 -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-vmware-extent-disk" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/284f509c.html" class="article-date">
      <time datetime="2021-12-23T09:17:39.000Z" itemprop="datePublished">2021-12-23</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/284f509c.html">VMwareè™šæ‹Ÿæœºæ·»åŠ ç£ç›˜æ ¼å¼åŒ–extåæŒ‚è½½</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39787057/article/details/110810477">https://blog.csdn.net/weixin_39787057/article/details/110810477</a></p>
<p>vmwareæ‰©å®¹è™šæ‹Ÿæœºåæ€ä¹ˆæ‰©å®¹åˆ°æ ¹ç›®å½•,è€Œä¸æ˜¯å»æ–°å»ºä¸€ä¸ªæŒ‚è½½ç‚¹ </p>
<p><img src="../img/06f1254fc68105cc132248dbed9e4767.png" alt="06f1254fc68105cc132248dbed9e4767.png"></p>
<p>
                              
                          
                    
              <!-- 
              
              <p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39787057/article/details/110810477">https://blog.csdn.net/weixin_39787057/article/details/110810477</a></p>
<p>vmwareæ‰©å®¹è™šæ‹Ÿæœºåæ€ä¹ˆæ‰©å®¹åˆ°æ ¹ç›®å½•,è€Œä¸æ˜¯å»æ–°å»ºä¸€ä¸ªæŒ‚è½½ç‚¹ </p>
<p><img src="../img/06f1254fc68105cc132248dbed9e4767.png" alt="06f1254fc68105cc132248dbed9e4767.png"></p>
<ul>
<li>èƒŒæ™¯ï¼šå­¦ä¹ oracleæ—¶ï¼Œå®‰è£…çš„centosç³»ç»Ÿç¡¬ç›˜åªæœ‰20Gï¼Œå®¹é‡ä¸å¤Ÿç”¨ï¼Œæ‰€ä»¥é€šè¿‡VMWareç»™ç³»ç»Ÿæ‰©å®¹ã€‚ä½†æ˜¯æŸ¥è¯¢åï¼Œç¡¬ç›˜å®¹é‡å¹¶æœªå¢åŠ ã€‚</li>
<li>$ è¾“å…¥lsblk æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„åˆ†åŒºæƒ…å†µ</li>
</ul>
<p><img src="../img/8aad999af6e3f71bb9f641451be14ac7.png" alt="8aad999af6e3f71bb9f641451be14ac7.png"></p>
<ul>
<li>è§£å†³åŠæ³•ï¼šå¢åŠ ç£ç›˜æ“ä½œåï¼ŒLinuxå¹¶ä¸è®¤ä¸ºä½ å·²ç»æŠŠç£ç›˜ç©ºé—´æ‰©å¤§ï¼Œæ‰€ä»¥éœ€è¦å¯¹æ–°å¢åŠ çš„å®¹é‡è¿›è¡Œåˆ†åŒºä»¥åŠåˆå¹¶ã€‚</li>
<li> fdisk -l #å…ˆçœ‹ä¸€ä¸‹Disk /dev/sda: 42.9 GB</li>
<li>å¼€å§‹æ–°å¢åˆ†åŒºï¼Œå…ˆè¾“å…¥fdisk /dev/sdaï¼Œå†è¾“å…¥p</li>
<li>æ–°å¢åˆ†åŒºè¾“å…¥ï¼š</li>
<li>n</li>
<li>å›è½¦ï¼ˆé»˜è®¤ä¸ºä¸»åˆ†åŒºprimaryï¼‰</li>
<li>åˆ†åŒºå·ï¼Œèµ·å§‹æ‰‡åŒºï¼Œç»“æŸæ‰‡åŒºéƒ½é»˜è®¤ï¼ˆå›è½¦ï¼‰</li>
<li>è®¾ç½®åˆ†åŒºæ ¼å¼è¾“å…¥ï¼š</li>
<li>t</li>
<li>åˆ†åŒºå·é»˜è®¤ï¼ˆå›è½¦ï¼‰</li>
<li>Hex code ä¸º 8e ï¼ˆ8eä»£è¡¨Linux LVMåˆ†åŒºç±»å‹ï¼‰</li>
<li>w ï¼ˆå†™å…¥åˆ†åŒºè¡¨ï¼‰</li>
</ul>
<p><img src="../img/0df065c956eba29977bcd968487a60d9.png" alt="0df065c956eba29977bcd968487a60d9.png"></p>
<ul>
<li>ç¡®è®¤ä¸€ä¸‹ï¼Œå‘ç°dev/sda3åˆ†åŒºåˆ›å»ºå¥½äº†ï¼Œåˆ†åŒºæ ¼å¼ä¸ºlinux LVMç±»å‹</li>
</ul>
<p><img src="../img/de553bbb7fa78e528ab18a74defba8f8.png" alt="de553bbb7fa78e528ab18a74defba8f8.png"></p>
<ul>
<li>é‡å¯ä¸€ä¸‹ï¼Œä»¥ä¾¿é‡è¯»åˆ†åŒºè¡¨</li>
<li>å¼€å§‹æ ¼å¼åŒ–åˆ†åŒº</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext3 &#x2F;dev&#x2F;sda3</span><br></pre></td></tr></table></figure>

<ul>
<li>å¼€å§‹åˆå¹¶</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> pvcreate /dev/sda3   </span><br><span class="line"></span><br><span class="line">vgextend centos /dev/sda3   </span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å…¥yç¡®è®¤   </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹ä¸€ä¸‹å½“å‰çš„Volumeå·è¯¦æƒ…   </span></span><br><span class="line"></span><br><span class="line"> vgdisplay -v</span><br></pre></td></tr></table></figure>

<ul>
<li>æŸ¥çœ‹æ–°åˆ†åŒºsda3è¯¦æƒ…ï¼Œå®¹é‡ä¸º5119</li>
<li>å°†ç³»ç»Ÿç›˜/dev/mapper/centos-rootä¸sda3çš„5119ç©ºä½™å®¹é‡åˆå¹¶</li>
<li> lvextend -l+5119 /dev/mapper/centos-root</li>
<li>quit</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/img_convert/1d34c6a4c2f0ecdde57a2f36452182d4.png" alt="1d34c6a4c2f0ecdde57a2f36452182d4.png"></p>
<ul>
<li>æœ€åå°†æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæ‰©å®¹ï¼Œè®©ç³»ç»Ÿè¯†åˆ«ï¼Œè¾“å…¥å‘½ä»¤ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xfs_growfs &#x2F;dev&#x2F;mapper&#x2F;centos-root</span><br></pre></td></tr></table></figure>

<ul>
<li>lsblk</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/img_convert/eceb4011ee01a3379b27bdb0df5ec10e.png" alt="eceb4011ee01a3379b27bdb0df5ec10e.png"></p>
<p><strong>æˆåŠŸæ‰©å®¹ï¼ï¼</strong></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-docker-deploy-hbase" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/412589e1.html" class="article-date">
      <time datetime="2021-12-14T07:22:14.000Z" itemprop="datePublished">2021-12-14</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/412589e1.html">dockerè¿è¡Œhbase</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><h1 id="dockeréƒ¨ç½²hbase"><a href="#dockeréƒ¨ç½²hbase" class="headerlink" title="dockeréƒ¨ç½²hbase"></a>dockeréƒ¨ç½²hbase</h1><p>ç³»ç»Ÿä¸º centos7</p>
<p>docker å®‰è£…çš„ç‰ˆæœ¬ä¸º 20.10.9</p>
<h2 id="ä¸€-dockerå®‰è£…"><a href="#ä¸€-dockerå®‰è£…" class="headerlink" title="ä¸€,dockerå®‰è£…"></a>ä¸€,dockerå®‰è£…</h2><p>å¸è½½ç³»ç»Ÿä»“åº“è‡ªå¸¦çš„docker</p>
<p>
                              
                          
                    
              <!-- 
              
              <h1 id="dockeréƒ¨ç½²hbase"><a href="#dockeréƒ¨ç½²hbase" class="headerlink" title="dockeréƒ¨ç½²hbase"></a>dockeréƒ¨ç½²hbase</h1><p>ç³»ç»Ÿä¸º centos7</p>
<p>docker å®‰è£…çš„ç‰ˆæœ¬ä¸º 20.10.9</p>
<h2 id="ä¸€-dockerå®‰è£…"><a href="#ä¸€-dockerå®‰è£…" class="headerlink" title="ä¸€,dockerå®‰è£…"></a>ä¸€,dockerå®‰è£…</h2><p>å¸è½½ç³»ç»Ÿä»“åº“è‡ªå¸¦çš„docker</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></table></figure>

<p>æœ‰ä¸‰ç§æ–¹å¼æ¥å®‰è£…docker</p>
<ol>
<li>æ›´æ–°å®˜æ–¹ä»“åº“åyumå®‰è£…</li>
<li>æ‰‹åŠ¨ä¸‹è½½æ–‡ä»¶å®‰è£…</li>
<li>è„šæœ¬æ–‡ä»¶å®‰è£…</li>
</ol>
<p>ç›®å‰å‡†å¤‡ä½¿ç”¨ç¬¬ä¸‰ç§æ–¹å¼æ¥å®‰è£…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https:&#x2F;&#x2F;get.docker.com -o get-docker.sh &amp;&amp; sh get-docker.sh</span><br></pre></td></tr></table></figure>





<h2 id="äºŒ-docker-composeæ¥å®ç°å•èŠ‚ç‚¹å®¹å™¨çš„ç¼–æ’"><a href="#äºŒ-docker-composeæ¥å®ç°å•èŠ‚ç‚¹å®¹å™¨çš„ç¼–æ’" class="headerlink" title="äºŒ,docker-composeæ¥å®ç°å•èŠ‚ç‚¹å®¹å™¨çš„ç¼–æ’"></a>äºŒ,docker-composeæ¥å®ç°å•èŠ‚ç‚¹å®¹å™¨çš„ç¼–æ’</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -L https:&#x2F;&#x2F;get.daocloud.io&#x2F;docker&#x2F;compose&#x2F;releases&#x2F;download&#x2F;1.25.1&#x2F;docker-compose-&#96;uname -s&#96;-&#96;uname -m&#96; -o &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose</span><br><span class="line"></span><br><span class="line">chmod +x &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>/usr/local/bin/docker-compose -f docker-compose-distributed-local.yml up -d</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">resourcemanager  8088 </span><br><span class="line"></span><br><span class="line">hbase-master 16000</span><br><span class="line"></span><br><span class="line">hbase-regionserver 16020</span><br><span class="line"></span><br><span class="line">zookeeper 2888 2181 3888</span><br><span class="line"></span><br><span class="line">historyserver 8188</span><br><span class="line"></span><br><span class="line">namenode 50070</span><br><span class="line"></span><br><span class="line">datanode 50075</span><br><span class="line"></span><br><span class="line">nodemanager 8042</span><br></pre></td></tr></table></figure>







<h2 id="ä¸‰-ä½¿ç”¨docker-stackæ¥å®ç°"><a href="#ä¸‰-ä½¿ç”¨docker-stackæ¥å®ç°" class="headerlink" title="ä¸‰,ä½¿ç”¨docker stackæ¥å®ç°"></a>ä¸‰,ä½¿ç”¨docker stackæ¥å®ç°</h2><h3 id="1-åˆ›å»ºswarmçš„ç½‘ç»œä¿è¯å„ä¸ªèŠ‚ç‚¹éƒ½èƒ½å¹³ç­‰çš„è¢«ç¼–æ’"><a href="#1-åˆ›å»ºswarmçš„ç½‘ç»œä¿è¯å„ä¸ªèŠ‚ç‚¹éƒ½èƒ½å¹³ç­‰çš„è¢«ç¼–æ’" class="headerlink" title="1.åˆ›å»ºswarmçš„ç½‘ç»œä¿è¯å„ä¸ªèŠ‚ç‚¹éƒ½èƒ½å¹³ç­‰çš„è¢«ç¼–æ’"></a>1.åˆ›å»ºswarmçš„ç½‘ç»œä¿è¯å„ä¸ªèŠ‚ç‚¹éƒ½èƒ½å¹³ç­‰çš„è¢«ç¼–æ’</h3><p>docker swarm  init  åˆå§‹åŒ–ä¸€ä¸ªswarm çš„ç½‘ç»œ</p>
<p>docker swarm join-token worker æ˜¾ç¤º åŠ å…¥çš„token</p>
<p> docker swarm join-token manager æ˜¾ç¤ºåŠ å…¥çš„token</p>
<p>ç›®å‰ä½¿ç”¨ä¸‹é¢åŠ å…¥manager,å› ä¸ºworkerèŠ‚ç‚¹ä¸èƒ½æ˜¾ç¤ºé›†ç¾¤çš„ç»†èŠ‚</p>
<p>åœ¨å…¶ä»–æœåŠ¡å™¨ä¸Šè¾“å…¥ ä¸‹é¢ç±»ä¼¼çš„å†…å®¹åŠ å…¥èŠ‚ç‚¹</p>
<blockquote>
<p>docker swarm join â€“token SWMTKN-1-0w6kjxx0j4epupf6r844dxpzoyxikrxqqgrqg319vqfg0y1gw7-31q237m76pyii2g0pw1c8nmtu 192.168.31.136:2377</p>
</blockquote>
<h3 id="2-docker-node-ls-æŸ¥çœ‹ç›®å‰çš„ç½‘ç»œ"><a href="#2-docker-node-ls-æŸ¥çœ‹ç›®å‰çš„ç½‘ç»œ" class="headerlink" title="2.docker node ls æŸ¥çœ‹ç›®å‰çš„ç½‘ç»œ"></a>2.docker node ls æŸ¥çœ‹ç›®å‰çš„ç½‘ç»œ</h3><p><img src="../img/image-20211214152312286.png" alt="image-20211214152312286"></p>
<p>docker network create â€“driver overlay â€“scope swarm  hbase</p>
<p>docker stack deploy â€“compose-file docker-compose-v3.yml  hdp</p>
<p>docker stack ls   </p>
<p>docker stack down hadoop</p>
<p>docker network create â€“driver overlay â€“attachable â€“subnet 10.11.0.0/24 sg-hadoop</p>
<p>Creating service hdp_nodemanager<br>Creating service hdp_hbase-master</p>
<p>/opt/hbase-1.2.6/bin/hbase-daemon.sh restart  regionserver</p>
<p>echo -e â€œhbase-region2\nhbase-regionâ€  &gt;  /etc/hbase/regionservers</p>
<p>docker service update â€“with-registry-auth  </p>
<p>éœ€è¦è¿½åŠ  â€“with-registry-auth</p>
<p>docker exec -t 70f261259630  netstat -an | grep LISTEN | grep 50070</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">namenode:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">bde2020/hadoop-namenode:2.0.0-hadoop3.2.1-java8</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">hbase</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">namenode:/hadoop/dfs/name</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CLUSTER_NAME=test</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./hadoop.env</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">global</span></span><br><span class="line">      <span class="comment">#   replicas: 1</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">      <span class="comment"># placement:</span></span><br><span class="line">      <span class="comment">#   constraints:</span></span><br><span class="line">      <span class="comment">#     - node.hostname == akswnc4.aksw.uni-leipzig.de</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">traefik.docker.network:</span> <span class="string">hbase</span></span><br><span class="line">        <span class="attr">traefik.port:</span> <span class="number">9000</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">9000</span><span class="string">:9000</span></span><br><span class="line">      <span class="comment"># - 50070:50070</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">datanode:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">bde2020/hadoop-datanode:2.0.0-hadoop3.2.1-java8</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">hbase</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">datanode:/hadoop/dfs/data</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./hadoop.env</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">SERVICE_PRECONDITION:</span> <span class="string">&quot;namenode:9000&quot;</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">global</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">traefik.docker.network:</span> <span class="string">hbase</span></span><br><span class="line">        <span class="attr">traefik.port:</span> <span class="number">9867</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">9867</span><span class="string">:9867</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">resourcemanager:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">bde2020/hadoop-resourcemanager:2.0.0-hadoop3.2.1-java8</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">hbase</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">SERVICE_PRECONDITION:</span> <span class="string">&quot;namenode:9000 datanode:9867&quot;</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./hadoop.env</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">global</span></span><br><span class="line">    <span class="comment">#     replicas: 1</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">      <span class="comment"># placement:</span></span><br><span class="line">      <span class="comment">#   constraints:</span></span><br><span class="line">      <span class="comment">#     - node.hostname == akswnc4.aksw.uni-leipzig.de</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">traefik.docker.network:</span> <span class="string">hbase</span></span><br><span class="line">        <span class="attr">traefik.port:</span> <span class="number">8088</span></span><br><span class="line">    <span class="attr">healthcheck:</span></span><br><span class="line">      <span class="attr">disable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8088</span><span class="string">:8088</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="attr">nodemanager:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">bde2020/hadoop-nodemanager:2.0.0-hadoop3.2.1-java8</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">hbase</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">SERVICE_PRECONDITION:</span> <span class="string">&quot;namenode:9000 datanode:9867 resourcemanager:8088&quot;</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./hadoop.env</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">global</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">traefik.docker.network:</span> <span class="string">hbase</span></span><br><span class="line">        <span class="attr">traefik.port:</span> <span class="number">8042</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8042</span><span class="string">:8042</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="attr">historyserver:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">bde2020/hadoop-historyserver:2.0.0-hadoop3.2.1-java8</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">hbase</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">hadoop_historyserver:/hadoop/yarn/timeline</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">SERVICE_PRECONDITION:</span> <span class="string">&quot;namenode:9000 datanode:9867 resourcemanager:8088&quot;</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./hadoop.env</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">global</span></span><br><span class="line">    <span class="comment">#  replicas: 1</span></span><br><span class="line">      <span class="comment"># placement:</span></span><br><span class="line">      <span class="comment">#   constraints:</span></span><br><span class="line">      <span class="comment">#     - node.hostname == akswnc4.aksw.uni-leipzig.de</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">traefik.docker.network:</span> <span class="string">hbase</span></span><br><span class="line">        <span class="attr">traefik.port:</span> <span class="number">8188</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8188</span><span class="string">:8188</span></span><br><span class="line">  <span class="attr">zookeeper:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">zookeeper:3.4.10</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">hbase</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">ZOO_MY_ID:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">ZOO_SERVERS:</span> <span class="string">server.1=0.0.0.0:2888:3888</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">2181</span><span class="string">:2181</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">hbase-master:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">bde2020/hbase-master:1.0.0-hbase1.2.6</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">hbase-master</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">hbase</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./hbase-distributed-local.env</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">SERVICE_PRECONDITION:</span> <span class="string">&quot;namenode:9000 datanode:9867 zookeeper:2181&quot;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">16000</span><span class="string">:16000</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">16010</span><span class="string">:16010</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">hbase-region:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">bde2020/hbase-regionserver:1.0.0-hbase1.2.6</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">hbase-regionserver</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">hbase</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./hbase-distributed-local.env</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">HBASE_CONF_hbase_regionserver_hostname:</span> <span class="string">hbase-region</span></span><br><span class="line">      <span class="attr">SERVICE_PRECONDITION:</span> <span class="string">&quot;namenode:9000 datanode:9867 zookeepe:2181 hbase-master:16010&quot;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">16020</span><span class="string">:16020</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">16030</span><span class="string">:16030</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">visualizer:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">dockersamples/visualizer:stable</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8080:8080&quot;</span></span><br><span class="line">    <span class="attr">stop_grace_period:</span> <span class="string">1m30s</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">global</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span> [<span class="string">node.role</span> <span class="string">==</span> <span class="string">manager</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">datanode:</span></span><br><span class="line">  <span class="attr">namenode:</span></span><br><span class="line">  <span class="attr">hadoop_historyserver:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">hbase:</span></span><br><span class="line">    <span class="attr">external:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">hbase</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>å°†è‡ªåŠ¨åˆ›å»ºservice</p>
<h3 id="3-ä½¿ç”¨docker-stack-lsæ¥æŸ¥çœ‹åˆ›å»ºstack"><a href="#3-ä½¿ç”¨docker-stack-lsæ¥æŸ¥çœ‹åˆ›å»ºstack" class="headerlink" title="3.ä½¿ç”¨docker stack lsæ¥æŸ¥çœ‹åˆ›å»ºstack"></a>3.ä½¿ç”¨docker stack lsæ¥æŸ¥çœ‹åˆ›å»ºstack</h3><p><img src="../img/image-20211214152334572.png" alt="image-20211214152334572"></p>
<h3 id="4-ä½¿ç”¨docker-service-lsæ¥æŸ¥çœ‹serviceåˆ—è¡¨"><a href="#4-ä½¿ç”¨docker-service-lsæ¥æŸ¥çœ‹serviceåˆ—è¡¨" class="headerlink" title="4.ä½¿ç”¨docker service lsæ¥æŸ¥çœ‹serviceåˆ—è¡¨"></a>4.ä½¿ç”¨docker service lsæ¥æŸ¥çœ‹serviceåˆ—è¡¨</h3><p><img src="../img/image-20211214152347155.png" alt="image-20211214152347155"></p>
<h3 id="5-ä½¿ç”¨ymlä¸­visualizerç»„ä»¶æ¥æ˜¾ç¤ºéƒ¨ç½²çš„æƒ…å†µ"><a href="#5-ä½¿ç”¨ymlä¸­visualizerç»„ä»¶æ¥æ˜¾ç¤ºéƒ¨ç½²çš„æƒ…å†µ" class="headerlink" title="5.ä½¿ç”¨ymlä¸­visualizerç»„ä»¶æ¥æ˜¾ç¤ºéƒ¨ç½²çš„æƒ…å†µ"></a>5.ä½¿ç”¨ymlä¸­visualizerç»„ä»¶æ¥æ˜¾ç¤ºéƒ¨ç½²çš„æƒ…å†µ</h3><p><img src="../img/image-20211214152401033.png" alt="image-20211214152401033"></p>
<table>
<thead>
<tr>
<th>ç»„ä»¶</th>
<th>èŠ‚ç‚¹</th>
<th>é»˜è®¤ç«¯å£</th>
<th>é…ç½®</th>
<th>ç”¨é€”è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>HDFS</td>
<td>DateNode</td>
<td>50010</td>
<td>dfs.datanode.address</td>
<td>datanodeæœåŠ¡ç«¯å£ï¼Œç”¨äºæ•°æ®ä¼ è¾“</td>
</tr>
<tr>
<td>HDFS</td>
<td>DateNode</td>
<td>50075</td>
<td>dfs.datanode.http.address</td>
<td>httpæœåŠ¡çš„ç«¯å£</td>
</tr>
<tr>
<td>HDFS</td>
<td>DateNode</td>
<td>50475</td>
<td>dfs.datanode.https.address</td>
<td>httpæœåŠ¡çš„ç«¯å£</td>
</tr>
<tr>
<td>HDFS</td>
<td>DateNode</td>
<td>50020</td>
<td>dfs.datanode.ipc.address</td>
<td>ipcæœåŠ¡çš„ç«¯å£</td>
</tr>
<tr>
<td>HDFS</td>
<td>NameNode</td>
<td>50070</td>
<td>dfs.namenode.http-address</td>
<td>httpæœåŠ¡çš„ç«¯å£</td>
</tr>
<tr>
<td>HDFS</td>
<td>NameNode</td>
<td>50470</td>
<td>dfs.namenode.https-address</td>
<td>httpsæœåŠ¡çš„ç«¯å£</td>
</tr>
<tr>
<td>HDFS</td>
<td>NameNode</td>
<td>8020</td>
<td>fs.defaultFS</td>
<td>æ¥æ”¶Clientè¿æ¥çš„RPCç«¯å£ï¼Œç”¨äºè·å–æ–‡ä»¶ç³»ç»Ÿmetadataä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td>HDFS</td>
<td>journalnode</td>
<td>8485</td>
<td>dfs.journalnode.rpc-address</td>
<td>RPCæœåŠ¡</td>
</tr>
<tr>
<td>HDFS</td>
<td>journalnode</td>
<td>8480</td>
<td>dfs.journalnode.http-address</td>
<td>HTTPæœåŠ¡</td>
</tr>
<tr>
<td>HDFS</td>
<td>ZKFC</td>
<td>8019</td>
<td>dfs.ha.zkfc.port</td>
<td>ZooKeeper FailoverControllerï¼Œç”¨äºNN HA</td>
</tr>
<tr>
<td>YARN</td>
<td>ResourceManage</td>
<td>8032</td>
<td>yarn.resourcemanager.address</td>
<td>RMçš„applications manager(ASM)ç«¯å£</td>
</tr>
<tr>
<td>YARN</td>
<td>ResourceManage</td>
<td>8030</td>
<td>yarn.resourcemanager.scheduler.address</td>
<td>schedulerç»„ä»¶çš„IPCç«¯å£</td>
</tr>
<tr>
<td>YARN</td>
<td>ResourceManage</td>
<td>8031</td>
<td>yarn.resourcemanager.resource-tracker.address</td>
<td>IPC</td>
</tr>
<tr>
<td>YARN</td>
<td>ResourceManage</td>
<td>8033</td>
<td>yarn.resourcemanager.admin.address</td>
<td>IPC</td>
</tr>
<tr>
<td>YARN</td>
<td>ResourceManage</td>
<td>8088</td>
<td>yarn.resourcemanager.webapp.address</td>
<td>httpæœåŠ¡ç«¯å£</td>
</tr>
<tr>
<td>YARN</td>
<td>NodeManager</td>
<td>8040</td>
<td>yarn.nodemanager.localizer.address</td>
<td>localizer IPC</td>
</tr>
<tr>
<td>YARN</td>
<td>NodeManager</td>
<td>8042</td>
<td>yarn.nodemanager.webapp.address</td>
<td>httpæœåŠ¡ç«¯å£</td>
</tr>
<tr>
<td>YARN</td>
<td>NodeManager</td>
<td>8041</td>
<td>yarn.nodemanager.address</td>
<td>NMä¸­container managerçš„ç«¯å£</td>
</tr>
<tr>
<td>YARN</td>
<td>JobHistory Server</td>
<td>10020</td>
<td>mapreduce.jobhistory.address</td>
<td>IPC</td>
</tr>
<tr>
<td>YARN</td>
<td>JobHistory Server</td>
<td>19888</td>
<td>mapreduce.jobhistory.webapp.address</td>
<td>httpæœåŠ¡ç«¯å£</td>
</tr>
<tr>
<td>HBase</td>
<td>Master</td>
<td>60000</td>
<td>hbase.master.port</td>
<td>IPC (ä¸»èŠ‚ç‚¹ï¼ˆHBase ä¸»èŠ‚ç‚¹å’Œä»»ä½•å¤‡ä»½çš„ HBase ä¸»èŠ‚ç‚¹ï¼‰</td>
</tr>
<tr>
<td>HBase</td>
<td>Master</td>
<td>60010</td>
<td>hbase.master.info.port</td>
<td>httpæœåŠ¡ç«¯å£ (ä¸»èŠ‚ç‚¹ï¼ˆHBase ä¸»èŠ‚ç‚¹å’Œå¤‡ä»½ HBase ä¸»èŠ‚ç‚¹å¦‚æœæœ‰))</td>
</tr>
<tr>
<td>HBase</td>
<td>RegionServer</td>
<td>60020</td>
<td>hbase.regionserver.port</td>
<td>IPC( æ‰€æœ‰ä»èŠ‚ç‚¹)</td>
</tr>
<tr>
<td>HBase</td>
<td>RegionServer</td>
<td>60030</td>
<td>hbase.regionserver.info.port</td>
<td>httpæœåŠ¡ç«¯å£</td>
</tr>
<tr>
<td>HBase</td>
<td>HQuorumPeer</td>
<td>2181</td>
<td>hbase.zookeeper.property.clientPort</td>
<td>HBase-managed ZK modeï¼Œä½¿ç”¨ç‹¬ç«‹çš„ZooKeeperé›†ç¾¤åˆ™ä¸ä¼šå¯ç”¨è¯¥ç«¯å£ã€‚</td>
</tr>
<tr>
<td>HBase</td>
<td>HQuorumPeer</td>
<td>2888</td>
<td>hbase.zookeeper.peerport</td>
<td>HBase-managed ZK modeï¼Œä½¿ç”¨ç‹¬ç«‹çš„ZooKeeperé›†ç¾¤åˆ™ä¸ä¼šå¯ç”¨è¯¥ç«¯å£ã€‚</td>
</tr>
<tr>
<td>HBase</td>
<td>HQuorumPeer</td>
<td>3888</td>
<td>hbase.zookeeper.leaderport</td>
<td>HBase-managed ZK modeï¼Œä½¿ç”¨ç‹¬ç«‹çš„ZooKeeperé›†ç¾¤åˆ™ä¸ä¼šå¯ç”¨è¯¥ç«¯å£ã€‚</td>
</tr>
<tr>
<td>Hive</td>
<td>Metastore</td>
<td>9085</td>
<td>/etc/default/hive-metastoreä¸­export PORT=<port>æ¥æ›´æ–°é»˜è®¤ç«¯å£</td>
<td></td>
</tr>
<tr>
<td>Hive</td>
<td>HiveServer</td>
<td>10000</td>
<td>/etc/hive/conf/hive-env.shä¸­export HIVE_SERVER2_THRIFT_PORT=<port>æ¥æ›´æ–°é»˜è®¤ç«¯å£</td>
<td></td>
</tr>
<tr>
<td>ZooKeeper</td>
<td>Server</td>
<td>2181</td>
<td>/etc/zookeeper/conf/zoo.cfgä¸­clientPort=<port></td>
<td>æ¥è‡ª ZooKeeper çš„ config çš„å±æ€§<code>zoo.cfg</code>ã€‚å®¢æˆ·ç«¯å°†è¿æ¥çš„ç«¯å£ã€‚</td>
</tr>
<tr>
<td>ZooKeeper</td>
<td>Server</td>
<td>2888</td>
<td>/etc/zookeeper/conf/zoo.cfgä¸­server.x=[hostname]:nnnnn[:nnnnn]ï¼Œæ ‡è“éƒ¨åˆ†</td>
<td>followerç”¨æ¥è¿æ¥åˆ°leaderï¼Œåªåœ¨leaderä¸Šç›‘å¬è¯¥ç«¯å£</td>
</tr>
<tr>
<td>ZooKeeper</td>
<td>Server</td>
<td>3888</td>
<td>/etc/zookeeper/conf/zoo.cfgä¸­server.x=[hostname]:nnnnn[:nnnnn]ï¼Œæ ‡è“éƒ¨åˆ†</td>
<td>ZooKeeper å¯¹ç­‰ç‚¹ç”¨äºç›¸äº’é€šä¿¡çš„ç«¯å£ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§<a target="_blank" rel="noopener" href="http://zookeeper.apache.org/doc/r3.4.3/zookeeperStarted.html#sc_RunningReplicatedZooKeeper">æ­¤å¤„</a></td>
</tr>
</tbody></table>
<h2 id="å-é‡åˆ°çš„å‘"><a href="#å-é‡åˆ°çš„å‘" class="headerlink" title="å,é‡åˆ°çš„å‘"></a>å,é‡åˆ°çš„å‘</h2><h3 id="1-åœ¨hadoopé…ç½®çš„éœ€è¦ä¸»è¦"><a href="#1-åœ¨hadoopé…ç½®çš„éœ€è¦ä¸»è¦" class="headerlink" title="1.åœ¨hadoopé…ç½®çš„éœ€è¦ä¸»è¦"></a>1.åœ¨hadoopé…ç½®çš„éœ€è¦ä¸»è¦</h3><p>é…ç½®urlç±»ä¼¼äº host:port è¿™ç§æ—¶ host ä¸èƒ½æŠ¥è€ƒ_ ç­‰å­—ç¬¦,å¦åˆ™ä¼šæŠ¥ contain a valid host:port authority åŒ…å« _</p>
<h3 id="2-ä½¿ç”¨docker-stack-åˆå§‹åŒ–çš„ç¯å¢ƒ"><a href="#2-ä½¿ç”¨docker-stack-åˆå§‹åŒ–çš„ç¯å¢ƒ" class="headerlink" title="2.ä½¿ç”¨docker stack åˆå§‹åŒ–çš„ç¯å¢ƒ"></a>2.ä½¿ç”¨docker stack åˆå§‹åŒ–çš„ç¯å¢ƒ</h3><p>æ‰€æœ‰çš„æœåŠ¡ä¼šæœ‰ä¸ªstackåç§°çš„å‰ç¼€,ä¸”ä¸èƒ½ä¿®æ”¹</p>
<p>åœ¨é›†ç¾¤ä¸­åŠ å…¥å®¹å™¨ä¸­åå¯ä»¥é€šè¿‡ æœåŠ¡åç§°å°±æ˜¯ STACK_NAME æ¥è°ƒç”¨ä¹Ÿå¯ä»¥é€šè¿‡åœ¨ymlä¸­å®šä¹‰çš„servicesä¸‹é¢çš„èŠ‚ç‚¹åç§°æ¥è°ƒç”¨è¿™ä¸ªéœ€è¦æ³¨æ„</p>
<p>åˆå§‹åŒ–åå‡ºç°æ‰€æœ‰çš„serviceä¼šåŠ å‰ç¼€å¯¼è‡´åŸŸåä¸èƒ½å’Œè®¿é—®</p>
<p>3.å“ˆå“ˆå“ˆ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">File &#x2F;hbase&#x2F;.tmp&#x2F;hbase.version could only be written to 0 of the 1 minReplication nodes. There are 1 datanode(s) running and 1 node(s) are excluded in this operation</span><br></pre></td></tr></table></figure>

<p>4.é…ç½®å‡ºé”™å¯¼è‡´æœåŠ¡ç»‘å®šå¯¹åº”çš„ip</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.io.IOException: Problem binding to hbase-region&#x2F;10.0.4.107:16040 : Cannot assign requested address. To switch ports use the &#39;hbase.regionserver.port&#39; configuration property.</span><br></pre></td></tr></table></figure>


               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/11/"> ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/25/">25</a><a class="extend next" rel="next" href="/page/13/">ä¸‹ä¸€é¡µ </a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2025 leek
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="ç®€è€Œä¸å‡ Hexo åŒæ åšå®¢ä¸»é¢˜  v3.5">Yelee</a> by leek <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="æœ¬ç«™åˆ°è®¿æ•°"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="æœ¬é¡µé˜…è¯»é‡"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//lf6-cdn-tos.bytecdntp.com/cdn/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-144246563-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



<div class="scroll" id="scroll">
    <a href="#" title="è¿”å›é¡¶éƒ¨"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="æŸ¥çœ‹è¯„è®º"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="è½¬åˆ°åº•éƒ¨"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
             tags: ".article-tag a", 
             categories: ".article-category a, a.tag-list-link", 
            
            
            
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

    <script>
        var originTitle = document.title;
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.title = "(ã¤ã‚§âŠ‚) æˆ‘è—å¥½äº†å“¦~ " + originTitle;
                clearTimeout(titleTime);
            }
            else {
                document.title = "(*Â´âˆ‡ï½€*) è¢«ä½ å‘ç°å•¦~ " + originTitle;
                titleTime = setTimeout(function() {
                    document.title = originTitle;
                }, 2000);
            }
        })
    </script>

<script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>