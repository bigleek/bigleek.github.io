<!DOCTYPE html>
<html lang="zh-cn">
<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="leek" />


    
     
        <meta name="google-site-verification" content="Vl02j4hnvtN2AJ3EfPjyvrHb191mbrnVtUlHgPUKBp0" />
    


<meta property="og:type" content="website">
<meta property="og:title" content="leek 自留地">
<meta property="og:url" content="https://imlike.cc/page/5/index.html">
<meta property="og:site_name" content="leek 自留地">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="leek">
<meta name="twitter:card" content="summary">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="leek 自留地" type="application/atom+xml">



    <link rel="shortcut icon" href="pics/g.jpg">



    <link href="//lf6-cdn-tos.bytecdntp.com/cdn/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//lf6-cdn-tos.bytecdntp.com/cdn/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//lf6-cdn-tos.bytecdntp.com/cdn/pace/1.0.2/pace.min.js"></script>
    <link href="//lf6-cdn-tos.bytecdntp.com/cdn/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">



<link rel="stylesheet" href="/css/style.css">



    <!-- 注释 -->
    <!-- <style> .article { opacity: 0;} </style> -->


<link href="//lf6-cdn-tos.bytecdntp.com/cdn/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>leek 自留地</title>

<script src="//lf6-cdn-tos.bytecdntp.com/cdn/jquery/2.2.4/jquery.min.js"></script>
<script src="//lf6-cdn-tos.bytecdntp.com/cdn/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//lf6-cdn-tos.bytecdntp.com/cdn/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//lf6-cdn-tos.bytecdntp.com/cdn/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






<meta name="generator" content="Hexo 5.2.0"></head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="https://pic.superbed.cn/item/5c9f2d213a213b04176522d4" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/"></a></h1>
        </hgroup>

        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="true" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:s@yandex.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" rel="noopener" href="https://github.com/bigleek" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa Google" target="_blank" rel="noopener" href="https://plus.google.com/bigleekcode" title="Google"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Yelee/" rel="tag">Yelee</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Yilia/" rel="tag">Yilia</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/activiti/" rel="tag">activiti</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/alist/" rel="tag">alist</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/axios/" rel="tag">axios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/binary/" rel="tag">binary</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ceph/" rel="tag">ceph</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/clickhouse/" rel="tag">clickhouse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloud/" rel="tag">cloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/container/" rel="tag">container</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deepin/" rel="tag">deepin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/" rel="tag">elasticsearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsraech/" rel="tag">elasticsraech</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/" rel="tag">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flyio/" rel="tag">flyio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gdal/" rel="tag">gdal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitlab/" rel="tag">gitlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gnome/" rel="tag">gnome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo%E4%B8%BB%E9%A2%98/" rel="tag">hexo主题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/intellj/" rel="tag">intellj</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdk/" rel="tag">jdk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jenkins/" rel="tag">jenkins</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/" rel="tag">k8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kibana/" rel="tag">kibana</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kubernetes/" rel="tag">kubernetes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kuboard/" rel="tag">kuboard</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mail/" rel="tag">mail</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/" rel="tag">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nas/" rel="tag">nas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/no-ad/" rel="tag">no_ad</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/onedrive/" rel="tag">onedrive</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/orientDb/" rel="tag">orientDb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/" rel="tag">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/post/" rel="tag">post</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgres/" rel="tag">postgres</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/put/" rel="tag">put</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/repost/" rel="tag">repost</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spotify/" rel="tag">spotify</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/" rel="tag">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/" rel="tag">springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springcloud/" rel="tag">springcloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/" rel="tag">sublime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thunderbolt/" rel="tag">thunderbolt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vmware/" rel="tag">vmware</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vpn/" rel="tag">vpn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/" rel="tag">vscode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue-cli/" rel="tag">vue-cli</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webdav/" rel="tag">webdav</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/" rel="tag">windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wine/" rel="tag">wine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yandex/" rel="tag">yandex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zsh/" rel="tag">zsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%91%E6%92%AD/" rel="tag">云播</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" rel="tag">内网穿透</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A0%E9%80%9F/" rel="tag">加速</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9D%9A%E6%9E%9C%E4%BA%91/" rel="tag">坚果云</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%9F%E5%90%8D/" rel="tag">域名</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A9%E7%BF%BC%E4%BA%91/" rel="tag">天翼云</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91/" rel="tag">开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%A8%E8%8D%90/" rel="tag">推荐</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%90%9C%E7%8B%97%E8%BE%93%E5%85%A5%E6%B3%95/" rel="tag">搜狗输入法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%90%AC%E5%AE%B6/" rel="tag">搬家</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/" rel="tag">知识管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%AB%99/" rel="tag">网站</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%85%BE%E8%AE%AF%E4%BA%91/" rel="tag">腾讯云</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A7%86%E9%A2%91%E6%B5%81/" rel="tag">视频流</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B5%84%E6%BA%90/" rel="tag">资源</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AC%E8%BD%BD/" rel="tag">转载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE/" rel="tag">软件配置</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/" rel="tag">邮件服务</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://imlike.cc/page.html">镜像网站导航</a>
                    
                      <a class="main-nav-link switch-friends-link" target="_blank" rel="noopener" href="https://imcyc.cn/">Morty</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">平时零散的知识</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页"></a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="https://pic.superbed.cn/item/5c9f2d213a213b04176522d4" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页"></a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:s@yandex.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/bigleek" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa Google" target="_blank" href="https://plus.google.com/bigleekcode" title="Google"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-使用lettle客户端或者redis连接变化时的触发事件" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/a337c28a.html" class="article-date">
      <time datetime="2023-07-08T00:25:45.000Z" itemprop="datePublished">2023-07-08</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/a337c28a.html">使用Lettuce客户端或者redis连接变化时的触发事件</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CacheConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisConnectionFactory <span class="title">redisConnectionFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        RedisStandaloneConfiguration config = <span class="keyword">new</span> RedisStandaloneConfiguration();</span><br><span class="line">        config.setHostName(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">        config.setPort(<span class="number">11</span>);</span><br><span class="line">        config.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> LettuceConnectionFactory(config);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="meta">@Bean(name = &quot;redisTemplate&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title">redisTemplate</span><span class="params">(RedisConnectionFactory factory)</span> </span>&#123;</span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> RedisTemplate&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        template.setConnectionFactory(factory);</span><br><span class="line"></span><br><span class="line">        StringRedisSerializer stringRedisSerializer = <span class="keyword">new</span> StringRedisSerializer();</span><br><span class="line">        template.setKeySerializer(stringRedisSerializer);</span><br><span class="line"></span><br><span class="line">        template.setHashKeySerializer(stringRedisSerializer);</span><br><span class="line"></span><br><span class="line">        GenericJackson2JsonRedisSerializer redisSerializer = <span class="keyword">new</span> GenericJackson2JsonRedisSerializer();</span><br><span class="line">        template.setValueSerializer(redisSerializer);</span><br><span class="line"></span><br><span class="line">        template.setHashValueSerializer(redisSerializer);</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CacheManager <span class="title">cacheManager</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        RedisCacheConfiguration cacheConfiguration = RedisCacheConfiguration.defaultCacheConfig()</span><br><span class="line">                .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(</span><br><span class="line">                        <span class="keyword">new</span> GenericJackson2JsonRedisSerializer())).disableCachingNullValues();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> RedisCacheManager.builder(redisConnectionFactory).cacheDefaults(cacheConfiguration).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>
                              
                          
                    
              <!-- 
              
              <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CacheConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisConnectionFactory <span class="title">redisConnectionFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        RedisStandaloneConfiguration config = <span class="keyword">new</span> RedisStandaloneConfiguration();</span><br><span class="line">        config.setHostName(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">        config.setPort(<span class="number">11</span>);</span><br><span class="line">        config.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> LettuceConnectionFactory(config);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="meta">@Bean(name = &quot;redisTemplate&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title">redisTemplate</span><span class="params">(RedisConnectionFactory factory)</span> </span>&#123;</span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> RedisTemplate&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        template.setConnectionFactory(factory);</span><br><span class="line"></span><br><span class="line">        StringRedisSerializer stringRedisSerializer = <span class="keyword">new</span> StringRedisSerializer();</span><br><span class="line">        template.setKeySerializer(stringRedisSerializer);</span><br><span class="line"></span><br><span class="line">        template.setHashKeySerializer(stringRedisSerializer);</span><br><span class="line"></span><br><span class="line">        GenericJackson2JsonRedisSerializer redisSerializer = <span class="keyword">new</span> GenericJackson2JsonRedisSerializer();</span><br><span class="line">        template.setValueSerializer(redisSerializer);</span><br><span class="line"></span><br><span class="line">        template.setHashValueSerializer(redisSerializer);</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CacheManager <span class="title">cacheManager</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        RedisCacheConfiguration cacheConfiguration = RedisCacheConfiguration.defaultCacheConfig()</span><br><span class="line">                .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(</span><br><span class="line">                        <span class="keyword">new</span> GenericJackson2JsonRedisSerializer())).disableCachingNullValues();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> RedisCacheManager.builder(redisConnectionFactory).cacheDefaults(cacheConfiguration).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>同时实现 <strong>RedisConnectionStateListener</strong>  保证在onRedisConnected,onRedisDisconnected,onRedisExceptionCaught下运行时的调用注意下列触发事件需要在RedisClient 下注册进去,保证后续的调用成功</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class CustomRedisConnectionStateListener implements RedisConnectionStateListener &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onRedisConnected(RedisConnection connection) &#123;</span><br><span class="line">        &#x2F;&#x2F; 处理连接成功的逻辑</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onRedisDisconnected(RedisConnection connection) &#123;</span><br><span class="line">        &#x2F;&#x2F; 处理连接断开的逻辑</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onRedisExceptionCaught(RedisConnection connection, Throwable exception) &#123;</span><br><span class="line">        &#x2F;&#x2F; 处理连接异常的逻辑</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Windows下bat脚本文件编写" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/282c310f.html" class="article-date">
      <time datetime="2023-07-02T06:32:34.000Z" itemprop="datePublished">2023-07-02</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/282c310f.html">Windows下bat脚本文件编写</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>先给个实例来表示 使用杀死 指定端口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">set default_port&#x3D;8080</span><br><span class="line">set &#x2F;p port&#x3D;type need killed port (press enter for default port %default_port%): %&#x3D;%</span><br><span class="line">if &quot;%port%&quot;&#x3D;&#x3D;&quot;&quot; set &quot;port&#x3D;%default_port%&quot;</span><br><span class="line">rem set &#x2F;p port&#x3D;type need killed port:</span><br><span class="line"></span><br><span class="line">for &#x2F;f &quot;tokens&#x3D;5 delims&#x3D; &quot; %%a IN (&#39;netstat -a -n -o ^| findstr :%port%.*LISTENING&#39;) do (</span><br><span class="line">  set pid&#x3D;%%a</span><br><span class="line">)</span><br><span class="line">if not defined pid (</span><br><span class="line">  echo not found port %port%</span><br><span class="line">) else (</span><br><span class="line">  taskkill &#x2F;F &#x2F;pid %pid%</span><br><span class="line">  echo already kill  %port%</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">set &#x2F;p port&#x3D;type need killed port:</span><br><span class="line">for &#x2F;f &quot;tokens&#x3D;5 delims&#x3D; &quot; %%a IN (&#39;netstat -a -n -o ^| findstr :%port%.*LISTENING&#39;) do (</span><br><span class="line">  set pid&#x3D;%%a</span><br><span class="line">)</span><br><span class="line">if not defined pid (</span><br><span class="line">  echo not found port %port%</span><br><span class="line">) else (</span><br><span class="line">  taskkill &#x2F;F &#x2F;pid %pid%</span><br><span class="line">  echo already kill  %port%</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">set &#x2F;p port&#x3D;type need killed port:</span><br><span class="line">for &#x2F;f &quot;tokens&#x3D;5 delims&#x3D; &quot; %%a IN (&#39;netstat -a -n -o ^| findstr :%port%.*LISTENING&#39;) do (</span><br><span class="line">  set pid&#x3D;%%a</span><br><span class="line">)</span><br><span class="line">if not defined pid (</span><br><span class="line">  echo not found port %port%</span><br><span class="line">) else (</span><br><span class="line">  taskkill &#x2F;F &#x2F;pid %pid%</span><br><span class="line">  echo already kill  %port%</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pause</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>
                              
                          
                    
              <!-- 
              
              <p>先给个实例来表示 使用杀死 指定端口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">set default_port&#x3D;8080</span><br><span class="line">set &#x2F;p port&#x3D;type need killed port (press enter for default port %default_port%): %&#x3D;%</span><br><span class="line">if &quot;%port%&quot;&#x3D;&#x3D;&quot;&quot; set &quot;port&#x3D;%default_port%&quot;</span><br><span class="line">rem set &#x2F;p port&#x3D;type need killed port:</span><br><span class="line"></span><br><span class="line">for &#x2F;f &quot;tokens&#x3D;5 delims&#x3D; &quot; %%a IN (&#39;netstat -a -n -o ^| findstr :%port%.*LISTENING&#39;) do (</span><br><span class="line">  set pid&#x3D;%%a</span><br><span class="line">)</span><br><span class="line">if not defined pid (</span><br><span class="line">  echo not found port %port%</span><br><span class="line">) else (</span><br><span class="line">  taskkill &#x2F;F &#x2F;pid %pid%</span><br><span class="line">  echo already kill  %port%</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">set &#x2F;p port&#x3D;type need killed port:</span><br><span class="line">for &#x2F;f &quot;tokens&#x3D;5 delims&#x3D; &quot; %%a IN (&#39;netstat -a -n -o ^| findstr :%port%.*LISTENING&#39;) do (</span><br><span class="line">  set pid&#x3D;%%a</span><br><span class="line">)</span><br><span class="line">if not defined pid (</span><br><span class="line">  echo not found port %port%</span><br><span class="line">) else (</span><br><span class="line">  taskkill &#x2F;F &#x2F;pid %pid%</span><br><span class="line">  echo already kill  %port%</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">set &#x2F;p port&#x3D;type need killed port:</span><br><span class="line">for &#x2F;f &quot;tokens&#x3D;5 delims&#x3D; &quot; %%a IN (&#39;netstat -a -n -o ^| findstr :%port%.*LISTENING&#39;) do (</span><br><span class="line">  set pid&#x3D;%%a</span><br><span class="line">)</span><br><span class="line">if not defined pid (</span><br><span class="line">  echo not found port %port%</span><br><span class="line">) else (</span><br><span class="line">  taskkill &#x2F;F &#x2F;pid %pid%</span><br><span class="line">  echo already kill  %port%</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pause</span><br><span class="line"></span><br></pre></td></tr></table></figure>


               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-postgresql查询表结构和表字段" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/eadc1bcb.html" class="article-date">
      <time datetime="2023-06-04T08:11:45.000Z" itemprop="datePublished">2023-06-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/eadc1bcb.html">postgresql查询表结构和表字段已经合并多个空间类型geometry的表</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>现在有个需要查询postgresql下表的信息同时统计表下的geometry的数目和对应类型,如果有多个geometry需要合并为一条返回.下面是查询的步骤和考虑.</p>
<ol>
<li>查询pg_statio_all_tables </li>
<p>
                              
                          
                    
              <!-- 
              
              <p>现在有个需要查询postgresql下表的信息同时统计表下的geometry的数目和对应类型,如果有多个geometry需要合并为一条返回.下面是查询的步骤和考虑.</p>
<ol>
<li>查询pg_statio_all_tables </li>
</ol>
<blockquote>
<p> SELECT * FROM  pg_catalog.pg_statio_all_tables WHERE schemaname = ‘public’</p>
</blockquote>
<p>上面SQL主要是查询catalog下面的目录在public为schema下的表数据</p>
<ol start="2">
<li>查询information_schema.tables</li>
</ol>
<blockquote>
<p>SELECT * FROM  information_schema.tables WHERE table_schema = ‘public’ ;</p>
</blockquote>
<p>上面的SQL其实类似但是整体条SQL会包含很多 内置的表非常不考虑使用</p>
<ol start="3">
<li>查询geometry_columns </li>
</ol>
<blockquote>
<p>select f_table_name ,type,COUNT(f_table_name) as geomcount from geometry_columns WHERE f_table_schema = ‘public’  GROUP BY f_table_name ;</p>
</blockquote>
<p>是查询对应的 geometry_columns  表下记录的geometry的字段和对应的类型(点,线,面,多点…等)</p>
<ol start="4">
<li>联合查询 pg_catalog.pg_statio_all_tables 和geometry_columns </li>
</ol>
<blockquote>
<p>SELECT<br>    gc.type AS geo_type,<br>    pg_statio_all_tables.relname,<br>    obj_description(relid) AS description,<br>    pg_total_relation_size(relid) / pg_column_size(relid::regclass) AS data_size,<br>    COUNT(<em>) as num_duplicates<br>FROM<br>    pg_catalog.pg_statio_all_tables<br>    LEFT OUTER JOIN geometry_columns AS gc ON gc.f_table_name = relname<br>WHERE schemaname = ‘public’<br>GROUP BY geo_type, relname<br>HAVING COUNT(</em>) &gt; 1;</p>
</blockquote>
<p>这个结果只能过滤 一个表有多个geometry的表不符合要求</p>
<p>到这一步开始是考虑联合查询,不论是左连接 还是右连接查询</p>
<blockquote>
<p>SELECT f_table_name, MAX(type) AS type ,COUNT(type) geomcount<br>FROM geometry_columns   WHERE f_table_schema = ‘public’   GROUP BY f_table_name</p>
</blockquote>
<p>查询 geometry_columns    过滤需要用到 MAX函数,而不是distinct .</p>
<p>distinct 的这种方式例子如下</p>
<blockquote>
<p>SELECT f_table_name, type, COUNT(*) as count<br>FROM (<br>    SELECT DISTINCT ON (f_table_name) f_table_name, type<br>    FROM geometry_columns<br>    ORDER BY f_table_name, type<br>) subquery<br>GROUP BY f_table_name;</p>
</blockquote>
<p>查询结果其实也是会重复,而且拿不到重复的的geometry的type不合适.</p>
<ol start="5">
<li>最终版方式</li>
</ol>
<blockquote>
<p>SELECT<br>    gc.type AS geo_type,<br>    pg_statio_all_tables.relname,<br>    obj_description(relid) AS description,<br>    pg_total_relation_size(relid) / pg_column_size(relid::regclass) AS data_size,<br>          gc.geomcount<br>FROM<br>    pg_catalog.pg_statio_all_tables<br>    LEFT OUTER JOIN (SELECT f_table_name,<br>       MAX(type) AS type ,COUNT(type) geomcount<br>FROM geometry_columns  GROUP BY f_table_name ) AS gc ON gc.f_table_name = relname<br>WHERE schemaname = ‘public’ </p>
</blockquote>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-删除自动添加的美式键盘" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/881d194.html" class="article-date">
      <time datetime="2023-05-19T00:41:17.000Z" itemprop="datePublished">2023-05-19</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/881d194.html">删除自动添加的美式键盘</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>其实window默认是可以删除美式键盘的,比较笨的方式是使用第三方的中文输入法可以管理</p>
<h2 id="1-初级方式"><a href="#1-初级方式" class="headerlink" title="1.初级方式"></a>1.初级方式</h2><p>比如这种</p>
<p><img src="../img/image-20230604162718487.png" alt="image-20230604162718487"></p>
<p>
                              
                          
                    
              <!-- 
              
              <p>其实window默认是可以删除美式键盘的,比较笨的方式是使用第三方的中文输入法可以管理</p>
<h2 id="1-初级方式"><a href="#1-初级方式" class="headerlink" title="1.初级方式"></a>1.初级方式</h2><p>比如这种</p>
<p><img src="../img/image-20230604162718487.png" alt="image-20230604162718487"></p>
<p>如果这种删除不了可以考虑添加美式键盘然后在删除</p>
<h2 id="2-添加英文-美式-再删除"><a href="#2-添加英文-美式-再删除" class="headerlink" title="2. 添加英文(美式)再删除"></a>2. 添加英文(美式)再删除</h2><p><img src="../img/image-20230604162844278.png" alt="image-20230604162844278"></p>
<h2 id="3-其他软件自动添加"><a href="#3-其他软件自动添加" class="headerlink" title="3. 其他软件自动添加"></a>3. 其他软件自动添加</h2><p>在window平台会自动添加美式输入法,比如一些英文游戏steam上的,我这边是又有装了 Windows11平台的资源管理器拓展 explorer patcher ,它会自动添加美式输入法,考虑卸载对应软件:),</p>
<p>使用这两个文件</p>
<p>Remove_en-US.bat</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">control intl.cpl,, &#x2F;f:&quot;%CD%\Remove_en-US.xml&quot;</span><br></pre></td></tr></table></figure>

<p>Remove_en-US.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;gs:GlobalizationServices xmlns:gs&#x3D;&quot;urn:longhornGlobalizationUnattend&quot;&gt;</span><br><span class="line">    &lt;!--User List--&gt;</span><br><span class="line">    &lt;gs:UserList&gt;</span><br><span class="line">        &lt;gs:User UserID&#x3D;&quot;Current&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;gs:UserList&gt;</span><br><span class="line">    &lt;!--input preferences--&gt;</span><br><span class="line">    &lt;gs:InputPreferences&gt;</span><br><span class="line">        &lt;!--add en-US keyboard input--&gt;</span><br><span class="line">        &lt;gs:InputLanguageID Action&#x3D;&quot;add&quot; ID&#x3D;&quot;0409:00000409&quot;&#x2F;&gt;</span><br><span class="line">        &lt;!--remove en-US keyboard input--&gt;</span><br><span class="line">        &lt;gs:InputLanguageID Action&#x3D;&quot;remove&quot; ID&#x3D;&quot;0409:00000409&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;gs:InputPreferences&gt;</span><br><span class="line">&lt;&#x2F;gs:GlobalizationServices&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>两个文件放在一起可以运行Remove_en-US.bat</p>
<p><a target="_blank" rel="noopener" href="https://answers.microsoft.com/zh-hans/windows/forum/all/%E5%85%B3%E4%BA%8E%E8%BE%93%E5%85%A5%E6%B3%95/5411865a-2a25-469b-86be-3643ff34749e">关于输入法栏删掉ು - Microsoft Community</a></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-geotools中关于filter和ECQL的介绍" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/a0ce9eb1.html" class="article-date">
      <time datetime="2023-05-07T12:13:03.000Z" itemprop="datePublished">2023-05-07</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/a0ce9eb1.html">Geotools中关于filter和ECQL的介绍</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><h2 id="filter和ECQL的介绍"><a href="#filter和ECQL的介绍" class="headerlink" title="filter和ECQL的介绍"></a>filter和ECQL的介绍</h2><p>在geotools中有datastore就需要对应数据源的查询这边是基于opengis定义的接口来定义现在先看下</p>
<p>filter这个类的介绍</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public interface Filter &#123;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;使用Filter.INCLUDE过滤集合将会返回原始集合。</span><br><span class="line">    IncludeFilter INCLUDE &#x3D; new IncludeFilter();</span><br><span class="line">    </span><br><span class="line">	&#x2F;&#x2F;使用Filter.EXCLUDE过滤集合将会返回空集合。</span><br><span class="line">    ExcludeFilter EXCLUDE &#x3D; new ExcludeFilter();</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">	&#x2F;&#x2F;给定一个对象，确定此过滤器对象所表示的测试是否通过。如果测试通过，则返回true，否则返回false</span><br><span class="line">    boolean evaluate(Object object);</span><br><span class="line"></span><br><span class="line"> 	 &#x2F;&#x2F;接受一个访问者(FilterVisitor)。实现所有子接口必须具有以下内容的方法:</span><br><span class="line"> 	 &#x2F;&#x2F;visitor.visit(this, extraData);</span><br><span class="line">    Object accept(FilterVisitor visitor, Object extraData);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>
                              
                          
                    
              <!-- 
              
              <h2 id="filter和ECQL的介绍"><a href="#filter和ECQL的介绍" class="headerlink" title="filter和ECQL的介绍"></a>filter和ECQL的介绍</h2><p>在geotools中有datastore就需要对应数据源的查询这边是基于opengis定义的接口来定义现在先看下</p>
<p>filter这个类的介绍</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public interface Filter &#123;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;使用Filter.INCLUDE过滤集合将会返回原始集合。</span><br><span class="line">    IncludeFilter INCLUDE &#x3D; new IncludeFilter();</span><br><span class="line">    </span><br><span class="line">	&#x2F;&#x2F;使用Filter.EXCLUDE过滤集合将会返回空集合。</span><br><span class="line">    ExcludeFilter EXCLUDE &#x3D; new ExcludeFilter();</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">	&#x2F;&#x2F;给定一个对象，确定此过滤器对象所表示的测试是否通过。如果测试通过，则返回true，否则返回false</span><br><span class="line">    boolean evaluate(Object object);</span><br><span class="line"></span><br><span class="line"> 	 &#x2F;&#x2F;接受一个访问者(FilterVisitor)。实现所有子接口必须具有以下内容的方法:</span><br><span class="line"> 	 &#x2F;&#x2F;visitor.visit(this, extraData);</span><br><span class="line">    Object accept(FilterVisitor visitor, Object extraData);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下面是使用Filter查询Geometry类型为Point且位于指定矩形区域内的要素的示例代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;创建一个矩形过滤器</span><br><span class="line">Filter filter &#x3D; FF.and(</span><br><span class="line">    FF.equal(FF.property(&quot;geometry&quot;).getType(), FF.literal(&quot;Point&quot;)),</span><br><span class="line">    FF.bbox(&quot;geometry&quot;, -180, -90, 180, 90, &quot;EPSG:4326&quot;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;应用过滤器获取要素集合</span><br><span class="line">SimpleFeatureCollection features &#x3D; featureSource.getFeatures(filter);</span><br></pre></td></tr></table></figure>





<p>ECQL对应filter跟一步封装我们只需要传入参数和对应方法,用一个字符串来传入即可,它基于OGC标准并支持更多的查询操作。与Filter不同的是，ECQL使用类SQL语法编写查询表达式，并可以执行更复杂的查询，例如计算距离或使用正则表达式匹配属性值。下面是使用ECQL查询两个图层之间距离小于指定值的示例代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;创建一个ECQL查询表达式</span><br><span class="line">String query &#x3D; &quot;DWITHIN(geometry, POINT(0 0), 100, meters)&quot;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;应用查询获取要素集合</span><br><span class="line">SimpleFeatureCollection features &#x3D; featureSource.getFeatures(ECQL.toFilter(query));</span><br></pre></td></tr></table></figure>

<p>需要注意的是，ECQL的语法相对复杂</p>
<h2 id="实现的原理"><a href="#实现的原理" class="headerlink" title="实现的原理"></a>实现的原理</h2><p>很简单的逻辑对于不同的数据源其实很多方法是不一样的对应数据库也许有对应的函数,对应shp文件这种也许我们只能在内存中操作,对应gpkg这种也许有其他的方式来计算</p>
<p>对应filter通常有两种 </p>
<ul>
<li>一种是属性的判断 类似&lt; &gt; = like 这种</li>
<li>第二种是 geometry 判断拓扑关系 相交,包含,相切,相离 <del>还有可能是运行 切割或者分离</del></li>
</ul>
<p>所以这里有定义一个抽象类来定义了要参考</p>
<p><strong>AbstractFilterVisitor</strong>： FilterVisitor 的抽象实现类，提供了一些通用的方法，例如visit(Filter)和visitNullFilter()等。</p>
<p><strong>DefaultFilterVisitor</strong> ：FilterVisitor的默认实现类，提供了对所有Filter对象的访问方法，例如visit(EqualsFilter)、visit(GreaterThanFilter)等。</p>
<p><strong>ECQLFilterVisitor</strong> ：FilterVisitor的ECQL实现类，用于解析ECQL表达式。ECQLFilterVisitor提供了一组visit方法，用于访问ECQL表达式中的不同类型的Filter对象。</p>
<p><strong>SQLFilterVisitor</strong> ：FilterVisitor的SQL实现类，用于将Filter对象转换为SQL语句。SQLFilterVisitor提供了一组visit方法，用于访问不同类型的Filter对象，并将其转换为SQL语句。</p>
<p> <strong>ComparisonFilter</strong> : 这是一个用于比较的过滤器类，它根据给定条件对值进行比较。常见的例子包括大于、小于、等于等比较操作符。使用该类可以方便快捷地进行数据筛选和排序。</p>
<p> <strong>LogicFilter</strong>: 这是一个用于逻辑运算的过滤器类，它可以将多个过滤器连接起来，并根据给定的逻辑关系进行组合。例如，可以使用 And 或 Or 运算符将两个或更多的过滤器连接在一起，以实现复杂的查询需求。</p>
<p>举例子来看一读取gpkg数据来看</p>
<p>对应空间查询最后走到GeoPkgDialect下的simpleSpatialSearch来拼接SQL查询拓扑关系</p>
<p>里面有filter.accept()来判断</p>
<p><img src="../img/1280X1280.PNG" alt="1280X1280"></p>
<p>最后还是走到JDBCDataStore下的selectSQLPS方法下执行对应的sql来实现的查询</p>
<p><img src="../img/output11111.png" alt="output"></p>
<p>在geotools中会多次走到重复的方法,会有一定的误导作用主要是反射和部分结构设计导致的,需要我们在特定实现的类上面打断点会好很多</p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-SDK开发整理" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/416e1d94.html" class="article-date">
      <time datetime="2023-04-15T15:50:04.000Z" itemprop="datePublished">2023-04-15</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/416e1d94.html">SDK开发整理和接口设计</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><h2 id="对于SDK的设计"><a href="#对于SDK的设计" class="headerlink" title="对于SDK的设计"></a>对于SDK的设计</h2><p>这边先整理一个大概的设计方式</p>
<p>先从接口设计来谈起 目前主要是是参考restful风格和asop两个方式,restful风格主要是通过url,requestMethod,requestParam,requestBody来携带参数和标示动作方式</p>
<p>起初是参考<a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2014/05/restful_api.html">RESTful API 设计指南 - 阮一峰的网络日志</a></p>
<p>
                              
                          
                    
              <!-- 
              
              <h2 id="对于SDK的设计"><a href="#对于SDK的设计" class="headerlink" title="对于SDK的设计"></a>对于SDK的设计</h2><p>这边先整理一个大概的设计方式</p>
<p>先从接口设计来谈起 目前主要是是参考restful风格和asop两个方式,restful风格主要是通过url,requestMethod,requestParam,requestBody来携带参数和标示动作方式</p>
<p>起初是参考<a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2014/05/restful_api.html">RESTful API 设计指南 - 阮一峰的网络日志</a></p>
<p>后面主要考虑集合方式 </p>
<ul>
<li><p>get请求会如果字符串查询会出现转义和其他影响.</p>
</li>
<li><p>部分axios框架不支持delete的方式.</p>
</li>
<li><p>post put两者方式和patch区别容易混乱 部分更新和全部字段更新.</p>
</li>
<li><p>对应部分批量删除选择post请求但是我选择用requestBody来删除的时候,会直接用数组来输入,这样确实简单明了,但是不好维护和理解,必要还是需要构建对应的对象来完成.</p>
</li>
</ul>
<p>GET  /dog/{id}?sortby=name&amp;order=asc&amp;page=2&amp;per_page=100  查询单个数据</p>
<p>POST  /dog/query   -requestBody {“param1”:”aaa”,”param2”:”bbb”} 查询批量数据</p>
<p>POST /dog  -requestBody {“param1”:”aaa”,”param2”:”bbb”} 新增</p>
<p>PUT  /dog   -requestBody {“param1”:”aaa”,”param2”:”bbb”} 部分更新</p>
<p>POST  /dog/{id}/delete/   -requestBody {“param1”:”aaa”,”param2”:”bbb”} 删除单个数据</p>
<p>POST  /dog/delete/   -requestBody {“param1”:[11,22,44],”param2”:”bbb”} 删除批量数据</p>
<h2 id="关于SDK的设计"><a href="#关于SDK的设计" class="headerlink" title="关于SDK的设计"></a>关于SDK的设计</h2><p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1798664">SDK 开发规范 - 腾讯云开发者社区-腾讯云</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/scar1et/p/15177861.html">通用类命名规范 - 就永远夏天 - 博客园</a></p>
<p>其实可以参考的比较多主要是</p>
<ol>
<li><em>Client 类：</em>Client 类通常用于与远程服务进行交互，例如通过HTTP请求向API发送请求并获取响应。这些类通常封装了与远程服务的所有交互逻辑，并提供了易于使用的方法，以便开发人员可以轻松地与远程服务进行交互。</li>
<li><em>Helper 类：</em>Helper 类通常包含一些实用方法或函数，这些方法或函数可以用于执行常见的操作。这些方法通常不包含业务逻辑，而是提供了一些工具和辅助函数，以帮助开发人员更轻松地编写代码。</li>
<li><em>Utils 类：</em>Utils 类也是一种实用程序类，但它们通常包含更广泛的功能，并且可能具有更多的业务逻辑。这些类通常提供了一组静态方法，这些方法可以用于执行各种任务，例如字符串处理、日期时间处理、文件操作等等。</li>
</ol>
<hr>
<p>下列类也是经常被用到的可以参考的</p>
<ol>
<li><em>Factory 类：</em>Factory 类通常用于创建对象，这些对象可以是某个接口或抽象类的实例。这些类通常包含一个或多个静态方法，这些方法接受参数并返回一个实例。</li>
<li><em>Builder 类：</em>Builder 类通常用于构建复杂的对象，这些对象可能需要进行多个步骤的构建。这些类通常包含一组方法，每个方法都负责设置一个特定的属性，并返回自身的实例，以便可以链式调用这些方法。</li>
<li><em>Adapter 类：</em>Adapter 类通常用于将一个类的接口转换为另一个类的接口。这些类通常实现了目标接口，并持有一个源对象的引用，以便将源对象的方法映射到目标接口的方法。</li>
<li><em>Decorator 类：</em>Decorator 类通常用于在运行时动态地给对象添加功能，而无需修改原始对象。这些类通常实现了与原始对象相同的接口，并持有一个对原始对象的引用，在运行时添加额外的功能。</li>
</ol>
<p>注意命名<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzIzOTU0NTQ0MA==&mid=2247532818&idx=1&sn=b7267c8a1ed2b38c15ba5728040f443f&chksm=e92a7c1dde5df50b368bf2f872cb9254b5ab19ee0586d0be74c28e5169adbd89d58c3999ffd3&mpshare=1&scene=24&srcid=04172RW1fUxdJlsjRQJUl59b&sharer_sharetime=1681704802354&sharer_shareid=1eaae4cdce27c612a0778b4d4b0007f3#rd">编程中最难的就是命名？这几招教你快速上手</a></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-java中io的优化方向" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/d31a1754.html" class="article-date">
      <time datetime="2023-04-09T06:40:42.000Z" itemprop="datePublished">2023-04-09</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/d31a1754.html">java中io的优化方向</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><h3 id="1-使用缓冲区"><a href="#1-使用缓冲区" class="headerlink" title="1. 使用缓冲区"></a>1. 使用缓冲区</h3><p>在读写文件时，每次都直接操作磁盘会导致性能降低。因此，可以通过使用缓冲区来减少对磁盘的操作次数，从而提高性能。Java 中提供了 <code>BufferedInputStream</code> 和 <code>BufferedOutputStream</code> 类来支持缓冲区的操作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java复制代码&#x2F;&#x2F; 创建输入流缓冲区</span><br><span class="line">BufferedInputStream bis &#x3D; new BufferedInputStream(new FileInputStream(file));</span><br><span class="line">&#x2F;&#x2F; 创建输出流缓冲区</span><br><span class="line">BufferedOutputStream bos &#x3D; new BufferedOutputStream(new FileOutputStream(file));</span><br></pre></td></tr></table></figure>

<p>
                              
                          
                    
              <!-- 
              
              <h3 id="1-使用缓冲区"><a href="#1-使用缓冲区" class="headerlink" title="1. 使用缓冲区"></a>1. 使用缓冲区</h3><p>在读写文件时，每次都直接操作磁盘会导致性能降低。因此，可以通过使用缓冲区来减少对磁盘的操作次数，从而提高性能。Java 中提供了 <code>BufferedInputStream</code> 和 <code>BufferedOutputStream</code> 类来支持缓冲区的操作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java复制代码&#x2F;&#x2F; 创建输入流缓冲区</span><br><span class="line">BufferedInputStream bis &#x3D; new BufferedInputStream(new FileInputStream(file));</span><br><span class="line">&#x2F;&#x2F; 创建输出流缓冲区</span><br><span class="line">BufferedOutputStream bos &#x3D; new BufferedOutputStream(new FileOutputStream(file));</span><br></pre></td></tr></table></figure>

<h3 id="2-使用-NIO"><a href="#2-使用-NIO" class="headerlink" title="2. 使用 NIO"></a>2. 使用 NIO</h3><p>Java 中的 NIO（New I/O）提供了更高效的 I/O 操作方式，可以提高程序的性能。NIO 引入了通道（Channel）、缓冲区（Buffer）等概念，并且支持非阻塞 I/O 操作。相比之下，传统的 Java I/O 通过流式处理数据，较为低效。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java复制代码&#x2F;&#x2F; 创建通道</span><br><span class="line">FileChannel channel &#x3D; FileChannel.open(path, StandardOpenOption.READ);</span><br><span class="line">&#x2F;&#x2F; 创建缓冲区</span><br><span class="line">ByteBuffer buffer &#x3D; ByteBuffer.allocate(1024);</span><br><span class="line">&#x2F;&#x2F; 读取数据到缓冲区</span><br><span class="line">channel.read(buffer);</span><br></pre></td></tr></table></figure>

<h3 id="3-多线程读取文件"><a href="#3-多线程读取文件" class="headerlink" title="3. 多线程读取文件"></a>3. 多线程读取文件</h3><p>当需要读取大量文件时，可以考虑使用多线程来加速读取操作。Java 中可以使用线程池来创建多个线程，并将文件分成多个部分进行读取。这样可以充分利用 CPU 和磁盘的性能，提高程序的效率。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java复制代码&#x2F;&#x2F; 创建固定大小的线程池</span><br><span class="line">ExecutorService executorService &#x3D; Executors.newFixedThreadPool(10);</span><br><span class="line">&#x2F;&#x2F; 将任务分配给不同的线程</span><br><span class="line">for (int i &#x3D; 0; i &lt; files.length; i++) &#123;</span><br><span class="line">    Runnable task &#x3D; new ReadFileTask(files[i]);</span><br><span class="line">    executorService.submit(task);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-数据压缩"><a href="#4-数据压缩" class="headerlink" title="4. 数据压缩"></a>4. 数据压缩</h3><p>读取大量文件时，数据传输的成本可能会很高。因此，可以考虑使用数据压缩技术来减少数据量，从而提高程序的效率。Java 中提供了 <code>GZIPOutputStream</code> 和 <code>GZIPInputStream</code> 等类来支持数据压缩和解压操作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">java复制代码&#x2F;&#x2F; 创建输出流并压缩数据</span><br><span class="line">GZIPOutputStream gos &#x3D; new GZIPOutputStream(new FileOutputStream(file));</span><br><span class="line">gos.write(data);</span><br><span class="line">gos.finish();</span><br><span class="line">gos.close();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 创建输入流并解压数据</span><br><span class="line">GZIPInputStream gis &#x3D; new GZIPInputStream(new FileInputStream(file));</span><br><span class="line">byte[] buffer &#x3D; new byte[1024];</span><br><span class="line">int read &#x3D; -1;</span><br><span class="line">while ((read &#x3D; gis.read(buffer)) !&#x3D; -1) &#123;</span><br><span class="line">    &#x2F;&#x2F; 处理数据</span><br><span class="line">&#125;</span><br><span class="line">gis.close();</span><br></pre></td></tr></table></figure>



<h3 id="5-批量读写数据"><a href="#5-批量读写数据" class="headerlink" title="5. 批量读写数据"></a>5. 批量读写数据</h3><p>在进行大量数据的读取和写入时，可以采用批量操作的方式来提高效率。例如，可以一次性读取或写入多个字节、字符或对象，减少 I/O 操作的频率。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java复制代码&#x2F;&#x2F; 一次性读取多个字节到缓冲区</span><br><span class="line">byte[] buffer &#x3D; new byte[1024];</span><br><span class="line">inputStream.read(buffer, 0, 1024);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 一次性写入多个字符到文件</span><br><span class="line">char[] data &#x3D; &#123;&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;&#125;;</span><br><span class="line">fileWriter.write(data, 0, 2);</span><br></pre></td></tr></table></figure>

<h3 id="6-使用内存映射文件"><a href="#6-使用内存映射文件" class="headerlink" title="6. 使用内存映射文件"></a>6. 使用内存映射文件</h3><p>Java 中的内存映射文件可以将整个文件或者文件的某个部分映射到虚拟内存中，使得可以通过内存地址来访问文件，从而提高程序的效率。内存映射文件通常适用于对大文件的读取和写入操作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java复制代码&#x2F;&#x2F; 将整个文件映射到内存中</span><br><span class="line">RandomAccessFile raf &#x3D; new RandomAccessFile(file, &quot;rw&quot;);</span><br><span class="line">FileChannel channel &#x3D; raf.getChannel();</span><br><span class="line">MappedByteBuffer buffer &#x3D; channel.map(FileChannel.MapMode.READ_WRITE, 0, file.length());</span><br></pre></td></tr></table></figure>

<h3 id="7-原子文件操作"><a href="#7-原子文件操作" class="headerlink" title="7. 原子文件操作"></a>7. 原子文件操作</h3><p>Java 中的 <code>java.nio.file.Files</code> 类提供了一些原子文件操作方法，可以确保文件的读取和写入操作的原子性，从而避免由并发操作引起的问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java复制代码&#x2F;&#x2F; 原子写入字符串到文件</span><br><span class="line">Files.writeString(file, &quot;hello&quot;, StandardOpenOption.WRITE, StandardOpenOption.APPEND);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 原子读取文件到字符串</span><br><span class="line">String content &#x3D; Files.readString(file);</span><br></pre></td></tr></table></figure>

<h3 id="8-磁盘预读取"><a href="#8-磁盘预读取" class="headerlink" title="8. 磁盘预读取"></a>8. 磁盘预读取</h3><p>Java 中可以通过启用磁盘预读取机制来提高程序的效率。磁盘预读取是指在读取文件时，将文件的一部分或者整个文件预先加载到内存中，从而加快读取速度。Java 中可以使用 <code>FileInputStream</code> 类的 <code>getChannel()</code> 方法来获取文件的通道，并使用 <code>map()</code> 方法来实现磁盘预读取。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java复制代码&#x2F;&#x2F; 获取文件通道</span><br><span class="line">FileInputStream fis &#x3D; new FileInputStream(file);</span><br><span class="line">FileChannel channel &#x3D; fis.getChannel();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 将文件映射到内存中</span><br><span class="line">MappedByteBuffer buffer &#x3D; channel.map(FileChannel.MapMode.READ_ONLY, 0, file.length());</span><br></pre></td></tr></table></figure>



<p>以上是一些常用的优化方案，但实际应用时需要根据具体情况进行选择。在从 MongoDB 上读取文件时，可以结合上述方案进行优化，以提高程序的性能。</p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-chatgpt" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/9891105b.html" class="article-date">
      <time datetime="2023-04-09T03:41:16.000Z" itemprop="datePublished">2023-04-09</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/9891105b.html">chatgpt介绍</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><h2 id="名词解析"><a href="#名词解析" class="headerlink" title="名词解析"></a>名词解析</h2><p><strong>AI</strong> :全称Artificial Intelligence，是一种模拟人类智能行为的技术或系统，涵盖了许多不同的技术和方法，包括机器学习、自然语言处理、计算机视觉等，可用于许多领域，如自动驾驶、机器人、医疗诊断等。</p>
<p><strong>ML</strong> :全称Machine Learning 是一种人工智能领域的技术，通过从数据中学习模式和规律来实现智能化决策和行为。机器学习可以分为监督学习、无监督学习和强化学习等不同类型，广泛应用于自然语言处理、计算机视觉、金融、医疗等领域。</p>
<p><strong>Deep Learning</strong> : 一种基于神经网络的机器学习方法，通过模拟人脑的神经网络结构，实现对复杂模式和规律的学习和识别，被广泛应用于自然语言处理、计算机视觉、语音识别等领域，是实现人工智能的重要技术之一。</p>
<p>
                              
                          
                    
              <!-- 
              
              <h2 id="名词解析"><a href="#名词解析" class="headerlink" title="名词解析"></a>名词解析</h2><p><strong>AI</strong> :全称Artificial Intelligence，是一种模拟人类智能行为的技术或系统，涵盖了许多不同的技术和方法，包括机器学习、自然语言处理、计算机视觉等，可用于许多领域，如自动驾驶、机器人、医疗诊断等。</p>
<p><strong>ML</strong> :全称Machine Learning 是一种人工智能领域的技术，通过从数据中学习模式和规律来实现智能化决策和行为。机器学习可以分为监督学习、无监督学习和强化学习等不同类型，广泛应用于自然语言处理、计算机视觉、金融、医疗等领域。</p>
<p><strong>Deep Learning</strong> : 一种基于神经网络的机器学习方法，通过模拟人脑的神经网络结构，实现对复杂模式和规律的学习和识别，被广泛应用于自然语言处理、计算机视觉、语音识别等领域，是实现人工智能的重要技术之一。</p>
<p><strong>CV</strong>，全称Computer Vision，即计算机视觉，是一种利用计算机和数学算法来模拟人类视觉行为的技术，旨在使计算机能够像人类一样理解和解释图像和视频。计算机视觉涵盖了许多领域，如图像处理、模式识别、目标检测、图像分割等，可应用于人脸识别、自动驾驶、智能安防等众多领域。</p>
<p><strong>Transformer</strong> :是一种基于自注意力机制的深度学习模型，最初应用于自然语言处理领域的机器翻译任务。相较于传统的循环神经网络和卷积神经网络，Transformer通过并行计算和全局信息的交互，实现了更快的训练速度和更高的精度，并被广泛应用于自然语言处理、计算机视觉、语音识别等领域。</p>
<p><strong>Reinforcement learning</strong> :是一种机器学习方法，一种通过试错学习来最大化奖励的机器学习方法，旨在让智能体（agent）在与环境的交互中自主探索最优策略，并获得最大化的奖励。Reinforcement Learning可应用于许多领域，如自动驾驶、游戏AI、机器人控制等，是实现人工智能的重要技术之一。在GPT中，强化学习被用于调整模型的生成策略</p>
<p><strong>General Pretrained Transformer</strong> : 一种基于Transformer模型的通用预训练模型，是一种自然语言处理算法，通过在大规模文本数据上进行无监督训练，可以实现对自然语言文本的深度理解和高效处理。GPT模型的应用包括文本生成、文本分类、问答系统等，是自然语言处理领域中的重要技术。</p>
<p><strong>Reinforcement Learning from Human Feedback</strong> (RLHF): 是一种结合了强化学习和人类反馈的方法。该方法在训练模型时，通过让人类提供正面或负面反馈来指导模型的学习。在GPT中，这种方法可以帮助模型更好地理解人类语言，并且可使其生成更加符合人类语言特点的内容。是一种通过人类反馈指导机器学习的方法。与传统的强化学习不同，RLHF使用人类专家或众包工作者提供的奖励信号作为机器学习的反馈，以加速智能体（agent）的学习过程。RLHF的应用包括自然语言处理、计算机视觉、机器人控制等领域，是实现人机协作的重要技术之一。</p>
<p><strong>NLP(自然语言处理)</strong> : 自然语言处理（Natural Language Processing）的缩写，指的是计算机科学、人工智能和语言学等多个领域的交叉学科，致力于研究如何使计算机能够理解、处理和生成人类语言。NLP的应用包括机器翻译、情感分析、问答系统、文本分类等多个领域，是实现计算机与人类语言交互的重要技术之一。</p>
<p>​    AI的起源可以追溯到20世纪40年代，随着计算机技术的发展，研究人员开始尝试通过机器模拟人类智能。在20世纪50年代至60年代，出现了“逻辑推理”、“神经网络”等多个重要的AI研究方向。70年代后，AI开始应用于专家系统、机器视觉等领域，但在80年代后半期，由于技术和资源的限制，AI的发展进入了低谷。21世纪初，随着深度学习等技术的出现，AI得到了长足的发展，目前已经成为各行业的热门领域。</p>
<h2 id="1-机器学习（Machine-Learning）"><a href="#1-机器学习（Machine-Learning）" class="headerlink" title="1. 机器学习（Machine Learning）"></a>1. 机器学习（Machine Learning）</h2><ul>
<li><strong>特点</strong>：机器学习是一种人工智能技术，它通过让计算机根据数据自动学习模型，从而实现对未知数据进行预测或决策。机器学习主要分为有监督学习、无监督学习和强化学习三种类型。</li>
<li><strong>介绍</strong>：机器学习是目前最火热的技术之一，它应用于各个领域，如商业、医疗、金融等。利用机器学习，我们可以让机器自动地完成一些复杂的任务，如图像识别、语音识别、自然语言处理等。</li>
</ul>
<h2 id="2-深度学习（Deep-Learning）"><a href="#2-深度学习（Deep-Learning）" class="headerlink" title="2. 深度学习（Deep Learning）"></a>2. 深度学习（Deep Learning）</h2><ul>
<li><strong>特点</strong>：深度学习是机器学习的一种，它通过模拟人类神经元网络来构建模型，并利用反向传播算法进行训练，从而实现对数据的预测或决策。深度学习主要应用于图像识别、语音识别、自然语言处理等领域。</li>
<li><strong>介绍</strong>：深度学习是近年来最受关注的技术之一，它取得了一系列重大突破，如AlphaGo战胜围棋世界冠军李世石、自动驾驶汽车等。深度学习有助于解决各种复杂问题，同时也在不断地推进人工智能技术的发展。</li>
</ul>
<h2 id="3-计算机视觉（Computer-Vision）"><a href="#3-计算机视觉（Computer-Vision）" class="headerlink" title="3. 计算机视觉（Computer Vision）"></a>3. 计算机视觉（Computer Vision）</h2><ul>
<li><strong>特点</strong>：计算机视觉是一项涉及图像和视频处理的技术，它利用计算机对数字图像进行分析和处理，从而实现对图像中物体、场景等的理解和识别。计算机视觉主要应用于图像检测、目标跟踪、三维重建、虚拟现实等领域。</li>
<li><strong>介绍</strong>：计算机视觉是一项非常应用广泛的技术，它可以应用到很多领域，如安防、医疗、交通等。随着深度学习技术的发展，计算机视觉的性能也得到了极大地提升。</li>
<li>应用: <em>视觉四小龙</em>(商汤科技、旷视科技、云从科技和依图科技)</li>
</ul>
<h2 id="4-自然语言处理（Natural-Language-Processing）"><a href="#4-自然语言处理（Natural-Language-Processing）" class="headerlink" title="4. 自然语言处理（Natural Language Processing）"></a>4. 自然语言处理（Natural Language Processing）</h2><ul>
<li><strong>特点</strong>：自然语言处理是一种人工智能技术，它利用计算机对自然语言进行处理和理解，从而实现对文本的分析、理解和生成。自然语言处理主要涉及到自然语言标记、词向量表示、文本分类、机器翻译等方面。</li>
<li><strong>介绍</strong>：自然语言处理是一项非常有挑战性的技术，因为自然语言的表达方式非常复杂，同时也存在很多歧义。利用自然语言处理技术，我们可以实现机器翻译、情感分析、智能客服等应用。</li>
<li>应用: GPT,语音识别</li>
</ul>
<h1 id="相关关键词的关系和梳理"><a href="#相关关键词的关系和梳理" class="headerlink" title="相关关键词的关系和梳理"></a>相关关键词的关系和梳理</h1><p>机器学习、深度学习、计算机视觉和自然语言处理这四个概念之间存在一定的包含关系，具体如下：</p>
<ul>
<li>机器学习是一个大的概念，它包括了深度学习在内。深度学习是机器学习中的一种方法，它利用神经网络模拟大脑的处理过程，实现对数据的特征提取和分类。因此可以说深度学习是机器学习的一种重要分支。</li>
<li>计算机视觉是机器学习和深度学习在图像或视频领域的应用。计算机视觉需要训练模型来识别图像或视频中的物体、场景等，从而实现对图像或视频的理解和识别。因此，计算机视觉可以被看作是机器学习和深度学习在图像或视频领域的应用之一。</li>
<li>自然语言处理是机器学习和深度学习在文本领域的应用。自然语言处理需要训练模型来识别文本中的词汇、语法、语义等，从而实现对文本的分析和生成。因此，自然语言处理可以被看作是机器学习和深度学习在文本领域的应用之一。</li>
</ul>
<h1 id="ChatGPT"><a href="#ChatGPT" class="headerlink" title="ChatGPT"></a>ChatGPT</h1><p>​    ChatGPT是由OpenAI开发的一个大型自然语言处理模型，它基于GPT（Generative Pre-trained Transformer）算法，并使用了海量的语料数据进行预训练。ChatGPT在对话生成、情感分析、文本生成等方面表现出色，其生成的回复流畅自然，能够与人类进行高质量的交互。ChatGPT已经被广泛应用于智能客服、虚拟助手、聊天机器人等领域，为用户提供了更加便捷、高效的服务体验。同时，ChatGPT也为自然语言处理技术的发展做出了重要贡献，推动了自然语言处理技术的不断进步和发展。</p>
<p>在gpt和类似的 <a target="_blank" rel="noopener" href="https://yiyan.baidu.com/">文心一言</a> ,<a target="_blank" rel="noopener" href="https://bard.google.com/">Bard</a>,等LLM( large language model )大语言模型中参数是非常重要的,通常都是多少多少亿,其实这些参数是该模型中的可调整变量，通过不断地学习和优化，可以使ChatGPT在各种自然语言任务上表现出色。具体来说，ChatGPT中的这175亿个参数主要有以下作用：</p>
<ol>
<li>语言表示：ChatGPT的主要任务是生成自然语言文本，因此它需要深入理解语言的结构、语法以及意义等方面。这些参数能够帮助ChatGPT学习到更加准确、丰富的语言表示形式，从而更好地表达和理解人类语言。</li>
<li>上下文理解：在对话生成和文本生成任务中，上下文信息对于生成的内容非常重要。ChatGPT的参数可以捕获历史上下文信息，并利用这些信息来生成更加合适、连贯的回复或文本内容。</li>
<li>预测能力：ChatGPT中的参数能够帮助模型预测下一个单词或字符的概率分布，从而决定生成的文本内容。这些参数的精度和数量越高，模型预测的准确性也就越高。</li>
</ol>
<p>总之，ChatGPT的175亿个参数起到了至关重要的作用，它们能够帮助模型对自然语言进行深入理解和表达，并且能够生成高质量、连贯的文本内容。同时，这些参数也代表了当今自然语言处理技术的前沿水平，展示了人工智能技术在自然语言处理领域的强大潜力。</p>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%9D%B0%E5%BC%97%E9%87%8C%C2%B7%E8%BE%9B%E9%A1%BF">杰弗里·辛顿 <strong>Geoffrey Everest Hinton</strong></a> 开山鼻祖</p>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%9D%A8%E7%AB%8B%E6%98%86">杨立昆,<strong>扬·勒丘恩</strong>  <strong>Yann Le Cun</strong></a> :卷积网络之父,现在ocr的基础</p>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%BA%A6%E4%B9%A6%E4%BA%9A%C2%B7%E6%9C%AC%E5%B8%8C%E5%A5%A5">约书亚·本希奥 <strong>Yoshua Bengio</strong></a> <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%92%99%E7%89%B9%E5%A9%81%E5%A4%A7%E5%AD%B8">蒙特利尔大学</a>计算机科学和运筹学系的教授以及<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/w/index.php?title=%E8%92%99%E7%89%B9%E5%A9%81%E5%AD%B8%E7%BF%92%E7%AE%97%E6%B3%95%E7%A0%94%E7%A9%B6%E6%89%80&action=edit&redlink=1">蒙特利尔学习算法研究所</a>科学主任</p>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/zh-cn/%E4%BC%8A%E7%88%BE%E4%BA%9E%C2%B7%E8%98%87%E8%8C%A8%E5%85%8B%E7%B6%AD">伊尔亚·苏茨克维 - Ilya Sutskever</a> openAI的联合创始人,在开山鼻祖麾下读完研究生,和<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E4%BA%9E%E6%AD%B7%E5%85%8B%E6%96%AF%C2%B7%E5%85%8B%E9%87%8C%E6%BE%A4%E5%A4%AB%E6%96%AF%E5%9F%BA">亚历克斯·克里泽夫斯基</a>和<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%9D%B0%E5%BC%97%E9%87%8C%C2%B7%E8%BE%9B%E9%A1%BF">杰弗里·辛顿</a>是<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C">卷积神经网络</a><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/AlexNet">AlexNet</a>的共同发明人</p>
<p>最后这篇文章是一遍问ChatGPT一边结合自己理解生成的</p>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Large_language_model">Large language model - Wikipedia</a></p>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%B2%9D%E6%B0%8F%E7%B6%B2%E8%B7%AF">贝叶斯网络 - 维基百科，自由的百科全书</a></p>
<p><a target="_blank" rel="noopener" href="https://ai-scholar.tech/zh/learn/c0/0-1">0-1.了解人工智能、机器学习和深度学习的区别! | AI-SCHOLAR | AI：（人工智能）文章和技术信息媒体</a></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-springmvc配置gson的解析" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/1a9fa948.html" class="article-date">
      <time datetime="2023-04-09T03:29:35.000Z" itemprop="datePublished">2023-04-09</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/1a9fa948.html">springmvc配置gson的解析</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>springmvc 排除jackson如果使用后使用Gson</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication(exclude&#x3D; &#123;DataSourceAutoConfiguration.class,JacksonAutoConfiguration.class&#125;)</span><br></pre></td></tr></table></figure>

<p>
                              
                          
                    
              <!-- 
              
              <p>springmvc 排除jackson如果使用后使用Gson</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication(exclude&#x3D; &#123;DataSourceAutoConfiguration.class,JacksonAutoConfiguration.class&#125;)</span><br></pre></td></tr></table></figure>



<p><img src="../img/output111.png" alt="output"></p>
<p>在autoconfig下gson的配置</p>
<p><img src="../img/image-20230409113435819.png" alt="image-20230409113435819">如果直接使用expose注解后不会直接生效需要重新bean注入到</p>
<p>需要gson注入bean到spring里面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">new GsonBuilder()</span><br><span class="line">        .addSerializationExclusionStrategy(new ExclusionStrategy() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public boolean shouldSkipField(FieldAttributes fieldAttributes) &#123;</span><br><span class="line">                final Expose expose &#x3D; fieldAttributes.getAnnotation(Expose.class);</span><br><span class="line">                return expose !&#x3D; null &amp;&amp; !expose.serialize();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public boolean shouldSkipClass(Class&lt;?&gt; aClass) &#123;</span><br><span class="line">                return false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .addDeserializationExclusionStrategy(new ExclusionStrategy() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public boolean shouldSkipField(FieldAttributes fieldAttributes) &#123;</span><br><span class="line">                final Expose expose &#x3D; fieldAttributes.getAnnotation(Expose.class);</span><br><span class="line">                return expose !&#x3D; null &amp;&amp; !expose.deserialize();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public boolean shouldSkipClass(Class&lt;?&gt; aClass) &#123;</span><br><span class="line">                return false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .create();</span><br></pre></td></tr></table></figure>








<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/4802887/gson-how-to-exclude-specific-fields-from-serialization-without-annotations#:~:text=I%20explicitly%20used-,%40Expose%20to%20exclude,-it.%20I%20used">https://stackoverflow.com/questions/4802887/gson-how-to-exclude-specific-fields-from-serialization-without-annotations#:~:text=I%20explicitly%20used-,%40Expose%20to%20exclude,-it.%20I%20used</a></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-mybatis回顾" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/cf22bc7c.html" class="article-date">
      <time datetime="2023-04-04T12:06:54.000Z" itemprop="datePublished">2023-04-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/cf22bc7c.html">mybatis回顾兼顾分析Invalid bound statement (not found)的问题</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>项目中需要使用mybatis原生,之前都是使用mybatis plus或者mybatis pagehelper,突然使用偏原生,主要是xml中的简单增删改查都需要手动机械的实现真的是相当死板,搜索一下发型mybatisx这个插件非常好用,没有考虑mybatis pro那个插件插件使用介绍在下面,之前很多mybatis代码生成需要mybatis maven插件配置一堆真的是非常不友好,使用这个插件只需要利用idea连接对应插件即可使用,配置下后生成对应的xml和mapper代码和domain/entity对象,简直是神器.</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wyr1235/article/details/124590032">mybatis—mybatis插件根据接口自动生成xml文件_mybatis xml 生成插件_任何时候都要勇敢的博客-CSDN博客</a></p>
<p>后面依照这个配置一步一步走下去没什么问题</p>
<p>
                              
                          
                    
              <!-- 
              
              <p>项目中需要使用mybatis原生,之前都是使用mybatis plus或者mybatis pagehelper,突然使用偏原生,主要是xml中的简单增删改查都需要手动机械的实现真的是相当死板,搜索一下发型mybatisx这个插件非常好用,没有考虑mybatis pro那个插件插件使用介绍在下面,之前很多mybatis代码生成需要mybatis maven插件配置一堆真的是非常不友好,使用这个插件只需要利用idea连接对应插件即可使用,配置下后生成对应的xml和mapper代码和domain/entity对象,简直是神器.</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wyr1235/article/details/124590032">mybatis—mybatis插件根据接口自动生成xml文件_mybatis xml 生成插件_任何时候都要勇敢的博客-CSDN博客</a></p>
<p>后面依照这个配置一步一步走下去没什么问题</p>
<p>按照步骤: <a target="_blank" rel="noopener" href="https://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/zh/index.html">https://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/zh/index.html</a></p>
<p><a target="_blank" rel="noopener" href="https://tobebetterjavaer.com/springboot/mybatis.html#%E9%80%9A%E8%BF%87-mybatis-plus-%E5%A2%9E%E5%BC%BA">Spring Boot 整合 MyBatis | Java进阶之路</a></p>
<p><a target="_blank" rel="noopener" href="https://netfilx.github.io/spring-boot/4.%E6%95%B4%E5%90%88mybatis/mybaits">SpringBoot整合mybatis</a></p>
<p>]</p>
<p>但是后面一直出现Invalid bound statement (not found)</p>
<p>想着这种一定是我配置出错,网上搜索都是</p>
<ol>
<li><p>mapperscan的配置</p>
</li>
<li><p>mybatis.config-location=classpath*:**/mapper/*Mapper.xml</p>
</li>
<li><p>xml下的namespace要写正确</p>
</li>
</ol>
<p>认真对了几遍以为是自己没按照模板来,但是mybatisx这个插件都能正常解析,真的是头大,确认再三一定是mybatis加载对应statement的时候没加载到在看到这篇文章后我大概确定了</p>
<p>MapperAnnotationBuilder 下parse 中有loadXmlResource()</p>
<blockquote>
<p>在这里寻找mapper接口对应的xml的资源路径的方式如下：
　　　　</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String xmlResource &#x3D; type.getName().replace(&#39;.&#39;, &#39;&#x2F;&#39;) + &quot;.xml&quot;;</span><br></pre></td></tr></table></figure>

<p>　　替换接口包名中的.为/ 并在接口添加.xml后缀。<br>　　比如：Mapper接口com.hbfec.encrypt.admin.dao.ocr.TestDao的对应的xml资源路径会解析为com/hbfec/encrypt/admin/dao/ocr/TestDao.xml。<br>　　TestDao.xml在我的项目中的路径是classpath:dao/ocr/TestDao.xml,路径与上面解析出来的不一致，mybatis无法找到TestDao.xml，导致以上错误。所以项目采用使用这种方式绑定<strong>Mapper接口和Mapper.xml</strong>的话，<strong>其路径和名称都要一致</strong>。</p>
</blockquote>
<p>所以我项目下resource下面需要有对应的路径,由于太久没写都是直接写mapper导致解析不到</p>
<p>参考<a target="_blank" rel="noopener" href="https://www.cnblogs.com/hopeofthevillage/p/12858565.html">spring boot mybatis 报错Invalid bound statement (not found)解决过程 - 全me村的希望 - 博客园</a></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/4/"> 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/6/">下一页 </a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2025 leek
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by leek <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//lf6-cdn-tos.bytecdntp.com/cdn/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-144246563-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
             tags: ".article-tag a", 
             categories: ".article-category a, a.tag-list-link", 
            
            
            
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

    <script>
        var originTitle = document.title;
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.title = "(つェ⊂) 我藏好了哦~ " + originTitle;
                clearTimeout(titleTime);
            }
            else {
                document.title = "(*´∇｀*) 被你发现啦~ " + originTitle;
                titleTime = setTimeout(function() {
                    document.title = originTitle;
                }, 2000);
            }
        })
    </script>

<script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>