<!DOCTYPE html>
<html lang="zh-cn">
<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="leek" />


    
     
        <meta name="google-site-verification" content="Vl02j4hnvtN2AJ3EfPjyvrHb191mbrnVtUlHgPUKBp0" />
    


<meta property="og:type" content="website">
<meta property="og:title" content="leek 自留地">
<meta property="og:url" content="https://imlike.cc/page/6/index.html">
<meta property="og:site_name" content="leek 自留地">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="leek">
<meta name="twitter:card" content="summary">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="leek 自留地" type="application/atom+xml">



    <link rel="shortcut icon" href="pics/g.jpg">



    <link href="//lf6-cdn-tos.bytecdntp.com/cdn/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//lf6-cdn-tos.bytecdntp.com/cdn/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//lf6-cdn-tos.bytecdntp.com/cdn/pace/1.0.2/pace.min.js"></script>
    <link href="//lf6-cdn-tos.bytecdntp.com/cdn/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">



<link rel="stylesheet" href="/css/style.css">



    <!-- 注释 -->
    <!-- <style> .article { opacity: 0;} </style> -->


<link href="//lf6-cdn-tos.bytecdntp.com/cdn/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>leek 自留地</title>

<script src="//lf6-cdn-tos.bytecdntp.com/cdn/jquery/2.2.4/jquery.min.js"></script>
<script src="//lf6-cdn-tos.bytecdntp.com/cdn/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//lf6-cdn-tos.bytecdntp.com/cdn/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//lf6-cdn-tos.bytecdntp.com/cdn/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






<meta name="generator" content="Hexo 5.2.0"></head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="https://pic.superbed.cn/item/5c9f2d213a213b04176522d4" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/"></a></h1>
        </hgroup>

        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="true" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:s@yandex.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" rel="noopener" href="https://github.com/bigleek" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa Google" target="_blank" rel="noopener" href="https://plus.google.com/bigleekcode" title="Google"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Yelee/" rel="tag">Yelee</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Yilia/" rel="tag">Yilia</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/activiti/" rel="tag">activiti</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/alist/" rel="tag">alist</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/axios/" rel="tag">axios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/binary/" rel="tag">binary</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ceph/" rel="tag">ceph</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/clickhouse/" rel="tag">clickhouse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloud/" rel="tag">cloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/container/" rel="tag">container</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deepin/" rel="tag">deepin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/" rel="tag">elasticsearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsraech/" rel="tag">elasticsraech</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/" rel="tag">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flyio/" rel="tag">flyio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gdal/" rel="tag">gdal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitlab/" rel="tag">gitlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gnome/" rel="tag">gnome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo%E4%B8%BB%E9%A2%98/" rel="tag">hexo主题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/intellj/" rel="tag">intellj</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdk/" rel="tag">jdk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jenkins/" rel="tag">jenkins</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/" rel="tag">k8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kibana/" rel="tag">kibana</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kubernetes/" rel="tag">kubernetes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kuboard/" rel="tag">kuboard</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mail/" rel="tag">mail</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/" rel="tag">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nas/" rel="tag">nas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/no-ad/" rel="tag">no_ad</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/onedrive/" rel="tag">onedrive</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/orientDb/" rel="tag">orientDb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/" rel="tag">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/post/" rel="tag">post</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgres/" rel="tag">postgres</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/put/" rel="tag">put</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/repost/" rel="tag">repost</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spotify/" rel="tag">spotify</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/" rel="tag">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/" rel="tag">springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springcloud/" rel="tag">springcloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/" rel="tag">sublime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thunderbolt/" rel="tag">thunderbolt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vmware/" rel="tag">vmware</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vpn/" rel="tag">vpn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/" rel="tag">vscode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue-cli/" rel="tag">vue-cli</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webdav/" rel="tag">webdav</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/" rel="tag">windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wine/" rel="tag">wine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yandex/" rel="tag">yandex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zsh/" rel="tag">zsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%91%E6%92%AD/" rel="tag">云播</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" rel="tag">内网穿透</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A0%E9%80%9F/" rel="tag">加速</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9D%9A%E6%9E%9C%E4%BA%91/" rel="tag">坚果云</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%9F%E5%90%8D/" rel="tag">域名</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A9%E7%BF%BC%E4%BA%91/" rel="tag">天翼云</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91/" rel="tag">开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%A8%E8%8D%90/" rel="tag">推荐</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%90%9C%E7%8B%97%E8%BE%93%E5%85%A5%E6%B3%95/" rel="tag">搜狗输入法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%90%AC%E5%AE%B6/" rel="tag">搬家</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/" rel="tag">知识管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%AB%99/" rel="tag">网站</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%85%BE%E8%AE%AF%E4%BA%91/" rel="tag">腾讯云</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A7%86%E9%A2%91%E6%B5%81/" rel="tag">视频流</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B5%84%E6%BA%90/" rel="tag">资源</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AC%E8%BD%BD/" rel="tag">转载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE/" rel="tag">软件配置</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/" rel="tag">邮件服务</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://imlike.cc/page.html">镜像网站导航</a>
                    
                      <a class="main-nav-link switch-friends-link" target="_blank" rel="noopener" href="https://imcyc.cn/">Morty</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">平时零散的知识</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页"></a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="https://pic.superbed.cn/item/5c9f2d213a213b04176522d4" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页"></a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:s@yandex.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/bigleek" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa Google" target="_blank" href="https://plus.google.com/bigleekcode" title="Google"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-synchronizer-upgrade" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/3b9fc184.html" class="article-date">
      <time datetime="2023-02-02T09:26:30.000Z" itemprop="datePublished">2023-02-02</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/3b9fc184.html">synchronizer_upgrade</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>是一个c++类</p>
<p>ObjectMonitor() {<br>    _header       = NULL;<br>    _count        = 0; //记录个数<br>    _waiters      = 0,<br>    _recursions   = 0;  // 线程重入次数<br>    _object       = NULL;<br>    _owner        = NULL;<br>    _WaitSet      = NULL; // 调用wait方法后的线程会被加入到_WaitSet<br>    _WaitSetLock  = 0 ;<br>    _Responsible  = NULL ;<br>    _succ         = NULL ;<br>    _cxq          = NULL ; // 阻塞队列，线程被唤醒后根据决策判读是放入cxq还是EntryList<br>    FreeNext      = NULL ;<br>    _EntryList    = NULL ; // 没有抢到锁的线程会被放到这个队列<br>    _SpinFreq     = 0 ;<br>    _SpinClock    = 0 ;<br>    OwnerIsThread = 0 ;<br>  }</p>
<p>ObjectMonitor中有五个重要部分，分别为_ower,_WaitSet,_cxq,_EntryList和count。</p>
<p>
                              
                          
                    
              <!-- 
              
              <p>是一个c++类</p>
<p>ObjectMonitor() {<br>    _header       = NULL;<br>    _count        = 0; //记录个数<br>    _waiters      = 0,<br>    _recursions   = 0;  // 线程重入次数<br>    _object       = NULL;<br>    _owner        = NULL;<br>    _WaitSet      = NULL; // 调用wait方法后的线程会被加入到_WaitSet<br>    _WaitSetLock  = 0 ;<br>    _Responsible  = NULL ;<br>    _succ         = NULL ;<br>    _cxq          = NULL ; // 阻塞队列，线程被唤醒后根据决策判读是放入cxq还是EntryList<br>    FreeNext      = NULL ;<br>    _EntryList    = NULL ; // 没有抢到锁的线程会被放到这个队列<br>    _SpinFreq     = 0 ;<br>    _SpinClock    = 0 ;<br>    OwnerIsThread = 0 ;<br>  }</p>
<p>ObjectMonitor中有五个重要部分，分别为_ower,_WaitSet,_cxq,_EntryList和count。</p>
<p>_ower 用来指向持有monitor的线程，它的初始值为NULL,表示当前没有任何线程持有monitor。当一个线程成功持有该锁之后会保存线程的ID标识，等到线程释放锁后_ower又会被重置为NULL;<br>_WaitSet 调用了锁对象的wait方法后的线程会被加入到这个队列中；<br>_cxq  是一个阻塞队列，线程被唤醒后根据决策判读是放入cxq还是EntryList;<br>_EntryList 没有抢到锁的线程会被放到这个队列；<br>count 用于记录线程获取锁的次数，成功获取到锁后count会加1，释放锁时count减1。</p>
<p>当有一个线程获得synchronized锁后，monitor对象中的count就会被加1，并且会将这个线程的id存入到monitor的_ower中。此时，如果其他线程来尝试拿锁则会被放入到_EntryList队列中阻塞。<br>还记得上一节中我们立的一个Flag了吗？synchronized锁的是container对象，而wait和notify也是container对象的方法，这么一看我们上一节中留下的问题就有些眉目了。是不是调用wait方法的时候线程也会被加入到一个等待队列，而等到notify或者notifyAll的时候再从等待队列中将线程唤醒呢？关于这个问题在这一次，彻底搞懂Java中的synchronized关键字这篇文章中其实已经有解读了，就是调用wait方法的线程会被加入到一个_WaitSet集合中，并会将线程挂起。但是，这里要再次强调一下_WaitSet与_EntryList这两个集合。_EntryList集合中存放的是没有抢到锁，而被阻塞的线程，而_WaitSet集合中存放的是调用了wait方法后，处于等待状态的线程。**<br><a target="_blank" rel="noopener" href="https://juejin.cn/post/6977993272538955806">这一次，彻底搞懂Java并发包中的Atomic原子类 - 掘金</a><br><a target="_blank" rel="noopener" href="https://juejin.cn/post/6975435256111300621">这一次，彻底搞懂Java中的ReentrantLockt实现原理 - 掘金</a></p>
<p>作者：赌一包辣条<br>链接：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6973571891915128846">https://juejin.cn/post/6973571891915128846</a><br>来源：稀土掘金<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-ConcurrentHashMap解析-转载" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/b7c8f71.html" class="article-date">
      <time datetime="2023-02-02T03:41:43.000Z" itemprop="datePublished">2023-02-02</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/b7c8f71.html">ConcurrentHashMap解析-转载</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p><a target="_blank" rel="noopener" href="https://qwerhuan.gitee.io/2020/12/09/java/hashmap-xiang-guan-lei-jie-xi/">HashMap相关类：Hashtable、LinkHashMap、TreeMap | HuanBlog</a> </p>
<p><a target="_blank" rel="noopener" href="https://qwerhuan.gitee.io/2020/12/07/java/shen-ru-jie-xi-concurrenthashmap-gan-shou-bing-fa-bian-cheng-zhi-hui/">深入解析ConcurrentHashMap：感受并发编程智慧 | HuanBlog</a></p>
<p>本次先简要讨论ConcurrentHashMap 顺便讨论下HashMap,HashTable这些Map的数据的结构,线程安全,在get,put部分的业务逻辑</p>
<p>
                              
                          
                    
              <!-- 
              
              <p><a target="_blank" rel="noopener" href="https://qwerhuan.gitee.io/2020/12/09/java/hashmap-xiang-guan-lei-jie-xi/">HashMap相关类：Hashtable、LinkHashMap、TreeMap | HuanBlog</a> </p>
<p><a target="_blank" rel="noopener" href="https://qwerhuan.gitee.io/2020/12/07/java/shen-ru-jie-xi-concurrenthashmap-gan-shou-bing-fa-bian-cheng-zhi-hui/">深入解析ConcurrentHashMap：感受并发编程智慧 | HuanBlog</a></p>
<p>本次先简要讨论ConcurrentHashMap 顺便讨论下HashMap,HashTable这些Map的数据的结构,线程安全,在get,put部分的业务逻辑</p>
<p>ConcurrentHashMap : 是线程安全的主要是通过node来加锁,同时要结构是数组+链表,但是在1.7的版本是数组加链表 使用segemen的分块锁来完成</p>
<p>HashMap: 数据加链表 分为大概是 hash函数–hash冲突–扩容方案–线程安全的设计</p>
<p>HashTable: 1.2版本现在使用的少,它是基于synchronize对象来加锁的</p>
<p>fast-fail  fail-safe</p>
<p>记录一个count在并发的操作和影响</p>
<p>最后我把<a target="_blank" rel="noopener" href="https://qwerhuan.gitee.io/2020/12/07/java/shen-ru-jie-xi-concurrenthashmap-gan-shou-bing-fa-bian-cheng-zhi-hui/">深入解析ConcurrentHashMap：感受并发编程智慧 | HuanBlog</a>的这篇文章总结下(jdk 1.8)</p>
<h3 id="CAS与自旋锁"><a href="#CAS与自旋锁" class="headerlink" title="CAS与自旋锁"></a>CAS与自旋锁</h3><p>主要是在并发下处理</p>
<h3 id="如何控制并发"><a href="#如何控制并发" class="headerlink" title="如何控制并发"></a>如何控制并发</h3><h3 id="添加数据：putVal"><a href="#添加数据：putVal" class="headerlink" title="添加数据：putVal()"></a>添加数据：putVal()</h3><h3 id="初始化数组：initTable"><a href="#初始化数组：initTable" class="headerlink" title="初始化数组：initTable()"></a>初始化数组：initTable()</h3><h3 id="修改节点总数：addCount"><a href="#修改节点总数：addCount" class="headerlink" title="修改节点总数：addCount()"></a>修改节点总数：addCount()</h3><h3 id="扩容方案：transfer"><a href="#扩容方案：transfer" class="headerlink" title="扩容方案：transfer()"></a>扩容方案：transfer()</h3>
               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-kafka小结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/88809bac.html" class="article-date">
      <time datetime="2023-01-04T02:56:08.000Z" itemprop="datePublished">2023-01-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/88809bac.html">kafka小结</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>kafka开源流处理平台，由Scala和Java编写。该项目的目标是为处理实时数据提供一个统一、高吞吐、低延迟的平台。这是维基百科上的描述,这也是区别于rabbitmq等其他的消息队列的特点,kafka基于订阅-消费模式,自定义的协议,不同于MQTT,AMPQ,JMS等这些协议</p>
<ul>
<li>Provider/MessageProvider：生产者</li>
<p>
                              
                          
                    
              <!-- 
              
              <p>kafka开源流处理平台，由Scala和Java编写。该项目的目标是为处理实时数据提供一个统一、高吞吐、低延迟的平台。这是维基百科上的描述,这也是区别于rabbitmq等其他的消息队列的特点,kafka基于订阅-消费模式,自定义的协议,不同于MQTT,AMPQ,JMS等这些协议</p>
<ul>
<li>Provider/MessageProvider：生产者</li>
<li>Consumer/MessageConsumer：消费者</li>
<li><strong>PTP：Point To Point，点对点通信消息模型</strong></li>
<li><strong>Pub/Sub：Publish/Subscribe，发布订阅消息模型</strong></li>
<li>Queue：队列，目标类型之一，和PTP结合</li>
<li>Topic：主题，目标类型之一，和Pub/Sub结合</li>
<li>ConnectionFactory：连接工厂，JMS用它创建连接</li>
<li>Connnection：JMS Client到JMS Provider的连接</li>
<li>Destination：消息目的地，由Session创建</li>
<li>Session：会话，由Connection创建，实质上就是发送、接受消息的一个线程，因此生产者、消费者都是Session创建的</li>
</ul>
<p>值得注意的是 在kafka中需要注意的名词包括 broke,topic,producer,consumer,partition,replica</p>
<p>类似的</p>
<h2 id="图解相关的kafka概念"><a href="#图解相关的kafka概念" class="headerlink" title="图解相关的kafka概念"></a>图解相关的kafka概念</h2><p><img src="../img/kafka.drawio.png" alt="未命名绘图-第 2 页.drawio"></p>
<h2 id="leader-follower同步过程中截断机制"><a href="#leader-follower同步过程中截断机制" class="headerlink" title="leader,follower同步过程中截断机制"></a>leader,follower同步过程中截断机制</h2><p><a target="_blank" rel="noopener" href="https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%AE%9E%E8%B7%B5%E4%B9%8B%E8%B7%AF%EF%BC%88%E5%AE%8C%EF%BC%89/14%20%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E8%A7%A3%E8%AF%BB%20Kafka%20%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%80%A7%E6%9C%BA%E5%88%B6.md#:~:text=2.-,%E6%88%AA%E6%96%AD%E6%9C%BA%E5%88%B6,-%E5%9C%A8%E7%AC%AC%2012">kafka截断机制</a></p>
<p>注意在消费中HW(High Watermark).LEO(Log End Offset),在ISR(in-sync replica )列表需要保持hw一致,在leader变更中需要注意leo,HW(High Watermark)是所有副本中最小的LEO。</p>
<p><img src="../img/image-20230104112036179.png" alt="image-20230104112036179"></p>
<h2 id="针对kafka的幂等性PID-Producer-ID-和sequence-numbers。"><a href="#针对kafka的幂等性PID-Producer-ID-和sequence-numbers。" class="headerlink" title="针对kafka的幂等性PID(Producer ID)和sequence numbers。"></a>针对kafka的幂等性PID(Producer ID)和sequence numbers。</h2><p>product会维护一个生产序列seq来表现.如果对应的seq和broke的对不上</p>
<p>product_seq&gt;broke_seq 消息丢失</p>
<p>product_seq&lt;broke_seq+1 重复保存</p>
<p>参考链接:<a target="_blank" rel="noopener" href="https://juejin.cn/post/7084062283453693965">Kafka的ISR机制+日志数据清理 - 掘金</a>,<a target="_blank" rel="noopener" href="https://www.cnblogs.com/dw3306/p/14318226.html">MQ（消息队列）的使用场景以及常见的MQ - 邓维-java - 博客园</a></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-springAOP和bean生命周期" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/45ca8a5d.html" class="article-date">
      <time datetime="2023-01-04T02:28:01.000Z" itemprop="datePublished">2023-01-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/45ca8a5d.html">springAOP和bean生命周期</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>Springboot是Spring的脚手架,提供的自动配置功能初始化spring的ioc容器,</p>
<p>BeanDefinition:可以理解为定义bean</p>
<p>bean的生命周期,大部分初始化和赋值在AbstractAutowireCapableBeanFactory.doCreateBean 下来定义的: </p>
<p>
                              
                          
                    
              <!-- 
              
              <p>Springboot是Spring的脚手架,提供的自动配置功能初始化spring的ioc容器,</p>
<p>BeanDefinition:可以理解为定义bean</p>
<p>bean的生命周期,大部分初始化和赋值在AbstractAutowireCapableBeanFactory.doCreateBean 下来定义的: </p>
<pre><code>- 创建bean
- 赋值和变量
- 初始化bean 包括 BeanPostProcessor,initMethod等
- AOP相关的内容
- 被销毁</code></pre>
<p><img src="../img/instantation.jpg" alt="/assets/images/bean/instantation.jpg"></p>
<p>SpringApplicationContext:Spring的容器负责放置初始化好的bean</p>
<p>SpringFactoriesLoader  加载 spring.factories</p>
<p>1． 生成一个SpringApplication的对象</p>
<ul>
<li>1． webApplicationType ＝ 推测web应用类型（NONE、REACTIVE、SERVLET）</li>
<li>2． 从spring．factories中获取BootstrapRegistryInitializer对象</li>
<li>3． initializers ＝ 从spring．factories中获取ApplicationContextInitializer对象</li>
<li>4． listeners ＝ 从spring．factories中获取ApplicationListener对象</li>
</ul>
<p>2． SpringApplication的对象．run（）</p>
<ul>
<li>1． 获取SpringApplicationRunListener—-＞EventPublishingRunListener</li>
<li>\2. SpringApplicationRunListener.starting()</li>
<li>3．创建一个Spring容器</li>
<li>4． ApplicationContextInitializer—＞初始化Spring容器</li>
<li>\5. SpringApplicationRunListener.contextPrepared()</li>
<li>6． 把传给run方法的配置类注册成为一个Bean</li>
<li>\7. SpringApplicationRunListener.contextLoaded()</li>
<li>8．会解析配置类、扫描、启动Tomcat／Jetty／Undertow</li>
<li>(AutoConfigurationImportSelector,DeferredImportSelector)</li>
<li>\9. SpringApplicationRunListener.started() I</li>
<li>10.</li>
<li>\10. SpringApplicationRunListener.ready()</li>
</ul>
<h2 id="从注解开始说"><a href="#从注解开始说" class="headerlink" title="从注解开始说"></a>从注解开始说</h2><p>@enableSpringAutoConfig -&gt;Configeration -&gt;inportSelector-&gt; AutoConfigurationImportSelector</p>
<p>@SpringBootConfig- mapperScan</p>
<p>@ComponentScan</p>
<p>autoConfigerationSelector.class 会解析 autoconfig包下面的bean.factory</p>
<h2 id="从SpringBoot-run-说"><a href="#从SpringBoot-run-说" class="headerlink" title="从SpringBoot.run()说"></a>从SpringBoot.run()说</h2><p><img src="../img/image-20230104122503870.png" alt="image-20230104122503870"></p>
<p>SpringApplication.run()入口</p>
<p>AbstractApplicationContext.refresh()创建了ApplicationContext容器后刷新</p>
<p>DefaultListableBeanFactory,deGetBean()  ApplicationContext集成了 ListableBeanFactory</p>
<p>DefaultSingletonBeanRgistry.getSingleton() 获取单例的bean实例</p>
<p>AbstractAutowireCapableBeanFactory.createBean();创建对应的bean对应上面的Bean的生命周期</p>
<p>newInstance() 初始化一个bean实例</p>
<p>在refresh()方法下对应的方法注释:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">refresh</span><span class="params">()</span> <span class="keyword">throws</span> BeansException, IllegalStateException </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="keyword">this</span>.startupShutdownMonitor) &#123;</span><br><span class="line">            <span class="comment">//1:准备刷新上下文环境</span></span><br><span class="line">            prepareRefresh();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//2:获取初始化Bean工厂</span></span><br><span class="line">            ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//3:对bean工厂进行填充属性</span></span><br><span class="line">            prepareBeanFactory(beanFactory);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//4:Spring开放接口 留给子类去实现该接口</span></span><br><span class="line">                postProcessBeanFactory(beanFactory);</span><br><span class="line"></span><br><span class="line">                <span class="comment">//5:调用我们的bean工厂的后置处理器</span></span><br><span class="line">                invokeBeanFactoryPostProcessors(beanFactory);</span><br><span class="line"></span><br><span class="line">                <span class="comment">//6:注册我们bean后置处理器 </span></span><br><span class="line">                registerBeanPostProcessors(beanFactory);</span><br><span class="line"></span><br><span class="line">                <span class="comment">//7:初始化国际化资源处理器</span></span><br><span class="line">                initMessageSource();</span><br><span class="line"></span><br><span class="line">                <span class="comment">//8:初始化事件多播器</span></span><br><span class="line">                initApplicationEventMulticaster();</span><br><span class="line"></span><br><span class="line">                <span class="comment">//9:这个方法同样也是留个子类实现,其中springboot也是从这个方法进行tomcat的启动</span></span><br><span class="line">                onRefresh();</span><br><span class="line"></span><br><span class="line">                <span class="comment">//10:把我们的事件监听器注册到多播器上</span></span><br><span class="line">                registerListeners();</span><br><span class="line"></span><br><span class="line">                <span class="comment">//11:实例化所有的非懒加载的单实例bean</span></span><br><span class="line">                finishBeanFactoryInitialization(beanFactory);</span><br><span class="line"></span><br><span class="line">                <span class="comment">//12:最后刷新容器 发布刷新事件(Spring cloud eureka也是从这里启动的)</span></span><br><span class="line">                finishRefresh();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">catch</span> (BeansException ex) &#123;</span><br><span class="line">                <span class="keyword">if</span> (logger.isWarnEnabled()) &#123;</span><br><span class="line">                    logger.warn(<span class="string">&quot;Exception encountered during context initialization - &quot;</span> +</span><br><span class="line">                            <span class="string">&quot;cancelling refresh attempt: &quot;</span> + ex);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Destroy already created singletons to avoid dangling resources.</span></span><br><span class="line">                destroyBeans();</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Reset &#x27;active&#x27; flag.</span></span><br><span class="line">                cancelRefresh(ex);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Propagate exception to caller.</span></span><br><span class="line">                <span class="keyword">throw</span> ex;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">finally</span> &#123;</span><br><span class="line">                <span class="comment">// Reset common introspection caches in Spring&#x27;s core, since we</span></span><br><span class="line">                <span class="comment">// might not ever need metadata for singleton beans anymore...</span></span><br><span class="line">                resetCommonCaches();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><img src="../img/640_spring_bean.png" alt="图片"></p>
<h2 id="postProcessBeanFactory"><a href="#postProcessBeanFactory" class="headerlink" title="postProcessBeanFactory()"></a>postProcessBeanFactory()</h2><h2 id="invokeBeanFactoryPostProcessors"><a href="#invokeBeanFactoryPostProcessors" class="headerlink" title="invokeBeanFactoryPostProcessors()"></a>invokeBeanFactoryPostProcessors()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">processConfigBeanDefinitions的调用逻辑</span><br><span class="line"> 读取所有的自动配置类(带有<span class="meta">@Configuration</span>注解的类)</span><br><span class="line"> 相当于加载beanDefination</span><br><span class="line"> invokeBeanFactoryPostProcessors实现这两个接口可以定制</span><br><span class="line">    - BeanDefinitionRegistry对象</span><br><span class="line">    - ConfigurableListableBeanFactory对象。</span><br><span class="line">    </span><br><span class="line">    AbstractAutowireCapableBeanFactory.doCreateBean() 下的方法熟悉</span><br><span class="line">    - populateBean()</span><br><span class="line">    - initializeBean()</span><br><span class="line">    - applyBeanPostProcessorsBeforeInitialization()</span><br><span class="line">    		- processor.postProcessBeforeInitialization(result, beanName)</span><br><span class="line">    			- invokeAwareInterfaces</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p><img src="../img/image-20230106123943743.png" alt="image-20230106123943743"></p>
<h2 id="onRefresh"><a href="#onRefresh" class="headerlink" title="onRefresh();"></a>onRefresh();</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AbstractApplicationContext.onRefresh 是空但是AnnotationConfigServletWebServerApplicationContext是实际实现的类,下面有留言</span><br></pre></td></tr></table></figure>

<p>​        /**</p>
<p>Create a new {@link AnnotationConfigServletWebServerApplicationContext} that needs</p>
<ul>
<li>to be populated through {@link #register} calls and then manually</li>
<li>{@linkplain #refresh refreshed}.<br>   */<br>AnnotationConfigServletWebServerApplicationContext 继承了ServletWebServerApplicationContext 实现实现onRefresh的类是 </li>
</ul>
<p><img src="../img/image-20230106124800528.png" alt="image-20230106124800528"></p>
<p>实际会启动tomcat服务的</p>
<p><img src="../img/image-20230106125919039.png" alt="image-20230106125919039"></p>
<p>启动</p>
<p><img src="../img/image-20230106131402394.png" alt="image-20230106131402394"></p>
<p><img src="../img/image-20230106131700726.png" alt="image-20230106131700726"></p>
<p>在探究AOP原理之前，让我们先来了解AOP的术语：</p>
<p>Aspect（切面）：要实现的散布应用中多处的功能，例如日志记录；</p>
<p>Joinpoint（连接点）：应用执行中可以插入切面的点，这个点可以是方法调用、异常抛出甚至是字段值修改，由于Spring AOP构建在动态代理的基础上，所以连接点只支持方法层面；</p>
<p>Pointcut（切点）：定义了切面应该插入到哪些连接点，我们并不希望切面插入到所有的连接点，切点能让我们决定切面应该插入到哪些连接点；</p>
<p>Weaving（织入）：把切面插入到目标对象上并生成新的代理对象的过程。我们可以在目标对象的编译期（需要特殊的编译器）、类加载期（需要特殊的类加载器）或运行期织入，由于Spring AOP构建在动态代理的基础上，所以只支持在运行期织入；</p>
<p>Introduction（引入）：为目标对象添加新方法或新属性的过程，引入使得在不改变目标对象的情况下，让目标对象具有新的行为和状态；</p>
<p>Advice（通知）：定义了切面何时被触发，Spring目前有5种类型的通知，分别是：BeforeAdvice（前置通知）、AfterAdvice（后置通知）、AfterReturningAdvice（返回通知）、ThrowsAdvice（异常通知）和AroundAdvice（环绕通知）。</p>
<p><img src="../img/04170857_Aoog.jpg" alt="one-ok"></p>
<p>参考链接:<a target="_blank" rel="noopener" href="https://juejin.cn/post/7155884227714613285">聊透Spring bean的生命周期 - 掘金</a>,<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/130309481?utm_id=0">Spring Boot详细生命周期介绍 - 知乎</a>,<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/123008720">Spring详细生命周期介绍 - 知乎</a>,<a target="_blank" rel="noopener" href="https://blog.csdn.net/java_green_hand0909/article/details/90238242">@Pointcut()的execution、@annotation等参数说明<em>Normal Developer的博客-CSDN博客</em>@annotation</a> ,<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/kKHJPehbnCeoiR_BtCxSWw">Spring IOC和Bean生命周期源码分析</a> ,<a target="_blank" rel="noopener" href="https://juejin.cn/post/7185934630116130872">Spring中Bean注入源码分析 - 掘金</a> </p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-集合相关总结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/b9faaa6a.html" class="article-date">
      <time datetime="2023-01-03T02:21:42.000Z" itemprop="datePublished">2023-01-03</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/b9faaa6a.html">集合相关总结</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><h1 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h1><p>LinkHashMap,HashMap,TreeMap</p>
<h2 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap:"></a>HashMap:</h2><p> 继承了AbstractMap,实现Map,实现的数据结构是 数组+链表,通过计算传过来的</p>
<h2 id="LinkHashMap"><a href="#LinkHashMap" class="headerlink" title="LinkHashMap:"></a>LinkHashMap:</h2><p> 继承了HashMap,同时自己维护着一个双向链表</p>
<p>
                              
                          
                    
              <!-- 
              
              <h1 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h1><p>LinkHashMap,HashMap,TreeMap</p>
<h2 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap:"></a>HashMap:</h2><p> 继承了AbstractMap,实现Map,实现的数据结构是 数组+链表,通过计算传过来的</p>
<h2 id="LinkHashMap"><a href="#LinkHashMap" class="headerlink" title="LinkHashMap:"></a>LinkHashMap:</h2><p> 继承了HashMap,同时自己维护着一个双向链表</p>
<h2 id="TreeMap"><a href="#TreeMap" class="headerlink" title="TreeMap:"></a>TreeMap:</h2><p>  继承了AbstractMap,自己实现的数据结构是红黑树<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123;</span><br><span class="line">     K key;</span><br><span class="line">     V value;</span><br><span class="line">     Entry&lt;K,V&gt; left;</span><br><span class="line">     Entry&lt;K,V&gt; right;</span><br><span class="line">     Entry&lt;K,V&gt; parent;</span><br><span class="line">     boolean color &#x3D; BLACK;&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="List"><a href="#List" class="headerlink" title="List"></a>List</h1><h2 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h2><p>继承了AbstractList 基于数组来实现的.</p>
<h2 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h2><p>继承AbstractSequentialList -&gt;AbstractList 基于链表来实现</p>
<h1 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h1><h2 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h2><p>内部实现是使用的HashMap</p>
<h2 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h2><p>基于红黑树来实现</p>
<h1 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h1><h2 id="ArrayBlockingQueue"><a href="#ArrayBlockingQueue" class="headerlink" title="ArrayBlockingQueue"></a>ArrayBlockingQueue</h2><p>基于数组的队列最大是INTEGER.MAX_VALUE,</p>
<h2 id="ArrayBlockingQueue-1"><a href="#ArrayBlockingQueue-1" class="headerlink" title="ArrayBlockingQueue"></a>ArrayBlockingQueue</h2><p>基于列表来实现</p>
<h1 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h1><h2 id="HashTable"><a href="#HashTable" class="headerlink" title="HashTable"></a>HashTable</h2><p>和HashMap比较,性能不强但是保存的逻辑还是hash值来作为插入的关键词,加入了synchronized</p>
<p>参考链接: <a target="_blank" rel="noopener" href="https://endwas.cn/blog/80">𝑬𝒏𝒅𝒘𝒂𝒔 – 总结常见的五种BlockingQueue</a></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-jvm概念梳理" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/e430a961.html" class="article-date">
      <time datetime="2022-12-09T04:22:00.000Z" itemprop="datePublished">2022-12-09</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/e430a961.html">jvm概念梳理</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>class文件 动态代理 静态代理</p>
<p>javac 编译 .java文件 为 class文件,后面.class文件转换为 机器指令</p>
<h2 id="现代CPU下程序运行"><a href="#现代CPU下程序运行" class="headerlink" title="现代CPU下程序运行"></a>现代CPU下程序运行</h2><p>多CPU –&gt;CPU寄存器 –&gt; 高速缓存cache –&gt; 内存RAM </p>
<p>
                              
                          
                    
              <!-- 
              
              <p>class文件 动态代理 静态代理</p>
<p>javac 编译 .java文件 为 class文件,后面.class文件转换为 机器指令</p>
<h2 id="现代CPU下程序运行"><a href="#现代CPU下程序运行" class="headerlink" title="现代CPU下程序运行"></a>现代CPU下程序运行</h2><p>多CPU –&gt;CPU寄存器 –&gt; 高速缓存cache –&gt; 内存RAM </p>
<p><img src="../img/v2-1a7b7bb752799b6c067a0eaca0a1a9b2_r.jpg" alt="img"></p>
<h3 id="缓存一致性"><a href="#缓存一致性" class="headerlink" title="缓存一致性"></a>缓存一致性</h3><p>多个线程可能不在一个CPU中运行,那么对于的变量可能不太一致,需要同步 volatile</p>
<h3 id="指令重排序"><a href="#指令重排序" class="headerlink" title="指令重排序"></a>指令重排序</h3><p>对编译的时候对代码进行重排序,优化执行的效率,但是是一个变量,多个线程去执行的时候也行会导致,执行的变量的问题,不是说这个重排序是错的比如说不相干的变量查询,可能在CPU执行过程中可能有先后顺序的差异.</p>
<h3 id="逃逸分析"><a href="#逃逸分析" class="headerlink" title="逃逸分析"></a>逃逸分析</h3><p>相当于 你方法内的变量 需要传递出去,给别人用,不是基础类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> StringBuffer <span class="title">craeteStringBuffer</span><span class="params">(String s1, String s2)</span> </span>&#123;</span><br><span class="line">    StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    sb.append(s1);</span><br><span class="line">    sb.append(s2);</span><br><span class="line">    <span class="keyword">return</span> sb;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">createStringBuffer</span><span class="params">(String s1, String s2)</span> </span>&#123;</span><br><span class="line">    StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    sb.append(s1);</span><br><span class="line">    sb.append(s2);</span><br><span class="line">    <span class="keyword">return</span> sb.toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p>第一段代码中的<code>sb</code>就逃逸了，而第二段代码中的<code>sb</code>就没有逃逸。</p>
<p>使用逃逸分析，编译器可以对代码做如下优化：</p>
<p>一、同步省略。如果一个对象被发现只能从一个线程被访问到，那么对于这个对象的操作可以不考虑同步。</p>
<p>二、将堆分配转化为栈分配。如果一个对象在子程序中被分配，要使指向该对象的指针永远不会逃逸，对象可能是栈分配的候选，而不是堆分配。</p>
<p>三、分离对象或标量替换。有的对象可能不需要作为一个连续的内存结构存在也可以被访问到，那么对象的部分（或全部）可以不存储在内存，而是存储在CPU寄存器中。</p>
<p>作者：HollisChuang<br>链接：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903639308304397">https://juejin.cn/post/6844903639308304397</a><br>来源：稀土掘金<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<h2 id="逃逸分析优化"><a href="#逃逸分析优化" class="headerlink" title="逃逸分析优化"></a>逃逸分析优化</h2><p>针对上面第三点，当一个对象没有逃逸时，可以得到以下几个虚拟机的优化。</p>
<p><strong>1) 锁消除</strong></p>
<p>我们知道线程同步锁是非常牺牲性能的，当编译器确定当前对象只有当前线程使用，那么就会移除该对象的同步锁。</p>
<p>例如，StringBuffer 和 Vector 都是用 synchronized 修饰线程安全的，但大部分情况下，它们都只是在当前线程中用到，这样编译器就会优化移除掉这些锁操作。</p>
<p>锁消除的 JVM 参数如下：</p>
<ul>
<li>开启锁消除：-XX:+EliminateLocks</li>
<li>关闭锁消除：-XX:-EliminateLocks</li>
</ul>
<p>锁消除在 JDK8 中都是默认开启的，并且锁消除都要建立在逃逸分析的基础上。</p>
<p><strong>2) 标量替换</strong></p>
<p>首先要明白标量和聚合量，基础类型和对象的引用可以理解为标量，它们不能被进一步分解。而能被进一步分解的量就是聚合量，比如：对象。</p>
<p>对象是聚合量，它又可以被进一步分解成标量，将其成员变量分解为分散的变量，这就叫做标量替换。</p>
<p>这样，如果一个对象没有发生逃逸，那压根就不用创建它，只会在栈或者寄存器上创建它用到的成员标量，节省了内存空间，也提升了应用程序性能。</p>
<p>标量替换的 JVM 参数如下：</p>
<ul>
<li>开启标量替换：-XX:+EliminateAllocations</li>
<li>关闭标量替换：-XX:-EliminateAllocations</li>
<li>显示标量替换详情：-XX:+PrintEliminateAllocations</li>
</ul>
<p>标量替换同样在 JDK8 中都是默认开启的，并且都要建立在逃逸分析的基础上。</p>
<p><strong>3) 栈上分配</strong></p>
<p>当对象没有发生逃逸时，该对象就可以通过标量替换分解成成员标量分配在栈内存中，和方法的生命周期一致，随着栈帧出栈时销毁，减少了 GC 压力，提高了应用程序性能。</p>
<h2 id="happen-before原则"><a href="#happen-before原则" class="headerlink" title="happen-before原则"></a>happen-before原则</h2><ul>
<li><p>程序顺序规则：一个线程中的每个操作，happens-before于该线程中的任意后续操作。</p>
</li>
<li><p>监视器锁规则：对一个锁的解锁，happens-before于随后对这个锁的加锁。</p>
</li>
<li><p>volatile变量规则：对一个volatile域的写，happens-before于任意后续对这个volatile域的读。</p>
</li>
<li><p>传递性：如果A happens-before B，且B happens-before C，那么A happens-before C。</p>
</li>
</ul>
<h2 id="GC垃圾回收"><a href="#GC垃圾回收" class="headerlink" title="GC垃圾回收"></a>GC垃圾回收</h2><h3 id="定义垃圾"><a href="#定义垃圾" class="headerlink" title="定义垃圾"></a>定义垃圾</h3><ol>
<li>引用计数算法</li>
<li>可达性分析算法</li>
</ol>
<h3 id="内存中的分配"><a href="#内存中的分配" class="headerlink" title="内存中的分配"></a>内存中的分配</h3><p>主要是手机heap(堆内存)主要是堆内存最大,同时是零碎的不像 stack(栈内存)是在方法调用完或者方法的引用完后就自动回收的.</p>
<p>目前堆内存中主要是初始化好的对象实例,和对象实例的类里面的变量,</p>
<ul>
<li><p>虚拟机栈（栈帧中的本地变量表）中引用的对象</p>
</li>
<li><p>方法区中类静态属性引用的对象</p>
</li>
<li><p>方法区中常量引用的对象</p>
</li>
<li><p>本地方法栈中 JNI（即一般说的 Native 方法）引用的对象</p>
</li>
</ul>
<p>Java 堆(Java Heap)是JVM所管理的内存</p>
<p><img src="../img/image-20221209125328758.png" alt="image-20221209125328758"></p>
<h3 id="清除方式"><a href="#清除方式" class="headerlink" title="清除方式"></a>清除方式</h3><p>1.标记清除算法</p>
<p>…</p>
<p>2.复制算法</p>
<p>…</p>
<p>3.标记整理算法</p>
<p>…</p>
<p>参考链接: </p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/aA1eDYIUHuIfigTw2ffouw">咱们从头到尾说一次 Java 垃圾回收</a>  </p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/29881777">Java内存模型（JMM）总结 - 知乎</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903639308304397">深入理解Java中的逃逸分析 - 掘金</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/69136675">面试问我 Java 逃逸分析，瞬间被秒杀了。。 - 知乎</a></p>
</li>
</ul>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-java内存和系统内存以及栈和堆" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/a87a9ae1.html" class="article-date">
      <time datetime="2022-12-09T01:56:56.000Z" itemprop="datePublished">2022-12-09</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/a87a9ae1.html">java内存和系统内存以及栈和堆</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>参考链接: <a target="_blank" rel="noopener" href="https://kylenxu.github.io/2019/06/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E5%A0%86%E3%80%81%E6%A0%88%E5%92%8C%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%A0%86%E5%86%85%E5%AD%98%E3%80%81%E6%A0%88%E5%86%85%E5%AD%98%E7%9A%84%E5%8C%BA%E5%88%AB/">数据结构的堆、栈和操作系统的堆内存、栈内存的区别 - Kylen的博客 | Kylen Blog</a></p>
<p>CPU 处理数据需要 寄存器但是仅仅是寄存器是不够的还需要外部的内存支持 这个时候就需要 </p>
<p>RAM的支持 stack 栈 ,支持push ,pop</p>
<p>
                              
                          
                    
              <!-- 
              
              <p>参考链接: <a target="_blank" rel="noopener" href="https://kylenxu.github.io/2019/06/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E5%A0%86%E3%80%81%E6%A0%88%E5%92%8C%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%A0%86%E5%86%85%E5%AD%98%E3%80%81%E6%A0%88%E5%86%85%E5%AD%98%E7%9A%84%E5%8C%BA%E5%88%AB/">数据结构的堆、栈和操作系统的堆内存、栈内存的区别 - Kylen的博客 | Kylen Blog</a></p>
<p>CPU 处理数据需要 寄存器但是仅仅是寄存器是不够的还需要外部的内存支持 这个时候就需要 </p>
<p>RAM的支持 stack 栈 ,支持push ,pop</p>
<p>类似于这个结构</p>
<p><img src="../img/image-20221209113726223.png" alt="image-20221209113726223"></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap#:~:text=Stack%3A,for%20memory%20leaks">stack over flow </a></p>
<h2 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h2><ul>
<li>就像堆一样存储在计算机 RAM 中。</li>
<li>在堆栈上创建的变量将超出范围并自动释放。</li>
<li>与堆上的变量相比，分配速度要快得多。</li>
<li>使用实际的堆栈数据结构实现。</li>
<li>存放本地数据，返回地址，用于参数传递。</li>
<li>当使用太多堆栈时可能会发生堆栈溢出（主要来自无限或太深的递归，非常大的分配）。</li>
<li>在堆栈上创建的数据可以在没有指针的情况下使用。</li>
<li>如果您确切地知道在编译之前需要分配多少数据并且它不是太大，那么您将使用堆栈。</li>
<li>通常在程序启动时已经确定了最大大小。</li>
</ul>
<h2 id="堆："><a href="#堆：" class="headerlink" title="堆："></a>堆：</h2><ul>
<li>就像堆栈一样存储在计算机 RAM 中。</li>
<li>在 C++ 中，堆上的变量必须手动销毁并且永远不会超出范围。 使用 delete、delete[] 或 free 释- 放数据。<br>与堆栈上的变量相比，分配速度较慢。</li>
<li>按需用于分配数据块供程序使用。</li>
<li>当有很多分配和释放时，可能会产生碎片。</li>
<li>在 C++ 或 C 中，在堆上创建的数据将通过指针指向并分别使用 new 或 malloc 进行分配。</li>
<li>如果请求分配的缓冲区太大，可能会出现分配失败。</li>
<li>如果您不确切知道在运行时需要多少数据或者需要分配大量数据，则可以使用堆。</li>
<li>负责内存泄漏。</li>
</ul>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-认证和权限" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/d573592c.html" class="article-date">
      <time datetime="2022-12-09T01:52:33.000Z" itemprop="datePublished">2022-12-09</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/d573592c.html">认证和权限</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>参考文档:  <a target="_blank" rel="noopener" href="https://www.raosong.cc/2019/11/26/32.%E8%B0%88%E8%B0%88%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/">谈谈单点登录｜R_song’s blog</a></p>
<p><img src="../img/image-20221210173435164.png" alt="image-20221210173435164"></p>
<p>SAML</p>
<p>
                              
                          
                    
              <!-- 
              
              <p>参考文档:  <a target="_blank" rel="noopener" href="https://www.raosong.cc/2019/11/26/32.%E8%B0%88%E8%B0%88%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/">谈谈单点登录｜R_song’s blog</a></p>
<p><img src="../img/image-20221210173435164.png" alt="image-20221210173435164"></p>
<p>SAML</p>
<p><img src="../img/124011" alt="SAML 2.0 Flow"></p>
<p>OAuth2</p>
<p><img src="../img/1240" alt="image.png"></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-理解java的BIO-NIO-AIO" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/ff3a358d.html" class="article-date">
      <time datetime="2022-12-08T12:54:46.000Z" itemprop="datePublished">2022-12-08</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/ff3a358d.html">理解java的BIO/NIO/AIO</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>在理解Java的BIO/NIO/AIO之前我们先梳理下linux的相关io概念,下面是参考的连接</p>
<p>我在网络上搜索相关io 有句话很熟悉  </p>
<p><strong>BIO 下的连接对应一个线程</strong>  , <strong>NIO 下的请求对应一个线程</strong> ,  <strong>AIO下的有效请求对应一个线程</strong></p>
<p>
                              
                          
                    
              <!-- 
              
              <p>在理解Java的BIO/NIO/AIO之前我们先梳理下linux的相关io概念,下面是参考的连接</p>
<p>我在网络上搜索相关io 有句话很熟悉  </p>
<p><strong>BIO 下的连接对应一个线程</strong>  , <strong>NIO 下的请求对应一个线程</strong> ,  <strong>AIO下的有效请求对应一个线程</strong></p>
<ul>
<li>BIO：线程发起 IO 请求，不管内核是否准备好 IO 操作，从发起请求起，线程一直阻塞，直到操作完成。</li>
<li>NIO：客户端发送的连接请求都会注册到多路复用器上，多路复用器轮询到连接有 I/O 请求时才启动一个线程进行处理。</li>
<li>AIO：线程发起 IO 请求，立即返回；内存做好 IO 操作的准备之后，做 IO 操作，直到操作完成或者失败，通过调用注册的回调函数通知线程做 IO 操作完成或者失败。</li>
</ul>
<p>请求可以是读写都会创建对应线程处理,而有效请求着是 处理完对应io操作后才会调用对应的线程去操作</p>
<p>netty介绍<br><a target="_blank" rel="noopener" href="http://thoreauz.com/2019/01/19/rpc1-netty-reactor/">RPC一-线程模型 · 造舟野渡</a></p>
<p><a target="_blank" rel="noopener" href="http://thoreauz.com/2019/01/19/rpc2-netty-handler/">RPC二-NettyHandler处理消息 · 造舟野渡</a><br><a target="_blank" rel="noopener" href="http://thoreauz.com/2019/01/19/rpc3-protocol-e-decode/">RPC三-rpc协议和编解码 · 造舟野渡</a><br><a target="_blank" rel="noopener" href="http://thoreauz.com/2019/01/19/rpc4-netty-chain-of-responsibility-pattern/">RPC四-netty异步双向责任链 · 造舟野渡</a><br><a target="_blank" rel="noopener" href="http://thoreauz.com/2019/01/19/rpc5-reliability/">RPC五-可靠性设计 · 造舟野渡</a><br><a target="_blank" rel="noopener" href="http://thoreauz.com/2019/01/19/rpc6-dynamic-proxy/">RPC六-动态代理 · 造舟野渡</a></p>
<p>Java io相关内容 </p>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000037714804">java - 理解什么是BIO/NIO/AIO_个人文章 - SegmentFault 思否</a></p>
<p><a target="_blank" rel="noopener" href="https://alibaba-cloud.medium.com/essential-technologies-for-java-developers-i-o-and-netty-ec765676fd21">Java Development: BIO, NIO, AIO and Netty | Medium</a></p>
<p>linux io的相关链接</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/jmcui/p/14145488.html">套接字 socket 和 tcp 连接过程 - JMCui - 博客园</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/jmcui/p/14132849.html">网络 IO 模型简单介绍 - JMCui - 博客园</a></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!--  -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-github-gitlab相关的操作" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/f1f7a0f1.html" class="article-date">
      <time datetime="2022-12-04T06:08:17.000Z" itemprop="datePublished">2022-12-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/f1f7a0f1.html">github，gitlab相关的操作</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p><a target="_blank" rel="noopener" href="https://www.7ed.net/start/raw-cdn.html">Github RAW 加速服务 | 7ED</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1807308">提高国内访问 GitHub 的速度的 9 种方案 - 腾讯云开发者社区-腾讯云</a></p>
<blockquote>
<p>
                              
                          
                    
              <!-- 
              
              <p><a target="_blank" rel="noopener" href="https://www.7ed.net/start/raw-cdn.html">Github RAW 加速服务 | 7ED</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1807308">提高国内访问 GitHub 的速度的 9 种方案 - 腾讯云开发者社区-腾讯云</a></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/SpotX-CLI/SpotX-Win/main/Install.ps1">https://raw.githubusercontent.com/SpotX-CLI/SpotX-Win/main/Install.ps1</a></p>
<p>在githubusercontent 后面添加个大写的   <strong>S</strong> -&gt;    <a target="_blank" rel="noopener" href="https://raw.githubusercontents.com/SpotX-CLI/SpotX-Win/main/Install.ps1">https://raw.githubusercontentS.com/SpotX-CLI/SpotX-Win/main/Install.ps1</a></p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.frytea.com/archives/504/">无需代理直接加速各种 GitHub 资源拉取 | 国内镜像赋能 | 助力开发 - Frytea’s Blog</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/fastgh/fgit">fastgh/fgit: 加速100～3000倍的github.com</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/hunshcn/gh-proxy">hunshcn/gh-proxy: github release、archive以及项目文件的加速项目</a></p>
<p>举个例子现在需要clone某个GitHub的仓库或者是用某个shell脚本搭建某种服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone --single-branch --branch v1.4.9 https:&#x2F;&#x2F;github.com&#x2F;rook&#x2F;rook.git</span><br></pre></td></tr></table></figure>

<p>时常会返回下列错误</p>
<blockquote>
<p>正克隆到 ‘rook’…<br>error: RPC failed; result=35, HTTP code = 0<br>fatal: The remote end hung up unexpectedly</p>
</blockquote>
<p>亦或者是ssh连接失败访问失败连接超时这种，如果你手动去找GitHub镜像站费时间而且有些git clone是写在二进制文件里面不方便去一个一个修改，之前有用过修改linux服务器的hosts来实现加速访问但是速度时好时坏，稳定性太差。</p>
<p>参考上面博主的文章我有了新想法，定义使用 fgit然后软连接 <strong>/usr/bin/git</strong></p>
<p>第二种就是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global url.&quot;https:&#x2F;&#x2F;gitclone.com&#x2F;github.com&quot;.insteadOf https:&#x2F;&#x2F;ghproxy.seekme.workers.dev</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://ghproxy.seekme.workers.dev/">https://ghproxy.seekme.workers.dev/</a> 这个是我参考上面的介绍搭建的加速站，目前下载文件没啥问题就是加clone加速还是有问题</p>
<p><a target="_blank" rel="noopener" href="https://hub.fastgit.xyz/rook/rook.git">https://hub.fastgit.xyz/rook/rook.git</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com.cnpmjs.org/rook/rook.git">https://github.com.cnpmjs.org/rook/rook.git</a></p>
<p><a target="_blank" rel="noopener" href="https://gitclone.com/github.com/rook/rook.git">https://gitclone.com/github.com/rook/rook.git</a></p>
<p><a target="_blank" rel="noopener" href="https://hub.fastgit.xyz/rook/rook.git">https://hub.fastgit.xyz/rook/rook.git</a> 速度最快</p>
<p>替换步骤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 方法二：配置git自动替换</span><br><span class="line">$ git config --global url.&quot;https:&#x2F;&#x2F;hub.fastgit.xyz&quot;.insteadOf https:&#x2F;&#x2F;github.com</span><br><span class="line"># 测试</span><br><span class="line">$ git clone --single-branch --branch v1.4.9 https:&#x2F;&#x2F;github.com&#x2F;rook&#x2F;rook.git</span><br><span class="line"># 查看git配置信息</span><br><span class="line">$ git config --global --list</span><br><span class="line"># 取消设置</span><br><span class="line">$ git config --global --unset url.https:&#x2F;&#x2F;github.com&#x2F;.insteadof</span><br></pre></td></tr></table></figure>



<p><img src="../img/image-20220216151406670.png" alt="image-20220216151406670"></p>
<h2 id="gitlab引用仓库里的图片"><a href="#gitlab引用仓库里的图片" class="headerlink" title="gitlab引用仓库里的图片"></a>gitlab引用仓库里的图片</h2><p>一起在typora上使用的引用相对位置的图片是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![image-20220127150651513](C:&#x2F;Program%20Files&#x2F;img&#x2F;image-20220127150651513.png)</span><br></pre></td></tr></table></figure>



<p>但是在gitlab不会去找相对位置的图片，很多人反馈在github这样写是可以在仓库readme上显示，但是在gitlab应该没优化，这边在StackOverflow上找到的解决方案是用&lt;&gt;括一下，确实可以实现，而且在语法是兼容的。</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/27016052/how-can-i-reference-an-image-in-gitlab-markdown-in-the-current-directory-with-th#:~:text=My%20images%20where,Mind%20the%20%3C%3E">StackOverflow的建议</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![image-20220215103753937](&lt;C:&#x2F;Users&#x2F;Administrator&#x2F;Desktop&#x2F;img&#x2F;image-20220215103753937.png&gt;)</span><br></pre></td></tr></table></figure>


               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gitlab/" rel="tag">gitlab</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8A%A0%E9%80%9F/" rel="tag">加速</a></li></ul>
    </div>
 -->


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/5/"> 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/7/">下一页 </a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2025 leek
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by leek <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//lf6-cdn-tos.bytecdntp.com/cdn/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-144246563-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
             tags: ".article-tag a", 
             categories: ".article-category a, a.tag-list-link", 
            
            
            
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

    <script>
        var originTitle = document.title;
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.title = "(つェ⊂) 我藏好了哦~ " + originTitle;
                clearTimeout(titleTime);
            }
            else {
                document.title = "(*´∇｀*) 被你发现啦~ " + originTitle;
                titleTime = setTimeout(function() {
                    document.title = originTitle;
                }, 2000);
            }
        })
    </script>

<script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>