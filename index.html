<!DOCTYPE html>
<html lang="zh-Hans">
<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="leek" />


    
    


<meta property="og:type" content="website">
<meta property="og:title" content="自留地">
<meta property="og:url" content="http://imlike.cc/index.html">
<meta property="og:site_name" content="自留地">
<meta property="article:author" content="leek">
<meta name="twitter:card" content="summary">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="自留地" type="application/atom+xml">



    <link rel="shortcut icon" href="pics/favicon.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">



<link rel="stylesheet" href="/css/style.css">



    <!-- 注释 -->
    <!-- <style> .article { opacity: 0;} </style> -->


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>自留地</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






<meta name="generator" content="Hexo 4.2.0"></head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="https://pic.superbed.cn/item/5c9f2d213a213b04176522d4" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">leek</a></h1>
        </hgroup>

        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="true" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:s@yandex.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/bigleek" target="_blank" rel="noopener" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa Google" href="https://plus.google.com/bigleekcode" target="_blank" rel="noopener" title="Google"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Yelee/" rel="tag">Yelee</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Yilia/" rel="tag">Yilia</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/activiti/" rel="tag">activiti</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/axios/" rel="tag">axios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloud/" rel="tag">cloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deepin/" rel="tag">deepin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/" rel="tag">elasticsearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsraech/" rel="tag">elasticsraech</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/" rel="tag">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gnome/" rel="tag">gnome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo%E4%B8%BB%E9%A2%98/" rel="tag">hexo主题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/intellj/" rel="tag">intellj</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kibana/" rel="tag">kibana</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mail/" rel="tag">mail</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/" rel="tag">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nas/" rel="tag">nas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/onedrive/" rel="tag">onedrive</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/orientDb/" rel="tag">orientDb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/" rel="tag">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/post/" rel="tag">post</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgres/" rel="tag">postgres</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/put/" rel="tag">put</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/" rel="tag">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/" rel="tag">springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springcloud/" rel="tag">springcloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vmware/" rel="tag">vmware</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vpn/" rel="tag">vpn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/" rel="tag">vscode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue-cli/" rel="tag">vue-cli</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webdav/" rel="tag">webdav</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wine/" rel="tag">wine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yandex/" rel="tag">yandex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zsh/" rel="tag">zsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%91%E6%92%AD/" rel="tag">云播</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" rel="tag">内网穿透</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9D%9A%E6%9E%9C%E4%BA%91/" rel="tag">坚果云</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%9F%E5%90%8D/" rel="tag">域名</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A9%E7%BF%BC%E4%BA%91/" rel="tag">天翼云</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%90%9C%E7%8B%97%E8%BE%93%E5%85%A5%E6%B3%95/" rel="tag">搜狗输入法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%85%BE%E8%AE%AF%E4%BA%91/" rel="tag">腾讯云</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B5%84%E6%BA%90/" rel="tag">资源</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/" rel="tag">邮件服务</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://imlike.cc/page.html">镜像网站导航</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://imcyc.cn/" target="_blank" rel="noopener">Morty</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">平时零散的知识</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">leek</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="https://pic.superbed.cn/item/5c9f2d213a213b04176522d4" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">leek</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:s@yandex.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/bigleek" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa Google" target="_blank" href="https://plus.google.com/bigleekcode" title="Google"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-树莓派天翼云盘目录索引" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/759123676.html" class="article-date">
      <time datetime="2020-04-19T08:36:28.000Z" itemprop="datePublished">2020-04-19</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/759123676.html">树莓派天翼云盘目录索引</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p><a href="https://ventoso.top/2020/03/13/sharelist/" target="_blank" rel="noopener">或许是最好用的天翼云目录索引程序-sharelist</a></p>
<p>sharelist <a href="https://github.com/reruin/sharelist" target="_blank" rel="noopener">项目地址</a></p>
<p>1 该项目需要先有nodejs的环境,注意树莓派arm版本的</p>
<p>
                              
                          
                    
              <!-- 
              
              <p><a href="https://ventoso.top/2020/03/13/sharelist/" target="_blank" rel="noopener">或许是最好用的天翼云目录索引程序-sharelist</a></p>
<p>sharelist <a href="https://github.com/reruin/sharelist" target="_blank" rel="noopener">项目地址</a></p>
<p>1 该项目需要先有nodejs的环境,注意树莓派arm版本的</p>
<blockquote>
<p>npm config set registry <a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a></p>
<p> npm install -g pm2</p>
</blockquote>
<pre><code>|   ShareList is installing ...
install.sh: 29: install.sh: npm: not found
install.sh: 30: install.sh: npm: not found
install.sh: 32: install.sh: pm2: not found
install.sh: 33: install.sh: pm2: not found
install.sh: 34: install.sh: pm2: not found</code></pre><p>中间出现问题安装完npm还有这个问题</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>

PATH<span class="token operator">=</span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

<span class="token keyword">echo</span> <span class="token string">"+============================================================+"</span>
<span class="token keyword">echo</span> <span class="token string">"|                    ShareList Installer                     |"</span>
<span class="token keyword">echo</span> <span class="token string">"|                                                            |"</span>
<span class="token keyword">echo</span> <span class="token string">"|                                         &lt;reruin@gmail.com> |"</span>
<span class="token keyword">echo</span> <span class="token string">"|------------------------------------------------------------|"</span>
<span class="token keyword">echo</span> <span class="token string">"|                                         https://reruin.net |"</span>
<span class="token keyword">echo</span> <span class="token string">"+============================================================+"</span>
<span class="token keyword">echo</span> <span class="token string">""</span>

<span class="token keyword">echo</span> -e <span class="token string">"\n|   ShareList is installing ... "</span>

<span class="token comment" spellcheck="true"># deps</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -n <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">command</span> -v <span class="token function">apt-get</span><span class="token variable">)</span></span>"</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
  <span class="token function">apt-get</span> <span class="token function">install</span> -y curl <span class="token operator">></span>/dev/null 2<span class="token operator">></span><span class="token operator">&amp;</span>1
  curl -sL https://deb.nodesource.com/setup_8.x <span class="token operator">|</span> <span class="token function">bash</span> - <span class="token operator">></span>/dev/null 2<span class="token operator">></span><span class="token operator">&amp;</span>1
  <span class="token function">apt-get</span> <span class="token function">install</span> -y nodejs <span class="token operator">></span>/dev/null 2<span class="token operator">></span><span class="token operator">&amp;</span>1
<span class="token keyword">elif</span> <span class="token punctuation">[</span> -n <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">command</span> -v yum<span class="token variable">)</span></span>"</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
  yum <span class="token function">install</span> -y curl <span class="token operator">></span>/dev/null 2<span class="token operator">></span><span class="token operator">&amp;</span>1
  curl --silent --location https://rpm.nodesource.com/setup_8.x <span class="token operator">|</span> <span class="token function">bash</span> - <span class="token operator">></span>/dev/null 2<span class="token operator">></span><span class="token operator">&amp;</span>1
  yum <span class="token function">install</span> -y nodejs <span class="token operator">></span>/dev/null 2<span class="token operator">></span><span class="token operator">&amp;</span>1
<span class="token keyword">fi</span>

<span class="token function">npm</span> <span class="token function">install</span>
<span class="token function">npm</span> <span class="token function">install</span> pm2 -g

pm2 start app.js --name sharelist --env prod
pm2 save
pm2 startup

<span class="token keyword">echo</span> -e <span class="token string">"|\n|   Success: ShareList has been installed\n|"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>看了下是在29行出问题的</p>
<blockquote>
<p> pm2 list</p>
<p> pm2 show  applicationName</p>
<p>pm2 start 会运行当前目录下的app.js</p>
</blockquote>
<p>加入后管理按钮就在页面下面</p>
<p><img src="../img/1587285755580.png" alt="1587285755580"></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%A4%A9%E7%BF%BC%E4%BA%91/" rel="tag">天翼云</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li></ul>
    </div>
 -->


    <div class="article-tag tagcloud" >
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%A4%A9%E7%BF%BC%E4%BA%91/" rel="tag">天翼云</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li></ul>

    </div>
      <div class="article-tag tagcloud">

        <span class="post-count">总字数303</span>
        <span class="post-count">预计阅读1分钟</span>
      </div>
    
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-vue中axios中post跨域SpringBoot获取不到RequestBody数据" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/552952049.html" class="article-date">
      <time datetime="2020-04-11T18:59:20.000Z" itemprop="datePublished">2020-04-12</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/552952049.html">vue中axios中post跨域SpringBoot获取不到RequestBody数据</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>目前使用axios实现vue中与后台数据交互,目前GET,DELETE都是正常使用,但是会有跨域的问题,我就是临时在返回头加上了Access-Control-Allow-Origin:”*”</p>
<p>但是一直由于POST提交数据后台数据一直获取不到RequestBody,我之前使用postman测试都是可以通过的,显示<strong>status failure</strong>后台也根本不报错,因为获取不到</p>
<p>开始是以为是我格式问题换了几种数据</p>
<p>
                              
                          
                    
              <!-- 
              
              <p>目前使用axios实现vue中与后台数据交互,目前GET,DELETE都是正常使用,但是会有跨域的问题,我就是临时在返回头加上了Access-Control-Allow-Origin:”*”</p>
<p>但是一直由于POST提交数据后台数据一直获取不到RequestBody,我之前使用postman测试都是可以通过的,显示<strong>status failure</strong>后台也根本不报错,因为获取不到</p>
<p>开始是以为是我格式问题换了几种数据</p>
<pre class="line-numbers language-js"><code class="language-js">        <span class="token comment" spellcheck="true">/*axios.post('http://localhost:8080/xxx/model/'+path,modelIds)                        .then(response => {                            this.searchContent()                        })                        .catch(function (error) {                            console.log(error);                        });*/</span> 
<span class="token comment" spellcheck="true">/*     axios.post('http://localhost:8080/xxx/process/model/27501', {                        comment: 'Fred',                        userName: 'Flintstone'                    })                        .then(function (response) {                            console.log(response);                        })                        .catch(function (error) {                            console.log(error);                        });*/</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>                        method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>                        headers<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">'content-type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>                        data<span class="token punctuation">:</span> modelIds<span class="token punctuation">,</span>                        url<span class="token punctuation">:</span><span class="token string">'http://localhost:8080/xxx/model/'</span><span class="token operator">+</span>path                    <span class="token punctuation">}</span><span class="token punctuation">;</span>                    <span class="token function">axios</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>还有就是PUT提交时 application/x-www-form-urlencoded,后台用RequestParam,或者不写都可以接受,对象的话要set,get方法,我刚开始用的form-data,SpringBoot是获取不到数据的</p>
<p>我目前用的是nginx,代理</p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/axios/" rel="tag">axios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>
    </div>
 -->


    <div class="article-tag tagcloud" >
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/axios/" rel="tag">axios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </div>
      <div class="article-tag tagcloud">

        <span class="post-count">总字数246</span>
        <span class="post-count">预计阅读1分钟</span>
      </div>
    
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-nginx详细的配置和用途" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2474801124.html" class="article-date">
      <time datetime="2020-04-11T18:51:11.000Z" itemprop="datePublished">2020-04-12</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2474801124.html">nginx详细的配置和用途</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>补充域名相关的知识</p>
<pre><code>www.xxx.com` ,`www.zzz.xxx.com`,`www.xxx.com/getName</code></pre><blockquote>
<p>www: World Wide Web 万维网</p>
<p>
                              
                          
                    
              <!-- 
              
              <p>补充域名相关的知识</p>
<pre><code>www.xxx.com` ,`www.zzz.xxx.com`,`www.xxx.com/getName</code></pre><blockquote>
<p>www: World Wide Web 万维网</p>
<p>xxx: 注册的名称</p>
<p>zzz: 子域名(Second-level domain；英文缩写：SLD)</p>
<p>com:顶级域名(Top-level domains)是org,</p>
<p>URL: <a href="http://www.example.net/index.html,www.xxx.com/getName" target="_blank" rel="noopener">http://www.example.net/index.html,www.xxx.com/getName</a></p>
</blockquote>
<p>对于第三个需要配置 server-&gt;多个location配置</p>
<p>对于第二中需要配置多个server,或者server-&gt;server_name</p>
<p>转载地址<a href="https://zhuanlan.zhihu.com/p/36148885" target="_blank" rel="noopener">nginx 常用配置记录-知乎专栏</a></p>
<hr>
<h3 id="server模块"><a href="#server模块" class="headerlink" title="server模块"></a><strong>server模块</strong></h3><p>server模块是http的子模块，它用来定义一个虚拟主机</p>
<p>例子：</p>
<pre><code>server {
    listen      80;
    server_name localhost www.example.com;
    root        /Users/yangyi/www;# 全局定义，表示在该server下web的根目录
    client_max_body_size 100M;
    keepalive_timeout 20;
    index       index.php index.html index.htm; 
    charset     utf-8;
    access_log  logs/host.access.log  main; #用来指定此虚拟主机的访问日志存放路径，输出格式为main。
    error_log   logs/host.error.log  error; #错误日志存放路径，输出格式为error。
    error_page  404  /404.html; #状态码为404时的时候的网页地址,还可定义500,502之类的
    ....
}</code></pre><p>以上一些配置为在该server下具有全局性，例如 root，可在location中重新定义root</p>
<h2 id="关于server-name"><a href="#关于server-name" class="headerlink" title="关于server_name"></a>关于server_name</h2><blockquote>
<p>用来指定IP地址或者域名，多个域名之间用空格分开</p>
</blockquote>
<p>当我们想定义多个server监听同一个端口但访问的host不一样时，server_name就派上用场了。nginx会根据HTTP请求的header Host选择nginx配置文件里符合条件的server_name的server配置</p>
<p>匹配顺序如下</p>
<ol>
<li>完全匹配的server_name;</li>
<li>后缀匹配: *.example.com;</li>
<li>前缀匹配: <a href="http://www.example.*/" target="_blank" rel="noopener">www.example.*</a>;</li>
<li>正则匹配: ~\w+.com;</li>
<li>listen指令里配置了default或default_server的server;如｀listen 80 default｀</li>
<li>第一个匹配上listen的server。</li>
</ol>
<p>所以当我们监听的的端口只有一个server配置的时候，server_name 可以不填</p>
<h2 id="关于root和alias的区别"><a href="#关于root和alias的区别" class="headerlink" title="关于root和alias的区别"></a>关于root和alias的区别</h2><p>两者作用差不多，区别在于最终映射的地址不同，例：</p>
<pre><code>location /request_path/image/ {
    # 如果现在访问 /request_path/image/a/b.jpg,root映
    # 射的地址为/local_path/image/request_path/image/a/b.jpg,
    # 而alias为/local_path/image/a/b.jpg
    root    /local_path/image/;
    alias   /local_path/image/; 
}</code></pre><h2 id="关于error-page"><a href="#关于error-page" class="headerlink" title="关于error_page"></a>关于error_page</h2><p>语法：error_page code … [=[response]] uri<br>使用字段: http, server, location, if in location</p>
<p>产生的效果为内部跳转(internal redirect)，即用户页面地址不变，但内容实际上为设置的uri对应的内容<br>我们也可以自定义设置返回的状态码，如：<br>error_page 502 503 =200 /50x.html;<br>这样用户访问产生502 、503的时候给用户的返回状态是200，内容是50x.html。<br>还有一种写法是 <code>=</code> 后面不带状态码，是针对相应的内容不是一个静态的页面，最终返回的状态码取决于对应url服务返回的状态码。</p>
<h2 id="location模块"><a href="#location模块" class="headerlink" title="location模块"></a>location模块</h2><blockquote>
<p>最主要和最复杂的配置，通过定位和解析url，判断该选择什么配置，支持正则和条件判断；</p>
</blockquote>
<p>简单例子，匹配所有请求</p>
<pre><code>location / {
    root   /home/www/html;
    index  index.php index.html index.htm;
}</code></pre><p>一个正则匹配的例子：</p>
<pre><code># 匹配.php结尾的请求
location ~ \.php$ {
    ....
}</code></pre><p>一个反向代理的例子：</p>
<pre><code># 匹配到/api开头的路由时候，将请求转发到http://192.168.0.1，但是通常不是直接填写地址，而是设置一个`upstream`配置，后面会提到
location /api {
    proxy_pass  http://192.168.0.1; #请求转向地址192.168.0.1
    #不修改被代理服务器返回的响应头中的location头
    proxy_redirect off;
    #使用nginx反向代理后，如果要使服务获取真实的用户信息，用以下的设置
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
}</code></pre><p>vue-router、react-router等路由框架要开启history模式可以选择的nginx配置的例子</p>
<pre><code>location / {
  alias     static/;
  try_files $uri $uri/ /index.html;
}</code></pre><p><strong>location的匹配规则和顺序</strong></p>
<ol>
<li>第一种是 <strong>=</strong> 类型，表示精确匹配，优先级最高，一旦匹配到忽略之后的正则匹配</li>
<li><strong>^~</strong> 类型，表示前缀匹配，是字符串开头匹配而非正则匹配，当匹配到该规则时，停止往下面的搜索，所以如果存在两个<strong>^~</strong> 匹配的时候要注意有顺序之分。优先级比正则高。</li>
<li><code>~</code> 和 <code>~*</code>,正则匹配，两者区别是后者不区分大小写。有顺序之分，匹配到第一个正则停止搜索。</li>
<li><code>/uri</code>,普通字符串匹配，无顺序之分，会选择匹配长度最长的配置。</li>
<li><code>/</code> 通用匹配，匹配所有请求</li>
</ol>
<p>还有一种特殊匹配类型 <code>@url</code>，只用于nginx内部跳转，例:</p>
<pre><code>location / {
    root /var/www/html;
    error_page 404 @40x;
}
location @40x {
  root /var/www/errors/40x.html;
}</code></pre><h2 id="upstream模块"><a href="#upstream模块" class="headerlink" title="upstream模块"></a>upstream模块</h2><blockquote>
<p>upstream后端服务器提供简单的负载均衡（轮循调度和客户端 IP）。</p>
</blockquote>
<p>例子：</p>
<pre><code>upstream backend  {
  server backend1.example.com weight=5;
  server backend2.example.com:8080;
  server unix:/tmp/backend3;
}

server {
  location / {
    proxy_pass  http://backend;
  }
}</code></pre><p>有常用两种负载均衡支持调度算法，分别是 <strong>weight</strong> 和 <strong>ip_hash</strong> 。weight 模式下可以为每个 server 设置weight值，weight值越大，分配到的访问机率越高，ip_hash 为同一个ip的<br>分配同一个后端服务器，这样我们不用解决session共享问题。</p>
<h2 id="include"><a href="#include" class="headerlink" title="include"></a>include</h2><blockquote>
<p>include指令 使nginx配置更加灵活，将部分配置直接拆分出来,分成不同的配置文件</p>
</blockquote>
<p>例子：</p>
<pre><code>http {    include mime.types;    include vhost/*.conf; # 虚拟主机配置}</code></pre><h2 id="关于-mime-types："><a href="#关于-mime-types：" class="headerlink" title="关于 mime.types："></a>关于 mime.types：</h2><p>mime type 和 文件扩展名的对应关系一般放在 mime.types 里，然后 用 <code>include mime.types</code>;<br>mime.types作用：通过文件的扩展名设置了Content-Type，Nginx如果没找到对应文件的扩展名的话，就使用默认的Type，默认Type通用 <code>default_type</code> 定义，比如 default_type application/octet-stream ;<br>完整的 mime.types 配置：<a href="https://link.zhihu.com/?target=https%3A//github.com/h5bp/server-configs-nginx/blob/master/mime.types">https://github.com/h5bp/server-configs-nginx/blob/master/mime.types</a></p>
<h2 id="关于-vhost-conf"><a href="#关于-vhost-conf" class="headerlink" title="关于 vhost/*.conf :"></a>关于 vhost/*.conf :</h2><p>一个虚拟主机对一个文件配置，放到vhost文件夹下面，然后通过include指令包含进来，这样更便于维护和管理</p>
<h2 id="gzip"><a href="#gzip" class="headerlink" title="gzip"></a>gzip</h2><blockquote>
<p>gzip 压缩，用来对静态资源进行压缩，需要客户端同时支持才有效。</p>
</blockquote>
<p>配置：</p>
<pre><code>http {
    #开启gzip压缩
    gzip  on;
    #IE6的某些版本对gzip的压缩支持很不好,故关闭
    gzip_disable &quot;MSIE [1-6]\.(?!.*SV1)&quot;;
    #HTTP1.0以上的版本都启动gzip
    gzip_http_version 1.0；
    #指定哪些类型的相应才启用gzip压缩，多个用空格分隔
    gzip_types 
    application/javascript 
    application/json 
    text/css 
    text/plain;
    # 压缩等级，可选1-9，值越大压缩时间越长压缩率越高，
    # 通常选5，能压缩到原来的1/4
    gzip_comp_level 5;
}</code></pre><h2 id="rewrite模块（ngx-http-rewrite-mode）"><a href="#rewrite模块（ngx-http-rewrite-mode）" class="headerlink" title="rewrite模块（ngx_http_rewrite_mode）"></a>rewrite模块（ngx_http_rewrite_mode）</h2><p>rewrite模块配合很多模块一起使用，包含几个指令：</p>
<ol>
<li>break</li>
<li>if</li>
<li>return</li>
<li>rewrite</li>
<li>rewrite_log</li>
<li>set</li>
<li>uninitialized_variable_warn</li>
</ol>
<p>这里简单介绍下break、if、return，重点介绍 rewrite</p>
<h2 id="break"><a href="#break" class="headerlink" title="break"></a>break</h2><p>语法: break;<br>使用字段: server, location, if<br>此指令的意思是停止执行当前虚拟主机的后续rewrite指令集</p>
<p>例子</p>
<pre><code># 如果访问的文件名不存在，反向代理到localhost 。这里的break也是停止rewrite检查
if (!-f $request_filename) {
    break;
    proxy_pass http://127.0.0.1;
}</code></pre><h2 id="if"><a href="#if" class="headerlink" title="if"></a>if</h2><p>语法: if (condition) { … }<br>使用字段: server, location<br>if 判断一个条件，如果条件成立，则后面的大括号内的语句将执行，相关配置从上级继承。</p>
<p>条件(conditon)可以是如下任何操作：</p>
<ol>
<li>当表达式只是一个变量时，如果值为空或任何以0开头的字符串都会当做false；</li>
<li>使用“=”和“!=”比较一个变量和字符串；</li>
<li>使用“<del>”做正则表达式匹配，“</del>*”做不区分大小写的正则匹配，“!~”做区分大小写的正则不匹配；</li>
<li>使用“-f”和“!-f” 检查一个文件是否存在；</li>
<li>使用“-d”和“!-d”检查一个目录是否存在；</li>
<li>使用“-e”和“!-e”检查一个文件、目录、符号链接是否存在；</li>
<li>使用“-x”和“ !-x”检查一个文件是否可执行；</li>
</ol>
<pre><code># 如果提交方法为POST，则返回状态405（Method not allowed）
if ($request_method = POST) {
    return 405;
}</code></pre><h2 id="return"><a href="#return" class="headerlink" title="return"></a>return</h2><p>语法: return code [text];<br>return code URL;<br>return URL;<br>使用字段: server, location, if<br>停止处理并为客户端返回状态码，非标准的444状态码将关闭连接，不发送任何响应头。可以使用的状态码有：204，400，402-406，408，410, 411, 413, 416与500-504。如果状态码附带文字段落，该文本将被放置在响应主体。相反，如果状态码后面是一个URL，该URL将成为location头部值。没有状态码的URL将被视为一个302状态码，这种情况下URL需要以“http://”, “https://”, 或者 “$scheme”开头。</p>
<h2 id="rewrite"><a href="#rewrite" class="headerlink" title="rewrite"></a>rewrite</h2><p>语法: rewrite regex replacement [flag];<br>使用字段: server, location, if<br>使用nginx提供的全局变量或自己设置的变量，然后结合正则表达式和标志位实现url重写以及重定向。多条 rewrite 顺序靠前且匹配的优先执行。可以通过设置 flag 停止继续处理。如果replacement 以“http://”, “https://”, 或者 “$scheme”开头，那么将立即停止处理并临时重定向给客户端。</p>
<p>flag可以是如下参数：</p>
<ul>
<li>last，完成该rewrite规则的执行后，停止处理后续rewrite指令集；然后查找匹配改变后URI的新location；</li>
<li>break，完成该rewrite规则的执行后，停止处理后续rewrite指令集，并不再重新查找；但是当前location内剩余非rewrite语句和location外的的非rewrite语句可以执行；</li>
<li>redirect，返回302临时重定向，地址栏会显示跳转后的地址；</li>
<li>permanent，返回301永久重定向，地址栏会显示跳转后的地址；即表示如果客户端不清理浏览器缓存，那么返回的结果将永久保存在客户端浏览器中了。</li>
</ul>
<p>因为301和302不能简单的只返回状态码，还必须有重定向的URL，这就是return指令无法返回301,302的原因了。两种重定向的方式对客户端来说是一样的，就是重新加载另外一个url。我们在实际设置中推荐只使用永久重定向，因为临时重定向可能造成在url为A页面，但显示的是B页面的内容，造成网址劫持。</p>
<p>比较难以理解的是 last 和 break，让我们先了解 nginx 运行的11个阶段，注意到第四阶段：</p>
<pre><code>typedef enum {  
    NGX_HTTP_POST_READ_PHASE = 0,   //读取请求头  

    NGX_HTTP_SERVER_REWRITE_PHASE,   //执行rewrite  

    NGX_HTTP_FIND_CONFIG_PHASE,  //根据uri替换location  
    NGX_HTTP_REWRITE_PHASE,      //根据替换结果继续执行rewrite  
    NGX_HTTP_POST_REWRITE_PHASE, //执行rewrite后处理  

    NGX_HTTP_PREACCESS_PHASE,    //认证预处理   请求限制，连接限制  

    NGX_HTTP_ACCESS_PHASE,       //认证处理  
    NGX_HTTP_POST_ACCESS_PHASE,  //认证后处理， 认证不通过， 丢包  

    NGX_HTTP_TRY_FILES_PHASE,    //尝试try标签  
    NGX_HTTP_CONTENT_PHASE,      //内容处理  

    NGX_HTTP_LOG_PHASE           //日志处理  
} ngx_http_phases;  </code></pre><p>所以我们再来理解last与break的区别：<br>last： 停止当前这个请求，并根据rewrite匹配的规则重新发起一个请求。新请求又从第一阶段开始执行…<br>break：相对last，break并不会重新发起一个请求，只是跳过当前的rewrite阶段，并执行本请求后续的执行阶段…</p>
<p>通过实例会更加清晰的理解</p>
<pre><code>server {
    listen 80 default_server;
    server_name dcshi.com;
    root www;

    location /break/ {
        rewrite ^/break/(.*) /test/$1 break;
        echo &quot;break page&quot;;
    } 

    location /last/ {
         rewrite ^/last/(.*) /test/$1 last;
         echo &quot;last page&quot;;
    }    

    location /test/ {
       echo &quot;test page&quot;;
    }
}</code></pre><p>请求:<a href="https://link.zhihu.com/?target=http%3A//dcshi.com/break/">http://dcshi.com/break/</a>***<br>输出: break page<br>分析：正如上面讨论所说，break是跳过当前请求的rewrite阶段，并继续执行本请求的其他阶段，很明显，对于/foo 对应的content阶段的输出为 echo “break page”; (content阶段，可以简单理解为产生数据输出的阶段，如返回静态页面内容也是在content阶段；echo指令也是运行在content阶段，一般情况下content阶段只能对应一个输出指令，如同一个location配置两个echo，最终只会有一个echo指令被执行)；当然如果你把/break/里的echo 指令注释，然后再次访问/break/xx会报404，这也跟我们预期一样：虽然/break/xx被重定向到/test/xx,但是break指令不会重新开启一个新的请求继续匹配，所以nginx是不会匹配到下面的/test/这个location；在echo指令被注释的情况下，/break/ 这location里只能执行nginx默认的content指令，即尝试找/test/xx这个html页面并输出起内容，事实上，这个页面不存在，所以会报404的错误。</p>
<p>请求: <a href="https://link.zhihu.com/?target=http%3A//dcshi.com/last/">http://dcshi.com/last/</a>***<br>输出: test page<br>分析: last与break最大的不同是，last会重新发起一个新请求，并重新匹配location，所以对于/last,重新匹配请求以后会匹配到/test/,所以最终对应的content阶段的输出是test page;</p>
<p>解释完了 last 和 break ，我们再写一个实例用来说明 rewrite 可以做什么事情。通过rewrite将不带www的请求统一转向为www：</p>
<pre><code>server {
    # ........
    server_name www.abc.com ;//只留一个
    # ......
｝

server {
  server_name  abc.com;
  rewrite ^(.*)$ http://www.abc.com$1 permanent; 
}</code></pre><p>或者是：</p>
<pre><code>server {
   listen 80;
   server_name abc.com www.abc.com;
   if ( $host != &#39;www.abc.com&#39;  ) {
       rewrite ^/(.*) http://www.abc.com/$1 permanent;
   }
   location / {
       root /data/www/www;
       index index.html index.htm;
   }
}</code></pre><p>参考：</p>
<p><a href="https://link.zhihu.com/?target=http%3A//tool.oschina.net/apidocs/apidoc%3Fapi%3Dnginx-zh">在线文档-nginx-zh</a></p>
<p><a href="https://link.zhihu.com/?target=https%3A//www.jianshu.com/p/bed000e1830b">WEB请求处理二：Nginx请求反向代理</a></p>
<p><a href="https://link.zhihu.com/?target=http%3A//blog.sina.com.cn/s/blog_4f9fc6e10102ux0w.html">http://blog.sina.com.cn/s/blog_4f9fc6e10102ux0w.html</a></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li></ul>
    </div>
 -->


    <div class="article-tag tagcloud" >
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li></ul>

    </div>
      <div class="article-tag tagcloud">

        <span class="post-count">总字数3.2k</span>
        <span class="post-count">预计阅读12分钟</span>
      </div>
    
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-hexo的next主题换到Yelee(Yilia)" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/1815339691.html" class="article-date">
      <time datetime="2020-04-10T20:00:39.000Z" itemprop="datePublished">2020-04-11</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/1815339691.html">hexo的next主题换到Yelee(Yilia)</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                   原有的主题是已经配过valine的 配置valine,

需要注意下面的配置

本主题基于主题 Hexo-Theme-Yilia 修改而来，在此再次感谢原作者 Litten。修复了一些 bugs，改变了大量的样式，添加了不少特性。对原主题百般折腾后，发觉变动越来越大，

索性就发布个新主题了，主题随我微博名 “夜Yelee” 。个人喜欢简洁的样式，重视内容的浏览，

同时希望作为个人网站的博客，能稍微凸显出博主个性。各种修改折腾大抵基于以上考虑。

layout/_partial/post/nav.ejs

<% if (theme.valine && theme.valine.appid &
                 
                    
              <!-- 
              
              原有的主题是已经配过valine的 配置valine,

需要注意下面的配置

本主题基于主题 Hexo-Theme-Yilia 修改而来，在此再次感谢原作者 Litten。修复了一些 bugs，改变了大量的样式，添加了不少特性。对原主题百般折腾后，发觉变动越来越大，

索性就发布个新主题了，主题随我微博名 “夜Yelee” 。个人喜欢简洁的样式，重视内容的浏览，

同时希望作为个人网站的博客，能稍微凸显出博主个性。各种修改折腾大抵基于以上考虑。

layout/_partial/post/nav.ejs

<% if (theme.valine && theme.valine.appid &
              
               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Yelee/" rel="tag">Yelee</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Yilia/" rel="tag">Yilia</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo%E4%B8%BB%E9%A2%98/" rel="tag">hexo主题</a></li></ul>
    </div>
 -->


    <div class="article-tag tagcloud" >
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Yelee/" rel="tag">Yelee</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Yilia/" rel="tag">Yilia</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo%E4%B8%BB%E9%A2%98/" rel="tag">hexo主题</a></li></ul>

    </div>
      <div class="article-tag tagcloud">

        <span class="post-count">总字数2k</span>
        <span class="post-count">预计阅读10分钟</span>
      </div>
    
      
        <p class="article-more-link">
          <a href="/1815339691.html#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-使用yandex搭建自定义域名的邮件服务" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2045142583.html" class="article-date">
      <time datetime="2020-04-10T19:36:20.000Z" itemprop="datePublished">2020-04-11</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2045142583.html">使用yandex搭建自定义域名的邮件服务</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p><a href="https://www.daweibro.com/node/255" target="_blank" rel="noopener">2019年最新Yandex免费域名邮箱申请使用全攻略</a></p>
<p>我注册的域名是免费的 <a href="https://my.freenom.com/clientarea.php" target="_blank" rel="noopener">注册ml域名的地址</a>下面的注册好的列表</p>
<p>注册不成功显示 Not available 可以使用这个入口<a href="http://www.point.ml/en/index.html?lang=en" target="_blank" rel="noopener">http://www.point.ml/en/index.html?lang=en</a></p>
<p>
                              
                          
                    
              <!-- 
              
              <p><a href="https://www.daweibro.com/node/255" target="_blank" rel="noopener">2019年最新Yandex免费域名邮箱申请使用全攻略</a></p>
<p>我注册的域名是免费的 <a href="https://my.freenom.com/clientarea.php" target="_blank" rel="noopener">注册ml域名的地址</a>下面的注册好的列表</p>
<p>注册不成功显示 Not available 可以使用这个入口<a href="http://www.point.ml/en/index.html?lang=en" target="_blank" rel="noopener">http://www.point.ml/en/index.html?lang=en</a></p>
<p><a href="../img/1586576471104.png"><img src="../img/1586576471104.png" alt="1586576471104"></a></p>
<p>刚开始用的是<a href="https://www.bajiedns.com/这个dns,但是配置后依照没反应" target="_blank" rel="noopener">https://www.bajiedns.com/这个dns,但是配置后依照没反应</a> dns.la,he dns.com 这两个都要手机号码而且后面操作也麻烦,我后面选择<a href="https://www.dnspod.cn/" target="_blank" rel="noopener">dnspod</a>之前用的就是这个后面是要变收费 ,看页面也没提免费解析,</p>
<p>1 .修改nameservr(NS)-&gt;f1g1ns1.dnspod.net ,f1g1ns2.dnspod.net.</p>
<p>2 .验证这个域名是你的在yandex哪会有 yandex-verification 的部分</p>
<p>3 .解析域名到mx.yandex.com 这样才能使用他们的邮件服务</p>
<p>4 .添加一个TXT记录，子域名为“mail._domainkey”，值为“v=DKIM1; k=rsa; t=s jjj”。</p>
<p><a href="../img/1586576874444.png"><img src="../img/1586576874444.png" alt="1586576874444"></a></p>
<p>上述配置完后就可以使用 adduser 创建用户后,注意创建后也要在网页<a href="https://mail.yandex.xn--com-kb0e97on6apa447xdkj502bmbdpt7bsb3ay84a/" target="_blank" rel="noopener">https://mail.yandex.com登陆同意协议后方能使用</a></p>
<pre><code>IMAP：imap.yandex.com 端口：993(SSL)
POP3：pop.yandex.com 端口：995(SSL)
SMTP：smtp.yandex.com 端口：465(SSL)</code></pre>
               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mail/" rel="tag">mail</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/yandex/" rel="tag">yandex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9F%9F%E5%90%8D/" rel="tag">域名</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/" rel="tag">邮件服务</a></li></ul>
    </div>
 -->


    <div class="article-tag tagcloud" >
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mail/" rel="tag">mail</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/yandex/" rel="tag">yandex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9F%9F%E5%90%8D/" rel="tag">域名</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/" rel="tag">邮件服务</a></li></ul>

    </div>
      <div class="article-tag tagcloud">

        <span class="post-count">总字数290</span>
        <span class="post-count">预计阅读1分钟</span>
      </div>
    
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-ubuntu进程(daemon)管理,启动和停止" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/1520204912.html" class="article-date">
      <time datetime="2020-04-06T21:01:16.000Z" itemprop="datePublished">2020-04-07</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/1520204912.html">ubuntu进程(daemon)管理,启动和停止</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>systemctl list-units –all –type=service</p>
<p>systemctl list-units –all –type=service –no-pager</p>
<p><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html" target="_blank" rel="noopener">Systemd 入门教程：命令篇</a></p>
<p>
                              
                          
                    
              <!-- 
              
              <p>systemctl list-units –all –type=service</p>
<p>systemctl list-units –all –type=service –no-pager</p>
<p><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html" target="_blank" rel="noopener">Systemd 入门教程：命令篇</a></p>
<p>ystemd 是 Linux 系统工具，用来启动<a href="http://www.ruanyifeng.com/blog/2016/02/linux-daemon.html" target="_blank" rel="noopener">守护进程</a>，已成为大多数发行版的标准配置。</p>
<p>正确使用的一种，利用systemctl命令。 您的系统可能使用其他服务初始化命令，例如常用服务。 但是，当命令systemctl可用时，使用list-units选项应该会产生良好的结果。 添加了一些额外的参数，这些参数可以自行解释。</p>
<h3 id="Linux启动过程"><a href="#Linux启动过程" class="headerlink" title="Linux启动过程"></a>Linux启动过程</h3><p>也可以设置每次登录自动执行脚本，在/etc/profile.d/目录下新建sh脚本，<br>/etc/profile会遍历/etc/profile.d/*.sh</p>
<p>另外，几个脚本的区别：<br>（1） /etc/profile： 此文件为系统的每个用户设置环境信息,当用户第一次登录时,该文件被执行. 并从/etc/profile.d目录的配置文件中搜集shell的设置。</p>
<p>（2） /etc/bashrc: 为每一个运行bash shell的用户执行此文件.当bash shell被打开时,该文件被读取（即每次新开一个终端，都会执行bashrc）。</p>
<p>（3） ~/.bash_profile: 每个用户都可使用该文件输入专用于自己使用的shell信息,当用户登录时,该文件仅仅执行一次。默认情况下,设置一些环境变量,执行用户的.bashrc文件。</p>
<p>（4） ~/.bashrc: 该文件包含专用于你的bash shell的bash信息,当登录时以及每次打开新的shell时,该该文件被读取。</p>
<p>（5） <del>/.bash_logout: 当每次退出系统(退出bash shell)时,执行该文件. 另外,/etc/profile中设定的变量(全局)的可以作用于任何用户,而</del>/.bashrc等中设定的变量(局部)只能继承 /etc/profile中的变量,他们是”父子”关系。</p>
<p>（6） <del>/.bash_profile: 是交互式、login 方式进入 bash 运行的</del>/.bashrc 是交互式 non-login 方式进入 bash 运行的通常二者设置大致相同，所以通常前者会调用后者。</p>
<p><a href="javascript:;">
</a></p>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a></li></ul>
    </div>
 -->


    <div class="article-tag tagcloud" >
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a></li></ul>

    </div>
      <div class="article-tag tagcloud">

        <span class="post-count">总字数500</span>
        <span class="post-count">预计阅读1分钟</span>
      </div>
    
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-树莓派内网穿透" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2070834639.html" class="article-date">
      <time datetime="2020-04-05T00:54:08.000Z" itemprop="datePublished">2020-04-05</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2070834639.html">树莓派内网穿透</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>下面是我了解的提供内网穿透的网站,也可以使用比较传统的花生壳</p>
<ul>
<li><p><a href="https://www.natfrp.com/" target="_blank" rel="noopener">Sakura Frp </a>我用的这个</p>
<p>
                              
                          
                    
              <!-- 
              
              <p>下面是我了解的提供内网穿透的网站,也可以使用比较传统的花生壳</p>
<ul>
<li><p><a href="https://www.natfrp.com/" target="_blank" rel="noopener">Sakura Frp </a>我用的这个</p>
</li>
<li><p><a href="http://www.ngrok.cc/" target="_blank" rel="noopener">Sunny-Ngrok </a>支持ngrok,frp两种客户端 还是推荐的</p>
</li>
<li><p><a href="https://natapp.cn/" target="_blank" rel="noopener">natapp</a> 第一个pass 要手机号码注册而且后面使用其服务还要实名(支付宝验证)</p>
</li>
<li><p><a href="../xiaomy.net">网云穿内网穿透</a></p>
<p>这个看介绍还不错 但是没有树莓派的软件,树莓派目前的 linux-arm不能用64位的,它提供的是wyc_linux_64所以就放弃的,但是它有提供Java版,但是要配置jre环境就算了</p>
</li>
</ul>
<p><a href="../img/1586077499502.png"><img src="../img/1586077499502.png" alt="1586077499502"></a></p>
<p>大概使用Sakura Frp步骤</p>
<ol>
<li><p>下载对应的软件</p>
<p>这个是注意事项</p>
<pre><code>由于客户端更新，所有用户将需要重新下载最新版本的客户端，请老用户访问左侧软件下载获取最新版本客户端。**为了避免滥用，所有国内节点将不会转发未实名用户的HTTP流量（特指使用TCP隧道建立的对HTTP协议web服务器的映射），如希望使用国内节点建站请实名认证或加群(747976298)联系我(Q:2792020)并提供已备案的域名然后使用HTTP/HTTPS隧道。**</code></pre><p><a href="https://qianqu.me/frp/frpc_linux_arm" target="_blank" rel="noopener">https://qianqu.me/frp/frpc_linux_arm</a> 下载树莓派的链接</p>
</li>
<li><p>创建隧道</p>
<p><a href="../img/1586077969123.png"><img src="../img/1586077969123.png" alt="1586077969123"></a></p>
</li>
<li><p>启动</p>
<pre><code>chmod +x frpc_linux_arm    
将文件传输到你创建的文件下面  
sudo ./frpc_linux_arm         
完成后在平级的文件夹下面会有frp_user.txt的配置文件      然后在终端下面会显示</code></pre></li>
</ol>
<p>本地：127.0.0.1:80 请把域名: yun.imlike.cc 的CNAME记录更改为: us-la-kr.sakurafrp.com (或更改A记录为: 98.126.219.155)</p>
<blockquote>
<p>此时直接访问us-la-kr.sakurafrp.com 是503 Service Unavailable错误,还有就是上面提到的告示,使用国内的节点需要通过站长的通过否则也会导致页面错误</p>
</blockquote>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" rel="tag">内网穿透</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li></ul>
    </div>
 -->


    <div class="article-tag tagcloud" >
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" rel="tag">内网穿透</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li></ul>

    </div>
      <div class="article-tag tagcloud">

        <span class="post-count">总字数467</span>
        <span class="post-count">预计阅读1分钟</span>
      </div>
    
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-树莓派使用cloudreve搭建nas和离线下载" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/1661309199.html" class="article-date">
      <time datetime="2020-04-03T17:11:52.000Z" itemprop="datePublished">2020-04-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/1661309199.html">树莓派使用cloudreve搭建nas和离线下载</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p><a href="https://www.coolapk.com/feed/17682984?shareKey=MzYxMmY3MTc4YzNjNWU4N2RkYmU~&shareUid=902662&shareFrom=com.coolapk.market_9.0.2" target="_blank" rel="noopener"><strong>树莓派搭建满速家庭云网盘（Lv.1）</strong></a></p>
<p><a href="https://www.coolapk.com/feed/17772116?shareKey=OTA2MTE2NGIxNDhiNWU4N2U2ZjQ~&shareUid=902662&shareFrom=com.coolapk.market_9.0.2" target="_blank" rel="noopener"><strong>[干货Get!]Android搭建Cloudreve私人云盘</strong></a></p>
<p><a href="../img/1586074575520.png"><img src="../img/1586074575520.png" alt="1586074575520"></a></p>
<p>
                              
                          
                    
              <!-- 
              
              <p><a href="https://www.coolapk.com/feed/17682984?shareKey=MzYxMmY3MTc4YzNjNWU4N2RkYmU~&shareUid=902662&shareFrom=com.coolapk.market_9.0.2" target="_blank" rel="noopener"><strong>树莓派搭建满速家庭云网盘（Lv.1）</strong></a></p>
<p><a href="https://www.coolapk.com/feed/17772116?shareKey=OTA2MTE2NGIxNDhiNWU4N2U2ZjQ~&shareUid=902662&shareFrom=com.coolapk.market_9.0.2" target="_blank" rel="noopener"><strong>[干货Get!]Android搭建Cloudreve私人云盘</strong></a></p>
<p><a href="../img/1586074575520.png"><img src="../img/1586074575520.png" alt="1586074575520"></a></p>
<h3 id="允许SHH使用root登陆"><a href="#允许SHH使用root登陆" class="headerlink" title="允许SHH使用root登陆"></a>允许SHH使用root登陆</h3><p>sudo passwd 来重置root用户的密码</p>
<p> <strong>vim /etc/ssh/sshd_config</strong></p>
<p>注释掉 PermitRootLogin without-password</p>
<p>使用 PermitRootLogin yes</p>
<h3 id="连接树莓派将文件传过去"><a href="#连接树莓派将文件传过去" class="headerlink" title="连接树莓派将文件传过去"></a>连接树莓派将文件传过去</h3><p>现在下载 <a href="https://github.com/cloudreve/Cloudreve/releases" target="_blank" rel="noopener">https://github.com/cloudreve/Cloudreve/releases</a> 选择<a href="https://github.com/cloudreve/Cloudreve/releases/download/3.0.0-rc1/cloudreve_3.0.0-rc1_linux_arm.tar.gz" target="_blank" rel="noopener">cloudreve_3.0.0-rc1_linux_arm.tar.gz</a></p>
<p><a href="../img/1586075347405.png"><img src="../img/1586075347405.png" alt="1586075347405"></a></p>
<p>sudo mkdir /home/cloud</p>
<p>使用ftp的客户端连接注意使用 root</p>
<p>将下载cloudreve_3.0.0-rc1_linux_arm.tar.gz 放到 /home/cloud下</p>
<p>sudo tar -xzvf cloudreve_3.0.0-rc1_linux_arm.tar.gz 解压后也是个单文件cloudreve</p>
<p>sudo ./cloudreve</p>
<p>后面终端会打印出来用户<a href="mailto:admin@cloudreve.org">admin@cloudreve.org</a> 和密码</p>
<h3 id="初始化cloudreve-3-0-0-rc1-linux-arm和设置"><a href="#初始化cloudreve-3-0-0-rc1-linux-arm和设置" class="headerlink" title="初始化cloudreve_3.0.0-rc1_linux_arm和设置"></a>初始化cloudreve_3.0.0-rc1_linux_arm和设置</h3><p>登陆后下面是初始化的页面</p>
<p><a href="../img/1586074929312.png"><img src="../img/1586074929312.png" alt="1586074929312"></a></p>
<h4 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h4><p><a href="../img/1586075685498.png"><img src="../img/1586075685498.png" alt="1586075685498"></a></p>
<p>只有这个入口可以设置用户(包括管理员)使用的存储的地址,可以本地-&gt;这个本地可以选择硬盘挂载路径,也可以用onedrive</p>
<h3 id="设置cloudreve后台启动"><a href="#设置cloudreve后台启动" class="headerlink" title="设置cloudreve后台启动"></a>设置cloudreve后台启动</h3><p>vim /usr/lib/systemd/system/cloudreve.service</p>
<p>粘贴以下内容然后文内的 PATH_TO_CLOUDREVE 更换为程序所在目录</p>
<pre><code>    [Unit]
        Description=Cloudreve
        Documentation= =[查看链接](https://docs.cloudreve.org/)
        After=network.target
        Wants=network.target

[Service]
    WorkingDirectory=/PATH_TO_CLOUDREVE
    ExecStart=/PATH_TO_CLOUDREVE/cloudreve
    Restart=on-abnormal
    RestartSec=5s
    KillMode=mixed
    StandardOutput=null
    StandardError=syslog
[Install]
    WantedBy=multi-user.target</code></pre><p>然后Ctrl+o保存Ctrl+x退出</p>
<p>然后配置进程<br>更新配置<br>systemctl daemon-reload<br>启动服务<br>systemctl start cloudreve<br>设置开机启动<br>systemctl enable cloudreve</p>
<p>然后我们就可以通过以下指令来管理服务了<br># 启动服务<br>systemctl start cloudreve</p>
<p># 停止服务<br>systemctl stop cloudreve</p>
<p># 重启服务<br>systemctl restart cloudreve</p>
<p># 查看状态<br>systemctl status cloudreve</p>
<h2 id="软连接到挂载的硬盘"><a href="#软连接到挂载的硬盘" class="headerlink" title="软连接到挂载的硬盘"></a>软连接到挂载的硬盘</h2><p>ln -s /home/device /home/cloud/uploads/1/disk</p>
<p>fdisk -l 查看分区和挂载状况</p>
<pre><code>sudo su 建一个目录作为U盘的挂接点。比如说要把U盘挂载到 /mnt/usb，那么需要采用下列命令新建 /mnt/usb。       mkdir /mnt/usb      
然后就可以采用mount命令把U盘挂载在/mnt/usb。    
mount /dev/sdb1 /mnt/usb     
输入命令 cd /mnt/usb进入目录/mnt/usb，
然后输入 ls命令就可以查看U盘里的内容了。
mount  /dev/sda1  /home/cloud/uploads/1/diskmount  /dev/sda1 /home/device</code></pre>
               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cloud/" rel="tag">cloud</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nas/" rel="tag">nas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li></ul>
    </div>
 -->


    <div class="article-tag tagcloud" >
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cloud/" rel="tag">cloud</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nas/" rel="tag">nas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li></ul>

    </div>
      <div class="article-tag tagcloud">

        <span class="post-count">总字数520</span>
        <span class="post-count">预计阅读2分钟</span>
      </div>
    
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-树莓派nginx代理转发到本机端口" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/981520166.html" class="article-date">
      <time datetime="2020-04-03T16:09:12.000Z" itemprop="datePublished">2020-04-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/981520166.html">树莓派nginx代理转发到本机端口</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><p>sudo apt-get update</p>
<p>sudo apt-get install nginx</p>
<p>安装成功后 sudo /etc/init.d/nginx start 启动一下访问树莓派的IP能访问成功就可以了</p>
<p>
                              
                          
                    
              <!-- 
              
              <p>sudo apt-get update</p>
<p>sudo apt-get install nginx</p>
<p>安装成功后 sudo /etc/init.d/nginx start 启动一下访问树莓派的IP能访问成功就可以了</p>
<p>选择/etc/nginx/nginx.conf</p>
<pre><code>http {

   server{
            listen 80;
            server_name yun.imlike.cc;
             location / {
             # 一些基本反向代理配置以及获取请求真是IP地址
                    proxy_redirect off;
                    proxy_set_header Host $host;
                    proxy_set_header X-Real-Ip $remote_addr;
                    proxy_set_header X-Forwarded-For $remote_addr;
                    proxy_pass http://192.168.2.189:8001;
            }
           # access_log /home/wwwlogs/git.aboutme.ink.log;
    }
       server{
            listen 80;
            server_name portal.imlike.cc;
             location / {
             # 一些基本反向代理配置以及获取请求真是IP地址
                    proxy_redirect off;
                    proxy_set_header Host $host;
                    proxy_set_header X-Real-Ip $remote_addr;
                    proxy_set_header X-Forwarded-For $remote_addr;
                    proxy_pass http://192.168.2.189:9000;
            }
           # access_log /home/wwwlogs/git.aboutme.ink.log;
    }
}</code></pre><p>sudo /etc/init.d/nginx restart 重启一下</p>
<h3 id="优化访问"><a href="#优化访问" class="headerlink" title="优化访问"></a>优化访问</h3><p>目前是已经知道树莓派的IP的有两种优化的</p>
<ol>
<li><p>使用host改本地访问</p>
<p>目前我将host改为</p>
<p>192.168.2.189 yun.imlike.cc<br>192.168.2.189 portal.imlike.cc</p>
<p>这样这两个域名将会解析到192.168.2.189IP上,由于由于nginx上面的配置会解析 server_name对应的yun.imlike.cc,portal.imlike.cc效果如下</p>
<p><a href="../img/1586076685372.png"><img src="../img/1586076685372.png" alt="1586076685372"></a></p>
</li>
<li><p>使用路由器改变DNS解析,使其解析到树莓派IP</p>
<p>该方式还没实现,原理是一样的</p>
</li>
</ol>

               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li></ul>
    </div>
 -->


    <div class="article-tag tagcloud" >
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li></ul>

    </div>
      <div class="article-tag tagcloud">

        <span class="post-count">总字数299</span>
        <span class="post-count">预计阅读1分钟</span>
      </div>
    
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-树莓派docker搭建配置" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/1469044090.html" class="article-date">
      <time datetime="2020-04-02T23:42:52.000Z" itemprop="datePublished">2020-04-03</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/1469044090.html">树莓派docker搭建配置</a>
    </h1>
  

      </header>
      
    
        <div class="article-entry" itemprop="articleBody">
          
                
                            
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                                  
                            
                                
                                <p><h3 id="搭建docker环境"><a href="#搭建docker环境" class="headerlink" title="搭建docker环境"></a>搭建docker环境</h3><p>如果你过去安装过 docker，先删掉:</p>
<pre><code>sudo apt-get remove docker docker-engine docker.io</code></pre><p>首先安装依赖:</p>
<pre><code>sudo apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common</code></pre><p>信任 Docker 的 GPG 公钥:</p>
<p>
                              
                          
                    
              <!-- 
              
              <h3 id="搭建docker环境"><a href="#搭建docker环境" class="headerlink" title="搭建docker环境"></a>搭建docker环境</h3><p>如果你过去安装过 docker，先删掉:</p>
<pre><code>sudo apt-get remove docker docker-engine docker.io</code></pre><p>首先安装依赖:</p>
<pre><code>sudo apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common</code></pre><p>信任 Docker 的 GPG 公钥:</p>
<pre><code>curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -</code></pre><p>如果你是树莓派或其它ARM架构计算机，请运行:</p>
<pre><code>echo &quot;deb [arch=armhf] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/debian \     $(lsb_release -cs) stable&quot; | \    sudo tee /etc/apt/sources.list.d/docker.list</code></pre><p>最后安装</p>
<pre><code>sudo apt-get updatesudo apt-get install docker-ce</code></pre><h2 id="使用脚本自动安装"><a href="#使用脚本自动安装" class="headerlink" title="使用脚本自动安装"></a>使用脚本自动安装</h2><p>在测试或开发环境中 Docker 官方为了简化安装流程，提供了一套便捷的安装脚本，Raspbian 系统上可以使用这套脚本安装，另外可以通过 <code>--mirror</code> 选项使用国内源进行安装：</p>
<pre><code>$ curl -fsSL get.docker.com -o get-docker.sh
$ sudo sh get-docker.sh --mirror Aliyun# 
$ sudo sh get-docker.sh --mirror AzureChinaCloud</code></pre><p>执行这个命令后，脚本就会自动的将一切准备工作做好，并且把 Docker CE 的稳定(stable)版本安装在系统中。</p>
<h2 id="启动-Docker-CE"><a href="#启动-Docker-CE" class="headerlink" title="启动 Docker CE"></a>启动 Docker CE</h2><pre><code>$ sudo systemctl enable docker$ sudo systemctl start docker</code></pre><h2 id="建立-docker-用户组"><a href="#建立-docker-用户组" class="headerlink" title="建立 docker 用户组"></a>建立 docker 用户组</h2><p>默认情况下，<code>docker</code> 命令会使用 <a href="https://en.wikipedia.org/wiki/Unix_domain_socket" target="_blank" rel="noopener">Unix socket</a> 与 Docker 引擎通讯。而只有 <code>root</code> 用户和 <code>docker</code> 组的用户才可以访问 Docker 引擎的 Unix socket。出于安全考虑，一般 Linux 系统上不会直接使用 <code>root</code> 用户。因此，更好地做法是将需要使用 <code>docker</code> 的用户加入 <code>docker</code> 用户组。</p>
<p>建立 <code>docker</code> 组：</p>
<pre><code>$ sudo groupadd docker</code></pre><p>将当前用户加入 <code>docker</code> 组：</p>
<pre><code>$ sudo usermod -aG docker $USER</code></pre><p><strong>退出当前终端并重新登录，进行如下测试。</strong></p>
<h3 id="测试-Docker-是否安装正确"><a href="#测试-Docker-是否安装正确" class="headerlink" title="测试 Docker 是否安装正确"></a>测试 Docker 是否安装正确</h3><pre><code>$ docker run hello-worldUnable to find image &#39;hello-world:latest&#39; locallylatest: Pulling from library/hello-world4ee5c797bcd7: Pull complete Digest: sha256:f9dfddf63636d84ef479d645ab5885156ae030f611a56f3a7ac7f2fdd86d7e4eStatus: Downloaded newer image for hello-world:latestHello from Docker!This message shows that your installation appears to be working correctly.To generate this message, Docker took the following steps:1. The Docker client contacted the Docker daemon.2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.   (arm32v7)3. The Docker daemon created a new container from that image which runs the   executable that produces the output you are currently reading.4. The Docker daemon streamed that output to the Docker client, which sent it   to your terminal.To try something more ambitious, you can run an Ubuntu container with: $ docker run -it ubuntu bashShare images, automate workflows, and more with a free Docker ID: https://hub.docker.com/For more examples and ideas, visit: https://docs.docker.com/get-started/</code></pre><h3 id="docker-compose的安装"><a href="#docker-compose的安装" class="headerlink" title="docker-compose的安装"></a>docker-compose的安装</h3><p>开始是找的国内的镜像,但是下载一直是8k的文件不能执行打开就是文件下载失败这种内容,可能是我这个网络问题</p>
<pre><code>curl -L https://get.daocloud.io/docker/compose/releases/download/1.25.4/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-composechmod +x /usr/local/bin/docker-compose</code></pre><p>后面我找到别的资源</p>
<p>至此Docker就安装好了，再安装docker compose。<br>先看有没有pip或pip3，有就直接卸了。然后安装：</p>
<p>Bash</p>
<pre><code>$ apt-get remove python-pip python3-pip
$ wget https://bootstrap.pypa.io/get-pip.py$ python get-pip.py$ python3 get-pip.py</code></pre><p>然后安装一些依赖库</p>
<pre><code>apt install python-dev python3-dev libevent-dev python-scipy libssl-dev libffi-devapt install apt-transport-https ca-certificates curl gnupg2 software-properties-commonpip install cryptography</code></pre><p>查看pip版本:</p>
<pre><code>root@raspberrypi:~# pip3 --versionpip 19.1.1 from /usr/local/lib/python3.5/dist-packages/pip (python 3.5)root@raspberrypi:~#</code></pre><p>安装docker compose<br>这里通过pip的方式安装，所以先安装pip</p>
<pre><code>$ pip3 install docker-compose</code></pre><p>如果你报了什么</p>
<pre><code>TypeError: unsupported operand type(s) for -=: &#39;Retry&#39; and &#39;int&#39;</code></pre><p>这样的错误，多半是用了上古时代的pip，参考上述方式卸载重装，然后重启一下。如果是下面这样的错</p>
<pre><code>pip._vendor.urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host=&#39;www.piwheels.org&#39;, port=443): Read timed out.</code></pre><p><strong>是由于网络连接超时，重新执行命令就好，或者用国内镜像下载。可以多试几次</strong></p>
<p>安装好了查看版本：</p>
<pre><code>root@raspberrypi:~# docker-compose --versiondocker-compose version 1.24.1, build 4667896root@raspberrypi:~#</code></pre><p>sudo pip3 install docker-compose</p>
<h3 id="设置docker镜像"><a href="#设置docker镜像" class="headerlink" title="设置docker镜像"></a>设置docker镜像</h3><pre><code>sudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-&#39;EOF&#39;{    &quot;registry-mirrors&quot;: [        &quot;https://1nj0zren.mirror.aliyuncs.com&quot;,        &quot;https://docker.mirrors.ustc.edu.cn&quot;,        &quot;http://f1361db2.m.daocloud.io&quot;,        &quot;https://registry.docker-cn.com&quot;    ]}EOFsudo systemctl daemon-reloadsudo systemctl restart docker</code></pre><p>镜像加速器 镜像加速器地址 专属加速器<a href="../1469044090.html#">？</a> 其它加速<a href="../1469044090.html#">？</a></p>
<p><a href="https://docker-cn.com/registry-mirror" target="_blank" rel="noopener">Docker 中国官方镜像</a> <code>https://registry.docker-cn.com</code></p>
<p>Docker Hub <a href="https://daocloud.io/mirror" target="_blank" rel="noopener">DaoCloud 镜像站</a></p>
<p><code>http://f1361db2.m.daocloud.io</code> 可登录，系统分配 Docker Hub</p>
<p><a href="https://github.com/Azure/container-service-for-azure-china/blob/master/aks/README.md#22-container-registry-proxy" target="_blank" rel="noopener">Azure 中国镜像</a> <code>https://dockerhub.azk8s.cn</code> Docker Hub、GCR、Quay <a href="https://mirrors.ustc.edu.cn/help/dockerhub.html" target="_blank" rel="noopener">科大镜像站</a> <code>https://docker.mirrors.ustc.edu.cn</code> Docker Hub、<a href="https://github.com/ustclug/mirrorrequest/issues/91" target="_blank" rel="noopener">GCR</a>、<a href="https://github.com/ustclug/mirrorrequest/issues/135" target="_blank" rel="noopener">Quay</a> <a href="https://cr.console.aliyun.com/" target="_blank" rel="noopener">阿里云</a> <code>https://&lt;your_code&gt;.mirror.aliyuncs.com</code> 需登录，系统分配 Docker Hub <a href="https://kirk-enterprise.github.io/hub-docs/#/user-guide/mirror" target="_blank" rel="noopener">七牛云</a> <code>https://reg-mirror.qiniu.com</code> Docker Hub、GCR、Quay <a href="https://c.163yun.com/hub" target="_blank" rel="noopener">网易云</a> <code>https://hub-mirror.c.163.com</code> Docker Hub <a href="https://cloud.tencent.com/document/product/457/9113" target="_blank" rel="noopener">腾讯云</a> <code>https://mirror.ccs.tencentyun.com</code> Docker Hub</p>
<p>作者：y0ngb1n链接：<a href="https://juejin.im/post/5cd2cf01f265da0374189441来源：掘金著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。" target="_blank" rel="noopener">https://juejin.im/post/5cd2cf01f265da0374189441来源：掘金著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</a></p>
<p>###</p>
<pre><code>#查看 Docker 版本docker -``vsudo` `docker pull 仓库/镜像:版本（留空的话默认为 latest）sudo` `docker run 加参数，用来创建容器#查看运行容器sudo` `docker ``ps#查看所有下载的镜像sudo` `docker images#进入容器终端sudo` `docker ``exec` `-i -t ha ``/bin/bash#实时查看10行的 ha 日志sudo` `docker logs -f -t --``tail` `10 ha#重启 systemctl 守护进程sudo` `systemctl daemon-reload#设置 Docker 开机启动sudo` `systemctl ``enable` `docker#开启 Docker 服务sudo` `systemctl start docker</code></pre><h3 id="常用配置和工具命令"><a href="#常用配置和工具命令" class="headerlink" title="常用配置和工具命令"></a>常用配置和工具命令</h3><pre><code>#查看 Docker 版本docker -vsudo docker pull 仓库/镜像:版本（留空的话默认为 latest）sudo docker run 加参数，用来创建容器#查看运行容器sudo docker ps#查看所有下载的镜像sudo docker images#进入容器终端sudo docker exec -i -t ha /bin/bash#实时查看10行的 ha 日志sudo docker logs -f -t --tail 10 ha#重启 systemctl 守护进程sudo systemctl daemon-reload#设置 Docker 开机启动sudo systemctl enable docker#开启 Docker 服务sudo systemctl start docker #下载 Docker 图形化界面 portainersudo docker pull portainer/portainer#创建 portainer 容器sudo docker volume create portainer_data#运行 portainersudo docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run</code></pre><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p>docker images,docker ps</p>
<p>docker pull nextcloud</p>
<p>docker pull portainer/portainer</p>
<pre><code>docker run -ti -d --name kevin-portainer -p 9000:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock  portainer/portainerdocker run -d -p 9000:9000 -p 8000:8000 --name portainer --restart unless-stopped -v /var/run/docker.sock:/var/run/docker.sock  portainer/portainer</code></pre><p><a href="../img/1585911408361.png"><img src="../img/1585911408361.png" alt="1585911408361"></a></p>
<pre><code>docker run --name=my_portainer -d -p 9001:9001 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_volume:/data portainer/portainer该容器命名为my_portainer，将容器中portainer默认端口9000，映射到宿主机端口9000，使用socket映射 /var/run/docker.sock:/var/run/docker.sock，指定volume映射（即将portainer_volume对应的宿主机目录挂载到容器的/data目录），容器基于portainer/portainer镜像启动</code></pre><p><a href="../img/1585911501671.png"><img src="../img/1585911501671.png" alt="1585911501671"></a></p>
<pre><code>mkdir /home/nextclouddocker run --name nextcloud -p 8080:80   -v /home/nextcloud:/var/www/html/data -d nextcloud参数说明：–name：设定容器名称为nextcloud-p 8080:80 ：端口映射，将宿主机8080端口映射到容器中的80端口-v /data/nextcloud:/var/www/html/data将容器中项目的data目录映射到本地/data/nextcloud目录下方便配置和数据保存-d 是以后台形式启动</code></pre><p><a href="../img/1585911463432.png"><img src="../img/1585911463432.png" alt="1585911463432"></a></p>
<p><a href="https://cloud.tencent.com/developer/article/1371476" target="_blank" rel="noopener">https://cloud.tencent.com/developer/article/1371476</a></p>
<p>中间找不文件就选择下面这个命令</p>
<pre><code>cd /var/lib/find . -name &quot;config.php&quot;</code></pre>
               -->
        </div>
        
    
    <div class="article-info article-info-index">
      
      

      <!-- 
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li></ul>
    </div>
 -->


    <div class="article-tag tagcloud" >
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li></ul>

    </div>
      <div class="article-tag tagcloud">

        <span class="post-count">总字数1.7k</span>
        <span class="post-count">预计阅读8分钟</span>
      </div>
    
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/">下一页 </a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2020 leek
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by leek <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-144246563-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
            
            
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

    <script>
        var originTitle = document.title;
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.title = "(つェ⊂) 我藏好了哦~ " + originTitle;
                clearTimeout(titleTime);
            }
            else {
                document.title = "(*´∇｀*) 被你发现啦~ " + originTitle;
                titleTime = setTimeout(function() {
                    document.title = originTitle;
                }, 2000);
            }
        })
    </script>

<script async src="https://cdn.busuanzi.ibruce.info/cdn/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>